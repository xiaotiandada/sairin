{"pageProps":{"post":{"id":"MDU6SXNzdWU3ODg3MDcxMTg=","url":"https://github.com/xiaotiandada/blog/issues/9","title":"vue个人小项目总结","updatedAt":"2021-01-19T04:58:16Z","createdAt":"2021-01-19T04:58:16Z","body":"2018-06-22 13:14:50\r\n\r\n## 简介\r\n\r\n自己写了一个vue小项目总结总结(为了节省篇幅和大家阅读的时间直接进入正题 认真脸！)\r\n\r\n---\r\n\r\n> 项目详情可以查看的我Github仓库[地址](https://github.com/xiaotiandada/My-music)\r\n\r\n> [项目预览地址](http://123.207.60.132:8081/)\r\n\r\n- 用户登录帐号密码都是11\r\n- 后台管理登录也是11 \r\n- (其实还有别的帐号密码,如果您有心情可以查看api自己用Postman注册,用户注册自己可以直接在页面上注册)\r\n\r\n> github描述文档写了使用了写技术栈 和 界面截图\r\n\r\n<!-- more -->\r\n\r\n## 功能总结\r\n\r\n> ### 前端api调用\r\n\r\n``` bash\r\n# api\r\nimport axios from 'axios'\r\nimport store from '@/store/store'\r\n\r\nexport default () => {\r\n  return axios.create({\r\n    baseURL: `http://123.207.60.132:8081/`,\r\n    headers: {\r\n      Authorization: `Bearer ${store.state.token}`\r\n    }\r\n  })\r\n}\r\n\r\nimport Api from '@/services/Api'\r\n\r\nexport default {\r\n  userLogin(credentials) {\r\n    return Api().post('/userLogin', credentials)\r\n  }\r\n}\r\n\r\n# music api\r\n\r\nimport axios from 'axios'\r\nexport default () => {\r\n  return axios.create({\r\n    baseURL: `http://123.207.60.132:3000/`\r\n  })\r\n}\r\n\r\nimport Api from '@/services/musicApi'\r\n\r\nexport default {\r\n  getTopList() {\r\n    return Api().get('/top/list?idx=3')\r\n  }\r\n}\r\n```\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/services)\r\n\r\n> ### 前端vuex状态管理\r\n\r\n``` bash\r\nimport Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport createPersistedState from 'vuex-persistedstate'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  strict: true,\r\n  plugins: [createPersistedState()],\r\n  state: {\r\n    token: null,\r\n    user: null,\r\n    isUserLoggedIn: false\r\n  },\r\n\r\n  mutations: {\r\n    setToken(state, token) {\r\n      state.token = token\r\n      state.isUserLoggedIn = !!(token)\r\n    },\r\n    setUser(state, user) {\r\n      state.user = user\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    setToken({ commit }, token) {\r\n      commit('setToken', token)\r\n    },\r\n    setUser({ commit }, user) {\r\n      commit('setUser', user)\r\n    }\r\n  }\r\n})\r\n```\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/store)\r\n\r\n> ### 前端界面\r\n\r\n``` bash\r\n# 组件使用\r\n<v-slider :sliderImg=\"sliderImg\"></v-slider>\r\n\r\n# 组件引入\r\n import VSlider from './Slider/Index'\r\n\r\nexport default {\r\n    # 声明组件\r\n    components: {\r\n        VSlider\r\n    },\r\n    data() {\r\n        return {\r\n            sliderImg: [\r\n                {\r\n                src: 'item1'\r\n                },\r\n                {\r\n                src: 'item2'\r\n                },\r\n                {\r\n                src: 'item3'\r\n                },\r\n                {\r\n                src: 'item4'\r\n                }\r\n            ]\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n- 前端页面基本都是按照这样的方式写的 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/views)\r\n\r\n> ### 后台界面\r\n\r\n- 后台界面除了按照前端页面写的以外还用了[vue-element-admin](https://github.com/PanJiaChen/vue-element-admin)后台界面的写法\r\n\r\n- 其中侧边栏是根据 router.js 配置的路由并且根据权限动态生成的，这样就省去了写一遍路由还要手动再写一次侧边栏这种麻烦事，但也遇到了一个问题，路由可能会有多层嵌套，很多人反馈自己的侧边栏会有三级，甚至还有五级的。所以重构了一下侧边栏，使用了递归组件，这样不管你多少级，都能愉快的显示了。[文章地址](https://juejin.im/post/593121aa0ce4630057f70d35#heading-3) 复制的hhhh\r\n\r\n- 页面还用了icon[文章地址](https://juejin.im/post/59bb864b5188257e7a427c09)\r\n\r\n- 主页显示用了[v-charts图表组件](https://github.com/ElemeFE/v-charts) 这个基本的使用挺简单的看看文档就ok了 不用另外写文章了\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/views)\r\n\r\n\r\n> ### 前端router\r\n\r\n``` bash\r\nimport Vue from 'vue'\r\nimport Router from 'vue-router'\r\nVue.use(Router)\r\n\r\nexport const constantRouterMap = [\r\n  { path: '*', redirect: '/404', hidden: true }\r\n]\r\n\r\nexport default new Router({\r\n  mode: 'history', // require service support\r\n  scrollBehavior: () => ({ y: 0 }),\r\n  routes: constantRouterMap\r\n})\r\n```\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/router)\r\n\r\n\r\n> ### 后端基本服务\r\n\r\n``` bash\r\nconst express = require('express')\r\nconst app = express()\r\nconst config = require('./config/config')\r\n\r\nconst fs = require('fs')\r\nconst path = require('path')\r\nrequire('./router/index.js')(app)\r\napp.use(express.static(path.resolve(__dirname, './dist')))\r\n\r\napp.get('*', function(req, res) {\r\n    const html = fs.readFileSync(path.resolve(__dirname, './dist/index.html'), 'utf-8')\r\n    res.send(html)\r\n})\r\n\r\napp.listen(config.port, function () {\r\n  console.log(`server run ${config.port} port`)\r\n})\r\n```\r\n\r\n- 后台主要使用nodejs express mongodb提供服务\r\n\r\n- 功能 用户登录注册\r\n\r\n- 功能 管理员登录注册\r\n\r\n- 用户的密码加密\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/blob/master/service/app.js)\r\n\r\n\r\n\r\n> ### 后端model\r\n\r\n``` bash\r\nconst mongoose = require('mongoose')\r\nconst Schema = mongoose.Schema\r\nconst bcrypt =require('bcryptjs')  // 密码加密\r\nlet SALT_WORK_FACTOR = 10\r\nconst config = require('../config/config')\r\nmongoose.connect(config.database)\r\n\r\n\r\nvar UserSchema = new Schema({\r\n  userName: {\r\n    type: String,\r\n    unique: true,  // 不重复\r\n    require: true  // 不为空\r\n  }\r\n})\r\n\r\n// 在保存密码之前用bcrypt加密保证密码只有用户知道\r\nUserSchema.pre('save', function (next){\r\n  // 保存this指向\r\n  let _this = this\r\n  // 判断是否为最新\r\n  if(!_this.isModified('password')){\r\n      return next()\r\n  }\r\n  // 加密EMMM 产生一个salt\r\n  bcrypt.genSalt(SALT_WORK_FACTOR, function (err, salt){\r\n    if(err){\r\n      return next(err)\r\n    }\r\n\r\n    // 结合salt 生成 hash\r\n    bcrypt.hash(_this.password, salt, function (err, hash) {\r\n      if(err){\r\n        return next(err)\r\n      }\r\n\r\n      // 用hash覆盖明文密码\r\n      _this.password = hash\r\n      next()\r\n    })\r\n  })\r\n})\r\n\r\n// 通过bcrypt的compare方法，对再次传入的密码和数据库中保存的加密后的密码进行比较，如果匹配，则登录成功 isMatch 为布尔值\r\n// mongoose 模型扩展 在 methods 对象上扩展\r\nUserSchema.methods.comparePassword = function (candidatePassword, cb) {\r\n  bcrypt.compare(candidatePassword, this.password, function (err, isMatch) {\r\n    if (err) {\r\n      return cb(err);\r\n    }\r\n\r\n    cb(null, isMatch);\r\n  });\r\n};\r\nmodule.exports = mongoose.model('User', UserSchema)\r\n```\r\n\r\n- 使用mongoose Schema定义数据模型\r\n\r\n- 通过bcrypt密码加密\r\n\r\n- 扩展方法 对密码加密\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/service/model)\r\n\r\n\r\n\r\n\r\n> ### 后端controllers\r\n\r\n``` bash\r\nconst User = require('../model/User')\r\nconst AdminUser = require('../model/AdminUser')\r\nconst jwt = require('jsonwebtoken')\r\nconst config = require('../config/config')\r\n\r\n\r\n// token\r\nfunction jwtSignUser(user) {\r\n  const ONE_WEEK = 60 * 60 * 24 * 7\r\n  return jwt.sign(user, config.authentication.jwtSecret, {\r\n    expiresIn: ONE_WEEK\r\n  })\r\n}\r\n\r\nmodule.exports = {\r\n  async userLogin(req, res) {\r\n    try {\r\n      await User.findOne({\r\n        userName: req.body.userName\r\n      }, function (err, user) {\r\n        .........\r\n      })\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n- 登录成功返回\r\n\r\n```bash\r\nsuccess: true,\r\nmessage: '登录成功',\r\ntoken: 'token值'\r\n```\r\n\r\n- 登录成功返回\r\n\r\n```bash\r\nsuccess: false,\r\nmessage: '登录失败', (或其他信息详情看文件)\r\ntoken: ''\r\n```\r\n\r\n- 对用户的密码判断\r\n\r\n```bash\r\n user.comparePassword(req.body.pass, (err, isMatch) => {\r\n     ...\r\n }\r\n```\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/service/controllers)\r\n\r\n---\r\n\r\n> ### 总结\r\n\r\n- 通过上面的练习学习了更多新知识\r\n\r\n- 更加理解前后端的交互\r\n\r\n- 加强了技术掌握程度\r\n\r\n- 还有很多不符合现在开发的规范\r\n\r\n- 代码不够精简干练\r\n\r\n- 基础知识掌握不牢固\r\n\r\n- 设计审美水平需要提升\r\n\r\n- ......\r\n\r\n大概就是这么多吧, 项目还有很多部规范的地方以后会慢慢改正, 虽然是个人里练习的项目, 自己还是话了很多时间和心血\r\n\r\n最后 最后 最后 说一个厚脸皮的话 小哥哥小姐姐如果觉得不错的话可以给小生点一个 [Star](https://github.com/xiaotiandada/My-music) 嘛 谢谢哇QAQ~~\r\n\r\n自己马上就要实习了 有大佬看上带走的吗！QAQ","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&v=4"},"html":"<p>2018-06-22 13:14:50</p>\n<h2 id=\"简介\">简介</h2>\n<p>自己写了一个vue小项目总结总结(为了节省篇幅和大家阅读的时间直接进入正题 认真脸！)</p>\n<hr>\n<blockquote>\n<p>项目详情可以查看的我Github仓库<a href=\"https://github.com/xiaotiandada/My-music\">地址</a></p>\n</blockquote>\n<blockquote>\n<p><a href=\"http://123.207.60.132:8081/\">项目预览地址</a></p>\n</blockquote>\n<ul>\n<li>用户登录帐号密码都是11</li>\n<li>后台管理登录也是11 </li>\n<li>(其实还有别的帐号密码,如果您有心情可以查看api自己用Postman注册,用户注册自己可以直接在页面上注册)</li>\n</ul>\n<blockquote>\n<p>github描述文档写了使用了写技术栈 和 界面截图</p>\n</blockquote>\n<!-- more -->\n\n<h2 id=\"功能总结\">功能总结</h2>\n<blockquote>\n<h3 id=\"前端api调用\">前端api调用</h3>\n</blockquote>\n<pre class=\"language-bash\"><code class=\"language-bash\"># api\nimport axios from 'axios'\nimport store from '@/store/store'\n\nexport default () => {\n  return axios.create({\n    baseURL: `http://123.207.60.132:8081/`,\n    headers: {\n      Authorization: `Bearer ${store.state.token}`\n    }\n  })\n}\n\nimport Api from '@/services/Api'\n\nexport default {\n  userLogin(credentials) {\n    return Api().post('/userLogin', credentials)\n  }\n}\n\n# music api\n\nimport axios from 'axios'\nexport default () => {\n  return axios.create({\n    baseURL: `http://123.207.60.132:3000/`\n  })\n}\n\nimport Api from '@/services/musicApi'\n\nexport default {\n  getTopList() {\n    return Api().get('/top/list?idx=3')\n  }\n}</code></pre><ul>\n<li>更多内容<a href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/services\">地址</a></li>\n</ul>\n<blockquote>\n<h3 id=\"前端vuex状态管理\">前端vuex状态管理</h3>\n</blockquote>\n<pre class=\"language-bash\"><code class=\"language-bash\">import Vue from 'vue'\nimport Vuex from 'vuex'\nimport createPersistedState from 'vuex-persistedstate'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  strict: true,\n  plugins: [createPersistedState()],\n  state: {\n    token: null,\n    user: null,\n    isUserLoggedIn: false\n  },\n\n  mutations: {\n    setToken(state, token) {\n      state.token = token\n      state.isUserLoggedIn = !!(token)\n    },\n    setUser(state, user) {\n      state.user = user\n    }\n  },\n\n  actions: {\n    setToken({ commit }, token) {\n      commit('setToken', token)\n    },\n    setUser({ commit }, user) {\n      commit('setUser', user)\n    }\n  }\n})</code></pre><ul>\n<li>更多内容<a href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/store\">地址</a></li>\n</ul>\n<blockquote>\n<h3 id=\"前端界面\">前端界面</h3>\n</blockquote>\n<pre class=\"language-bash\"><code class=\"language-bash\"># 组件使用\n<v-slider :sliderImg=\"sliderImg\"></v-slider>\n\n# 组件引入\n import VSlider from './Slider/Index'\n\nexport default {\n    # 声明组件\n    components: {\n        VSlider\n    },\n    data() {\n        return {\n            sliderImg: [\n                {\n                src: 'item1'\n                },\n                {\n                src: 'item2'\n                },\n                {\n                src: 'item3'\n                },\n                {\n                src: 'item4'\n                }\n            ]\n        }\n    }\n}</code></pre><ul>\n<li>前端页面基本都是按照这样的方式写的 更多内容<a href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/views\">地址</a></li>\n</ul>\n<blockquote>\n<h3 id=\"后台界面\">后台界面</h3>\n</blockquote>\n<ul>\n<li><p>后台界面除了按照前端页面写的以外还用了<a href=\"https://github.com/PanJiaChen/vue-element-admin\">vue-element-admin</a>后台界面的写法</p>\n</li>\n<li><p>其中侧边栏是根据 router.js 配置的路由并且根据权限动态生成的，这样就省去了写一遍路由还要手动再写一次侧边栏这种麻烦事，但也遇到了一个问题，路由可能会有多层嵌套，很多人反馈自己的侧边栏会有三级，甚至还有五级的。所以重构了一下侧边栏，使用了递归组件，这样不管你多少级，都能愉快的显示了。<a href=\"https://juejin.im/post/593121aa0ce4630057f70d35#heading-3\">文章地址</a> 复制的hhhh</p>\n</li>\n<li><p>页面还用了icon<a href=\"https://juejin.im/post/59bb864b5188257e7a427c09\">文章地址</a></p>\n</li>\n<li><p>主页显示用了<a href=\"https://github.com/ElemeFE/v-charts\">v-charts图表组件</a> 这个基本的使用挺简单的看看文档就ok了 不用另外写文章了</p>\n</li>\n<li><p>更多内容<a href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/views\">地址</a></p>\n</li>\n</ul>\n<blockquote>\n<h3 id=\"前端router\">前端router</h3>\n</blockquote>\n<pre class=\"language-bash\"><code class=\"language-bash\">import Vue from 'vue'\nimport Router from 'vue-router'\nVue.use(Router)\n\nexport const constantRouterMap = [\n  { path: '*', redirect: '/404', hidden: true }\n]\n\nexport default new Router({\n  mode: 'history', // require service support\n  scrollBehavior: () => ({ y: 0 }),\n  routes: constantRouterMap\n})</code></pre><ul>\n<li>更多内容<a href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/router\">地址</a></li>\n</ul>\n<blockquote>\n<h3 id=\"后端基本服务\">后端基本服务</h3>\n</blockquote>\n<pre class=\"language-bash\"><code class=\"language-bash\">const express = require('express')\nconst app = express()\nconst config = require('./config/config')\n\nconst fs = require('fs')\nconst path = require('path')\nrequire('./router/index.js')(app)\napp.use(express.static(path.resolve(__dirname, './dist')))\n\napp.get('*', function(req, res) {\n    const html = fs.readFileSync(path.resolve(__dirname, './dist/index.html'), 'utf-8')\n    res.send(html)\n})\n\napp.listen(config.port, function () {\n  console.log(`server run ${config.port} port`)\n})</code></pre><ul>\n<li><p>后台主要使用nodejs express mongodb提供服务</p>\n</li>\n<li><p>功能 用户登录注册</p>\n</li>\n<li><p>功能 管理员登录注册</p>\n</li>\n<li><p>用户的密码加密</p>\n</li>\n<li><p>更多内容<a href=\"https://github.com/xiaotiandada/My-music/blob/master/service/app.js\">地址</a></p>\n</li>\n</ul>\n<blockquote>\n<h3 id=\"后端model\">后端model</h3>\n</blockquote>\n<pre class=\"language-bash\"><code class=\"language-bash\">const mongoose = require('mongoose')\nconst Schema = mongoose.Schema\nconst bcrypt =require('bcryptjs')  // 密码加密\nlet SALT_WORK_FACTOR = 10\nconst config = require('../config/config')\nmongoose.connect(config.database)\n\n\nvar UserSchema = new Schema({\n  userName: {\n    type: String,\n    unique: true,  // 不重复\n    require: true  // 不为空\n  }\n})\n\n// 在保存密码之前用bcrypt加密保证密码只有用户知道\nUserSchema.pre('save', function (next){\n  // 保存this指向\n  let _this = this\n  // 判断是否为最新\n  if(!_this.isModified('password')){\n      return next()\n  }\n  // 加密EMMM 产生一个salt\n  bcrypt.genSalt(SALT_WORK_FACTOR, function (err, salt){\n    if(err){\n      return next(err)\n    }\n\n    // 结合salt 生成 hash\n    bcrypt.hash(_this.password, salt, function (err, hash) {\n      if(err){\n        return next(err)\n      }\n\n      // 用hash覆盖明文密码\n      _this.password = hash\n      next()\n    })\n  })\n})\n\n// 通过bcrypt的compare方法，对再次传入的密码和数据库中保存的加密后的密码进行比较，如果匹配，则登录成功 isMatch 为布尔值\n// mongoose 模型扩展 在 methods 对象上扩展\nUserSchema.methods.comparePassword = function (candidatePassword, cb) {\n  bcrypt.compare(candidatePassword, this.password, function (err, isMatch) {\n    if (err) {\n      return cb(err);\n    }\n\n    cb(null, isMatch);\n  });\n};\nmodule.exports = mongoose.model('User', UserSchema)</code></pre><ul>\n<li><p>使用mongoose Schema定义数据模型</p>\n</li>\n<li><p>通过bcrypt密码加密</p>\n</li>\n<li><p>扩展方法 对密码加密</p>\n</li>\n<li><p>更多内容<a href=\"https://github.com/xiaotiandada/My-music/tree/master/service/model\">地址</a></p>\n</li>\n</ul>\n<blockquote>\n<h3 id=\"后端controllers\">后端controllers</h3>\n</blockquote>\n<pre class=\"language-bash\"><code class=\"language-bash\">const User = require('../model/User')\nconst AdminUser = require('../model/AdminUser')\nconst jwt = require('jsonwebtoken')\nconst config = require('../config/config')\n\n\n// token\nfunction jwtSignUser(user) {\n  const ONE_WEEK = 60 * 60 * 24 * 7\n  return jwt.sign(user, config.authentication.jwtSecret, {\n    expiresIn: ONE_WEEK\n  })\n}\n\nmodule.exports = {\n  async userLogin(req, res) {\n    try {\n      await User.findOne({\n        userName: req.body.userName\n      }, function (err, user) {\n        .........\n      })\n    }\n  }\n}</code></pre><ul>\n<li>登录成功返回</li>\n</ul>\n<pre class=\"language-bash\"><code class=\"language-bash\">success: true,\nmessage: '登录成功',\ntoken: 'token值'</code></pre><ul>\n<li>登录成功返回</li>\n</ul>\n<pre class=\"language-bash\"><code class=\"language-bash\">success: false,\nmessage: '登录失败', (或其他信息详情看文件)\ntoken: ''</code></pre><ul>\n<li>对用户的密码判断</li>\n</ul>\n<pre class=\"language-bash\"><code class=\"language-bash\"> user.comparePassword(req.body.pass, (err, isMatch) => {\n     ...\n }</code></pre><ul>\n<li>更多内容<a href=\"https://github.com/xiaotiandada/My-music/tree/master/service/controllers\">地址</a></li>\n</ul>\n<hr>\n<blockquote>\n<h3 id=\"总结\">总结</h3>\n</blockquote>\n<ul>\n<li><p>通过上面的练习学习了更多新知识</p>\n</li>\n<li><p>更加理解前后端的交互</p>\n</li>\n<li><p>加强了技术掌握程度</p>\n</li>\n<li><p>还有很多不符合现在开发的规范</p>\n</li>\n<li><p>代码不够精简干练</p>\n</li>\n<li><p>基础知识掌握不牢固</p>\n</li>\n<li><p>设计审美水平需要提升</p>\n</li>\n<li><p>......</p>\n</li>\n</ul>\n<p>大概就是这么多吧, 项目还有很多部规范的地方以后会慢慢改正, 虽然是个人里练习的项目, 自己还是话了很多时间和心血</p>\n<p>最后 最后 最后 说一个厚脸皮的话 小哥哥小姐姐如果觉得不错的话可以给小生点一个 <a href=\"https://github.com/xiaotiandada/My-music\">Star</a> 嘛 谢谢哇QAQ~~</p>\n<p>自己马上就要实习了 有大佬看上带走的吗！QAQ</p>\n","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true}