{"pageProps":{"post":{"id":"MDU6SXNzdWU3ODg3NDg3MTQ=","url":"https://github.com/xiaotiandada/blog/issues/44","title":"è®¾è®¡æ¨¡å¼","updatedAt":"2021-01-19T06:34:06Z","createdAt":"2021-01-19T06:34:06Z","body":"2020-02-26 23:57:00\r\n\r\nç¬¬ä¸€æ¬¡å­¦ä¹ è®¾è®¡æ¨¡å¼ [repo æ‰€æœ‰çš„ä»£ç éƒ½åœ¨è¿™å„¿å•¦!](https://github.com/xiaotiandada/javaScript-design-patterns)\r\n\r\n<!-- more --> \r\n\r\n## å·¥å‚æ¨¡å¼\r\n\r\n**ç›¸å…³èµ„æ–™:**\r\n\r\n[JavaScriptè®¾è®¡æ¨¡å¼æ€»ç»“](https://juejin.im/post/5c984610e51d45656702a785)\r\n\r\n[jsè®¾è®¡æ¨¡å¼-å·¥å‚æ¨¡å¼](https://fanerge.github.io/2017/jsè®¾è®¡æ¨¡å¼-å·¥å‚æ¨¡å¼.html)\r\n\r\n**åˆ›å»ºä¸‰ä¸ªè§’è‰²ç„¶åéšæœºå†³æ–—âš”ï¸**\r\n\r\n```js\r\nconsole.log('å·¥å‚æ¨¡å¼');\r\n\r\n// æ”»å‡»åŠ›1-100\r\nconst attackPower = () => Math.floor(Math.random() * 100 + 1)\r\n\r\n// æˆ˜å£«\r\nclass Warrior {\r\n  constructor() {\r\n    this.occupation = 'æˆ˜å£«'\r\n    this.skill = 'å•ä¸€ç‹‚ç '\r\n    this.blood = 100\r\n    this.hit = attackPower()\r\n    // other\r\n  }\r\n}\r\n\r\n// æ³•å¸ˆ\r\nclass Mage {\r\n  constructor() {\r\n    this.occupation = 'æ³•å¸ˆ'\r\n    this.skill = 'é›†ä½“å†°å†»'\r\n    this.blood = 100\r\n    this.hit = attackPower()\r\n  }\r\n}\r\n\r\n// å°„æ‰‹\r\nclass Archer {\r\n  constructor() {\r\n    this.occupation = 'å°„æ‰‹'\r\n    this.skill = 'å…¨å±€è½°ç‚¸'\r\n    this.blood = 100\r\n    this.hit = attackPower()\r\n  }\r\n}\r\n\r\n// å·¥å‚å¯¹è±¡\r\n// classã€functionã€object\r\nclass RoleFactory {\r\n  constructor() {}\r\n  createRole(role) {\r\n    let roles = {\r\n      Warrior: Warrior,\r\n      Mage: Mage,\r\n      Archer: Archer\r\n    }\r\n\r\n    const Character = roles[role]\r\n    return role ? new Character() : new Warrior()\r\n\r\n  }\r\n}\r\n\r\n// åˆ›å»ºè§’è‰²\r\nlet roleFactory = new RoleFactory\r\nlet warrior = roleFactory.createRole('Warrior')\r\nlet mage = roleFactory.createRole('Mage')\r\nlet archer = roleFactory.createRole('Archer')\r\n\r\nconsole.log('warrior:', warrior);\r\nconsole.log('mage:', mage);\r\nconsole.log('archer:', archer);\r\n\r\nconsole.log('----------')\r\n\r\n// éšæœºè§’è‰²\r\nconst randomRole = (data, number) => {\r\n  if (!data || !data.length || !number) return\r\n\r\n  let randomRole = []\r\n\r\n  for (let i = 0; i < data.length; i++) {\r\n    let sub = Math.floor(Math.random() * data.length )\r\n    randomRole.push(...data.splice(sub, 1))\r\n  }\r\n  return randomRole\r\n}\r\n\r\n// æˆ˜æ–—\r\nconst duel = roles => {\r\n  // æœ€å¼ºè§’è‰²\r\n  let maxRole = null\r\n  // æœ€é«˜æ”»å‡»åŠ›\r\n  let maxHit = -1\r\n  roles.map(item => {\r\n    console.log(item)\r\n    // å¦‚æœæ”»å‡»åŠ›å¤§äºæœ€å¤§æ”»å‡»åŠ›\r\n    if (item.hit > maxHit) {\r\n      // è®¾ç½®å½“å‰è§’è‰²\r\n      maxRole = item\r\n      // æ”»å‡»åŠ›ä¹Ÿæ›¿æ¢\r\n      maxHit = item.hit\r\n    } else if (item.hit === maxHit) {\r\n      // æ¸…ç©º\r\n      maxRole = null\r\n      maxHit = -1\r\n    }\r\n\r\n  })\r\n\r\n  return maxRole\r\n}\r\n\r\nconst compose = (...fn) => fn.reduce((a, b) => (...args) => a(b(...args)))\r\n\r\nlet winner = compose(duel, randomRole)([warrior, mage, archer], 2)\r\n\r\nif (winner) {\r\n  console.log(`èƒœåˆ©è€…æ˜¯: ${winner.occupation}, ä»–çš„æŠ€èƒ½æ˜¯: ${winner.skill}, æ”»å‡»åŠ›: ${winner.hit}`)\r\n} else {\r\n  console.log(`è¿™æ˜¯å¹³å±€`)\r\n}\r\n```\r\n\r\n**è¾“å‡º**\r\n\r\n```js\r\nå·¥å‚æ¨¡å¼\r\nwarrior: Warrior { occupation: 'æˆ˜å£«', skill: 'å•ä¸€ç‹‚ç ', blood: 100, hit: 1 }\r\nmage: Mage { occupation: 'æ³•å¸ˆ', skill: 'é›†ä½“å†°å†»', blood: 100, hit: 39 }\r\narcher: Archer { occupation: 'å°„æ‰‹', skill: 'å…¨å±€è½°ç‚¸', blood: 100, hit: 33 }\r\n----------\r\nWarrior { occupation: 'æˆ˜å£«', skill: 'å•ä¸€ç‹‚ç ', blood: 100, hit: 1 }\r\nMage { occupation: 'æ³•å¸ˆ', skill: 'é›†ä½“å†°å†»', blood: 100, hit: 39 }\r\nèƒœåˆ©è€…æ˜¯: æ³•å¸ˆ, ä»–çš„æŠ€èƒ½æ˜¯: é›†ä½“å†°å†», æ”»å‡»åŠ›: 39\r\n```\r\n\r\n\r\n\r\nå› ä¸º**ç¬¬ä¸€æ¬¡**å­¦ä¹  è¿˜ä¸å¤ªçŸ¥é“å…·ä½“çš„**ä¼˜ç‚¹å’Œå¥½å¤„** ä¹Ÿæ²¡åŠæ³•**å£å–·** æ‰€ä»¥æš‚æ—¶ç•™ä¸ªå‘ç»™è‡ªå·± ä¸‹æ¬¡æ›´åŠ äº†è§£ä¹‹åå›æ¥**å¡«å‘** ğŸ‘\r\n\r\n## å•ä¾‹æ¨¡å¼\r\n\r\nhttps://juejin.im/post/5c984610e51d45656702a785\r\n\r\n[https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html](https://fanerge.github.io/2017/jsè®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼.html)\r\n\r\n> å®šä¹‰ï¼šå•ä¾‹å°±æ˜¯ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå®ç°çš„æ–¹æ³•ä¸€èˆ¬æ˜¯å…ˆåˆ¤æ–­å®ä¾‹å­˜åœ¨ä¸å¦ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥è¿”å›ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºäº†å†è¿”å›ï¼Œè¿™å°±ç¡®ä¿äº†ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚ -- å¤åˆ¶çš„\r\n\r\næˆ‘çš„ç†è§£ä¸ºä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹, å¹¶ä¸”å…¨å±€è®¿é—®éƒ½æ˜¯ç›¸åŒçš„å®ä¾‹\r\n\r\nå»ºè®®å…ˆçœ‹å®Œä¸Šé¢æ–‡ç« çš„å•ä¾‹æ¨¡å—, æˆ‘è§‰å¾—ä»–ä»¬æ€»ç»“å¾—æ¯”æˆ‘è¦å¥½\r\n\r\n```javascript\r\n// ç™»å½•æ¡†\r\n/**\r\n* æˆ‘è¿™é‡Œå•å‡»æŒ‰é’®ğŸ”˜æ˜¾ç¤ºç™»å½•æ¡†, å¹¶ä¸”è‡ªèº«è®¾ç½®å…³é—­äº‹ä»¶ åªæ˜¯éšè—\r\n* åœ¨ä¸‹ä¸€æ¬¡æ˜¾ç¤ºç™»å½•æ¡†çš„æ—¶å€™ä¸ä¼šåˆ›å»º è€Œæ˜¯ç›´æ¥å±•ç¤º å› ä¸ºå•ä¾‹æ¨¡å¼\r\n* ç™»å½•æ¡†å·²ç»åˆ›å»ºäº† æ‰€ä»¥ç›´æ¥è¿”å›äº†å¯¹è±¡ ç„¶åå±•ç¤º\r\n*/\r\nconst loginBox = (function(){\r\n  let div\r\n  return function() {\r\n    if (!div) {\r\n      div = document.createElement('div')\r\n      div.onclick = function() {\r\n        div.style.display = 'none'\r\n      }\r\n      div.innerHTML = 'ç™»å½• hhhh (å•å‡»æˆ‘éšè—)'\r\n      document.body.appendChild(div)\r\n    }\r\n    return div\r\n  }\r\n})()\r\n\r\ndocument.querySelector('#btn').onclick = function() {\r\n  let loginbox = loginBox()\r\n  loginbox.style.display = 'block'\r\n}\r\n```\r\n\r\nè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºèŒƒ... ğŸ‘\r\n\r\n## è£…é¥°å™¨æ¨¡å¼\r\n\r\nhttps://juejin.im/post/5c984610e51d45656702a785\r\n\r\n> åœ¨ä¸æ”¹å˜å¯¹è±¡è‡ªèº«çš„åŸºç¡€ä¸Šï¼ŒåŠ¨æ€çš„ç»™æŸä¸ªå¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶æ¥å£\r\n\r\nhttps://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F.html\r\n\r\n> å®šä¹‰ï¼šè£…é¥°è€…(decorator)æ¨¡å¼èƒ½å¤Ÿåœ¨ä¸æ”¹å˜å¯¹è±¡è‡ªèº«çš„åŸºç¡€ä¸Šï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ç»™å¯¹è±¡åŠ¨æ€çš„æ·»åŠ èŒè´£ã€‚\r\n>\r\n> è¿™æ ·ç»™å¯¹è±¡åŠ¨æ€çš„å¢åŠ èŒè´£çš„æ–¹å¼å°±æ²¡æœ‰æ”¹å˜å¯¹è±¡è‡ªèº«ï¼Œä¸€ä¸ªå¯¹è±¡æ”¾å…¥å¦ä¸€ä¸ªå¯¹è±¡å°±å½¢æˆäº†ä¸€æ¡è£…é¥°é“¾ï¼ˆä¸€ä¸ªèšåˆå¯¹è±¡ï¼‰ï¼Œ è€Œä¸Šé¢çš„shotå’Œtrackä¹Ÿå°±æ˜¯è£…é¥°è€…ã€è£…é¥°å‡½æ•° ï¼Œå½“å‡½æ•°æ‰§è¡Œæ—¶ï¼Œä¼šæŠŠè¯·æ±‚è½¬ç»™é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡ã€‚\r\n\r\n\r\n\r\n```javascript\r\n{\r\n  class Plane {\r\n    fire() {\r\n      console.log('å‘å°„æ™®é€šå­å¼¹')\r\n    }\r\n  }\r\n\r\n  class Missile {\r\n    plane: any\r\n    constructor(plane) {\r\n      this.plane = plane\r\n    }\r\n\r\n    fire () {\r\n      this.plane.fire()\r\n      console.log('å‘å°„å¯¼å¼¹')\r\n    }\r\n  }\r\n\r\n  let plane = new Plane()\r\n  plane = new Missile(plane)\r\n  console.log(plane.fire())\r\n}\r\n```\r\n\r\n```javascript\r\n// åˆ©ç”¨AOPç»™å‡½æ•°åŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼Œå³Functionçš„afteræˆ–è€…before\r\n{\r\n  let func = function() {\r\n    console.log('2')\r\n  }\r\n\r\n  Function.prototype.before = function(fn) {\r\n    const _this = this\r\n    return function() {\r\n      fn.apply(this, arguments)\r\n      return _this.apply(this, arguments)\r\n    }\r\n  }\r\n  Function.prototype.after = function(fn) {\r\n    const _this = this\r\n    return function() {\r\n      const ret = _this.apply(this, arguments)\r\n      fn.apply(this, arguments)\r\n      return ret\r\n    }\r\n  }\r\n  \r\n  func = func.before(function() {\r\n    console.log(1)\r\n  }).after(() => {\r\n    console.log(3)\r\n  });\r\n  \r\n  func()\r\n}\r\n```\r\n\r\n```javascript\r\n\r\n{\r\n  // åˆ©ç”¨è£…é¥°å™¨\r\n  function func1() {\r\n    console.log(1)\r\n  }\r\n  function func2() {\r\n    console.log(2)\r\n  }\r\n  class Func {\r\n    @func2\r\n    @func1\r\n    init() {\r\n      console.log(3)\r\n    }\r\n  }\r\n\r\n  let func = new Func()\r\n  func.init()\r\n\r\n}\r\n```\r\n\r\n```javascript\r\n{\r\n  // å°è£…æˆå‡½æ•°\r\n  const before = function (fn, before) {\r\n    return function() {\r\n      before.apply(this, arguments)\r\n      return fn.apply(this, arguments)\r\n    }\r\n  }\r\n\r\n  const after = function(fn, after) {\r\n    return function() {\r\n      const ret = fn.apply(this, arguments)\r\n      after.apply(this, arguments)\r\n      return ret\r\n    }\r\n  }\r\n\r\n  function func(x) {\r\n    console.log(x)\r\n  }\r\n\r\n  function func1(2) {\r\n    console.log(1)\r\n  }\r\n\r\n\r\n  function func2() {\r\n    console.log(2)\r\n  }\r\n\r\n\r\n  before(func1, func2)()\r\n  after(func1, func2)()\r\n}\r\n```\r\n\r\næ ¸å¿ƒå°±åœ¨``after`` ``before`` äº†\r\n\r\n ```javascript\r\n{\r\n  // ...\r\n  function handwashing() {\r\n    console.log('æ´—æ‰‹')\r\n  }\r\n\r\n  function drink() {\r\n    console.log('å–æ°´')\r\n  }\r\n\r\n  function eat() {\r\n    console.log('åƒé¥­')\r\n  }\r\n\r\n\r\n  before(eat, handwashing)()\r\n  after(eat, drink)()\r\n  \r\n  // åƒé¥­å‰æ´—æ‰‹\r\n  // åƒé¥­åå–æ°´\r\n}\r\n ```\r\n\r\næ¯”è¾ƒåŸºç¡€çš„æ¼”ç¤ºäº† :)\r\n\r\n## ä»£ç†æ¨¡å¼\r\n\r\n> ä¸ºä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç”¨å“æˆ–å ä½ç¬¦ï¼Œä»¥ä¾¿æ§åˆ¶å¯¹å®ƒçš„è®¿é—®ã€‚\r\n\r\n[https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.html](https://fanerge.github.io/2017/jsè®¾è®¡æ¨¡å¼-ä»£ç†æ¨¡å¼.html)\r\n\r\n```javascript\r\n// ç¼“å­˜ä»£ç†\r\nconst mult = function() {\r\n  let a = 1\r\n\r\n  for (let i = 0; i < arguments.length; i++) {\r\n    a *= arguments[i]\r\n  }\r\n\r\n  return a\r\n}\r\n\r\n\r\nconst plus = function() {\r\n  let a = 0\r\n\r\n  for (let i = 0; i < arguments.length; i++) {\r\n    a += arguments[i]\r\n  }\r\n\r\n  return a\r\n}\r\n\r\n\r\nconst createProxyFactory = function(fn) {\r\n  let cache = {} // ä¿å­˜è®¡ç®—ç»“æœ\r\n  return function() {\r\n    let args = Array.from(arguments).join(',')\r\n    if (args in cache) {\r\n      return cache[args]\r\n    } else {\r\n      return cache[args] = fn.apply(this, arguments)\r\n    }\r\n  }\r\n}\r\n\r\n\r\nlet proxyMult = createProxyFactory(mult)\r\nlet proxyPlus = createProxyFactory(plus)\r\n\r\nconsole.log(proxyMult(1,2,3,4))\r\nconsole.log(proxyPlus(1,2,3,4))\r\n```\r\n\r\n> è¿™é‡Œæ¯æ¬¡è¿›è¡ŒåŒç±»çš„è®¡ç®—æ—¶ï¼ˆä¹˜æ³•å’ŒåŠ æ³•ä¸¤ç±»ï¼‰ï¼Œå…ˆåˆ¤æ–­ç¼“å­˜å¯¹è±¡cacheä¸­æ˜¯å¦å­˜åœ¨è¯¥å‚æ•°è¿æ¥æˆçš„å­—ç¬¦ä¸²ä½œä¸ºkeyçš„å±æ€§ã€‚\r\n> å¦‚æœæœ‰ï¼Œåˆ™ç›´æ¥ä»cacheä¸­è¯»å–ï¼Œå¦åˆ™å°±è¿›è¡Œè®¡ç®—å¹¶ä¿å­˜å…¶ç»“æœã€‚\r\n\r\n```javascript\r\n// è™šæ‹Ÿä»£ç†\r\n\r\nconst sleep = time => new Promise(resolve => setTimeout(resolve, time))\r\n\r\nconst imgFunc = (function() {\r\n  let imgNode = document.createElement('img')\r\n  document.body.appendChild(imgNode)\r\n\r\n  return {\r\n    setSrc(src) {\r\n      imgNode.src = src\r\n    }\r\n  }\r\n})()\r\n\r\n\r\nconst proxyImage = (function() {\r\n  const img = new Image()\r\n  img.onload = function() {\r\n    imgFunc.setSrc(this.src)\r\n  }\r\n\r\n  return {\r\n    setSrc(src) {\r\n      imgFunc.setSrc('https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=766379944,3048822499&fm=26&gp=0.jpg')\r\n      // æ¨¡æ‹ŸåŠ è½½æ—¶é—´\r\n      setTimeout(() => {\r\n        img.src = src\r\n      }, 2000)\r\n    }\r\n  }\r\n})()\r\n\r\nproxyImage.setSrc('http://t8.baidu.com/it/u=1484500186,1503043093&fm=79&app=86&f=JPEG?w=1280&h=853')\r\n```\r\n\r\n> å›¾ç‰‡æ‡’åŠ è½½çš„æ–¹å¼ï¼šå…ˆé€šè¿‡ä¸€å¼ loadingå›¾å ä½ï¼Œç„¶åé€šè¿‡å¼‚æ­¥çš„æ–¹å¼åŠ è½½å›¾ç‰‡ï¼Œç­‰å›¾ç‰‡åŠ è½½å¥½äº†å†æŠŠå®Œæˆçš„å›¾ç‰‡åŠ è½½åˆ°imgæ ‡ç­¾é‡Œé¢ã€‚\r\n\r\n## ç­–ç•¥æ¨¡å¼\r\n\r\n[https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.html](https://fanerge.github.io/2017/jsè®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼.html)\r\n\r\n>  å®šä¹‰ï¼šå®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚\r\n\r\n```javascript\r\nconst strategy = {\r\n  a(salary) {\r\n     return salary * 4\r\n  },\r\n  b(salary) {\r\n    return salary * 3\r\n  },\r\n  c(salary) {\r\n    return salary * 2\r\n  }\r\n}\r\n\r\n\r\nObject.freeze(strategy)\r\n\r\n\r\nconst returnMoney = (type, salary) => {\r\n  return strategy[type](salary)\r\n}\r\n\r\nconsole.log(returnMoney('a', 1000))\r\nconsole.log(returnMoney('b', 3000))\r\nconsole.log(returnMoney('c', 4000))\r\n```\r\n\r\nç®€å•çš„ä½¿ç”¨\r\n\r\nps: ç­–ç•¥æ¨¡å¼æŒ‡çš„æ˜¯å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå°†ä¸å˜çš„éƒ¨åˆ†å’Œå˜åŒ–çš„éƒ¨åˆ†éš”å¼€ï¼Œ\r\nå®é™…å°±æ˜¯å°†ç®—æ³•çš„ä½¿ç”¨å’Œå®ç°åˆ†ç¦»å‡ºæ¥ï¼›\r\n\r\n**è¡¨å•éªŒè¯**\r\n\r\næˆ‘åœ¨åŸæœ‰çš„codeä¸ŠåŠ äº†ä¸€ä¸ªæ–¹æ³•(é”™è¯¯å±•ç¤º, æ¯”è¾ƒåŸºç¡€æ‰€ä»¥å¾ˆå¤šåœ°æ–¹æ²¡æœ‰è€ƒè™‘åˆ°)\r\n\r\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"ç­–ç•¥æ¨¡å¼\" src=\"https://codepen.io/xiaotiandada/embed/xxZOBvG?height=265&theme-id=dark&default-tab=js,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\r\n  See the Pen <a href='https://codepen.io/xiaotiandada/pen/xxZOBvG'>ç­–ç•¥æ¨¡å¼</a> by xiaotiandada\r\n  (<a href='https://codepen.io/xiaotiandada'>@xiaotiandada</a>) on <a href='https://codepen.io'>CodePen</a>.\r\n</iframe>\r\n\r\n\r\n\r\n```html\r\n<!-- ... -->\r\n<style>\r\n  .error-msg {\r\n    color: red;\r\n    font-size: 14px;\r\n  }\r\n</style>\r\n\r\n<form id=\"registerForm\">\r\n  <div>\r\n    <label for=\"\">ç”¨æˆ·å</label>\r\n    <input type=\"text\" name=\"username\">\r\n  </div>\r\n  <div>\r\n    <label for=\"\">å¯†ç </label>\r\n    <input type=\"password\" name=\"password\">\r\n  </div>\r\n  <div>\r\n    <label for=\"\">æ‰‹æœºå·ç </label>\r\n    <input type=\"text\" name=\"phoneNumber\">\r\n  </div>\r\n  <button>submit</button>\r\n</form>\r\n<!-- ... -->\r\n```\r\n\r\n```js\r\n// è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ç»„ç­–ç•¥ç±»å°è£…å…·ä½“çš„éªŒè¯è§„åˆ™\r\nconst strategyForm = {\r\n\t// æ˜¯å¦ä¸ºç©º\r\n\tisNotEmpty (value, errorMsg){\r\n\t\tif (value === '') {\r\n\t\t\treturn errorMsg;\r\n\t\t}\r\n\t},\r\n\t// æœ€å°é•¿åº¦\r\n\tminLength (value, length, errorMsg){\r\n\t\tif (value.length < length) {\r\n\t\t\treturn errorMsg;\r\n\t\t}\r\n\t},\r\n\t// æ‰‹æœºå·ç æ ¼å¼\r\n\tmobileFormat (value,errorMsg){\r\n\t\tif(!/(^1[3|5|8][0-9]{9}$)/.test(value)) {\r\n\t\t\treturn errorMsg;\r\n\t\t}\r\n\t}\r\n};\r\nObject.freeze(strategyForm);\r\n\r\n\r\nconst Validator = function() {\r\n  this.cache = []\r\n}\r\n\r\nValidator.prototype.add = function(dom, rules) {\r\n\tlet slef = this\r\n\t// æ·»åŠ é”™è¯¯ä¿¡æ¯æç¤º\r\n\tconst addErrorMsg = (msg, dom, errorMsg) => {\r\n\t\t// å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯\r\n\t\tif (msg) {\r\n\t\t\t// å¦‚æœå·²ç»æœ‰äº†é”™è¯¯æç¤º\r\n\t\t\tlet errorMsgDom = dom.parentNode.querySelector('.error-msg')\r\n\t\t\tif (errorMsgDom) {\r\n\t\t\t\terrorMsgDom.innerHTML = errorMsg\r\n\t\t\t} else {\r\n\t\t\t\t// æ²¡æœ‰æç¤ºåˆ›å»º\r\n\t\t\t\tlet errorHtml = document.createElement('span')\r\n\t\t\t\terrorHtml.className = 'error-msg'\r\n\t\t\t\terrorHtml.innerHTML = errorMsg\r\n\t\t\t\tdom.parentNode.appendChild(errorHtml)\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t// æ²¡æœ‰é”™è¯¯æç¤º\r\n\t\t\t// å¦‚æœæœ‰é”™è¯¯æç¤ºä½†æ˜¯tagè¿˜å­˜åœ¨åˆ™æ¸…é™¤\r\n\t\t\tlet errorMsgDom = dom.parentNode.querySelector('.error-msg')\r\n\t\t\tif (errorMsgDom) {\r\n\t\t\t\terrorMsgDom.remove()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfor(let i = 0, rule; rule = rules[i++]; ) {\r\n\t\t(function(rule) {\r\n\t\t\tlet strategyArr = rule.strategy.split(':')\r\n\t\t\tlet errorMsg = rule.errorMsg\r\n\r\n\t\t\tslef.cache.push(function() {\r\n\t\t\t\tlet strategy = strategyArr.shift() // å–ç¬¬ä¸€ä¸ª ç­–ç•¥å\r\n\t\t\t\tstrategyArr.unshift(dom.value)\r\n\t\t\t\tstrategyArr.push(errorMsg)\r\n\t\t\t\tlet msg = strategyForm[strategy].apply(dom, strategyArr)\r\n\t\t\t\taddErrorMsg(msg, dom, errorMsg)\r\n\t\t\t\treturn msg\r\n\t\t\t})\r\n\r\n\t\t})(rule)\r\n\t}\r\n}\r\n\r\nValidator.prototype.start = function() {\r\n\tfor (let i = 0, validatorFunc; validatorFunc = this.cache[i++];) {\r\n\t\tlet msg = validatorFunc()\r\n\t\tif (msg) return msg\r\n\t}\r\n}\r\n\r\nlet registerForm = document.getElementById('registerForm')\r\n\r\nlet validateFunc = function() {\r\n\tlet validator = new Validator()\r\n\tvalidator.add(registerForm.username, [\r\n\t\t{ strategy: 'isNotEmpty', errorMsg: 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º' },\r\n\t\t{ strategy: 'minLength:6', errorMsg: 'ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°äº6ä½' }\r\n\t])\r\n\tvalidator.add(registerForm.password,[\r\n\t\t{strategy: 'minLength:6',errorMsg:'å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä½'},\r\n\t]);\r\n\tvalidator.add(registerForm.phoneNumber,[\r\n\t\t{strategy: 'mobileFormat',errorMsg:'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'},\r\n\t]);\r\n\tlet errorMsg = validator.start()\r\n\treturn errorMsg\r\n}\r\n\r\nregisterForm.onsubmit = function() {\r\n\tlet errorMsg = validateFunc()\r\n\tif (errorMsg) {\r\n\t\tconsole.log(errorMsg)\r\n\t} else {\r\n\t\tconsole.log('done')\r\n\t}\r\n\treturn false\r\n}\r\n```\r\n\r\n## ä¸­ä»‹è€…æ¨¡å¼\r\n\r\nhttps://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F.html\r\n\r\nå®šä¹‰ï¼šä¸­ä»‹è€…æ¨¡å¼çš„ä½œç”¨å°±æ˜¯è§£é™¤å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ç´§è€¦åˆå…³ç³»\r\n\r\n```javascript\r\n// MVC æ¨¡å¼\r\nlet M = {}\r\nlet V = {}\r\nlet C = {}\r\n\r\nM.data = 'Hello World'\r\nV.render = (M) => {\r\n    // alert(M.data)\r\n    document.body.append(document.createElement('p').innerHTML = M.data)\r\n}\r\nC.handleOnload = () => {\r\n    V.render(M)\r\n}\r\n\r\n\r\nwindow.onload = C.handleOnload\r\n```\r\n\r\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"ä¸­ä»‹è€…æ¨¡å¼\" src=\"https://codepen.io/xiaotiandada/embed/abdBOvp?height=265&theme-id=dark&default-tab=js,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\r\n  See the Pen <a href='https://codepen.io/xiaotiandada/pen/abdBOvp'>ä¸­ä»‹è€…æ¨¡å¼</a> by xiaotiandada\r\n  (<a href='https://codepen.io/xiaotiandada'>@xiaotiandada</a>) on <a href='https://codepen.io'>CodePen</a>.\r\n</iframe>\r\n\r\n```html\r\n<form action=\"#\" id=\"selectPhone\">\r\n  <div>\r\n    <label for=\"\">é€‰æ‹©æ‰‹æœºé¢œè‰²</label>\r\n    <select name=\"\" id=\"colorSelect\">\r\n      <option value=\"\">è¯·é€‰æ‹©</option>\r\n      <option value=\"red\">çº¢è‰²</option>\r\n      <option value=\"blue\">è“è‰²</option>\r\n    </select>\r\n  </div>\r\n  <div>\r\n    <label for=\"\">é€‰æ‹©å†…å­˜</label>\r\n    <select name=\"\" id=\"memorySelect\">\r\n      <option value=\"\">è¯·é€‰æ‹©</option>\r\n      <option value=\"16G\">16G</option>\r\n      <option value=\"32G\">32G</option>\r\n    </select>\r\n  </div>\r\n  <div>\r\n    <label for=\"\">è¾“å…¥è´­ä¹°æ•°é‡</label>\r\n    <input type=\"number\" min=\"0\" id=\"numberInput\">\r\n  </div>\r\n  <div>\r\n    æ‚¨é€‰æ‹©äº†é¢œè‰²: <div id=\"colorInfo\"></div><br/>\r\n    æ‚¨é€‰æ‹©äº†å†…å­˜: <div id=\"memoryInfo\"></div><br/>\r\n    æ‚¨è¾“å…¥äº†æ•°é‡: <div id=\"numberInfo\"></div><br/>\r\n    <button id=\"nextBtn\" disabled=\"true\">è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²å’Œè´­ä¹°æ•°é‡</button>\r\n  </div>\r\n</form>\r\n```\r\n\r\n```javascript\r\nlet goods = {\r\n   \"red|32G\": 3,\r\n\t\"red|16G\": 0,\r\n\t\"blue|32G\": 1,\r\n\t\"blue|16G\": 6\r\n}\r\n\r\n// è·å¾—æ‰€æœ‰èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œæ“ä½œï¼ˆä¸­ä»‹è€…å¿…è®¸è·å¾—å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼‰\r\nlet colorSelect = document.getElementById( 'colorSelect' )\r\nlet memorySelect = document.getElementById( 'memorySelect' )\r\nlet numberInput = document.getElementById( 'numberInput' )\r\n\r\nlet colorInfo = document.getElementById( 'colorInfo' )\r\nlet memoryInfo = document.getElementById( 'memoryInfo' )\r\nlet numberInfo = document.getElementById( 'numberInfo' )\r\nlet nextBtn = document.getElementById( 'nextBtn' )\r\n\r\nlet mediator = (function() {\r\n    return {\r\n        changed(obj) {\r\n            var color = colorSelect.value // é¢œè‰²\r\n            let memory = memorySelect.value// å†…å­˜\r\n            let number = numberInput.value // æ•°é‡\r\n\r\n            if (obj === colorSelect) {\r\n                colorInfo.innerHTML = color\r\n            } else if (obj === memorySelect) {\r\n                memoryInfo.innerHTML = memory\r\n            } else if (obj === numberInput) {\r\n                numberInfo.innerHTML = number\r\n            } else {\r\n                console.log(obj)\r\n            }\r\n\r\n            if (!color) {\r\n                nextBtn.disabled = true\r\n                nextBtn.innerHTML = 'è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²'\r\n                return\r\n            }\r\n\r\n            if (!memory) {\r\n                nextBtn.disabled = true\r\n                nextBtn.innerHTML = 'è¯·é€‰æ‹©å†…å­˜å¤§å°'\r\n                return\r\n            }\r\n\r\n            if (((number - 0) | 0 !== number - 0)) {\r\n                nextBtn.disabled = true\r\n                nextBtn.innerHTML = 'è¯·è¾“å…¥æ­£ç¡®çš„è´­ä¹°æ•°é‡'\r\n                return\r\n            }\r\n\r\n            nextBtn.disabled = false;\r\n\t\t\tnextBtn.innerHTML = 'æ”¾å…¥è´­ç‰©è½¦';\r\n\r\n        }\r\n    }\r\n})()\r\n\r\n\r\n// ä¸ä¸­ä»‹è€…è”ç³»èµ·æ¥ï¼Œäº‹ä»¶å‡½æ•°\r\ncolorSelect.onchange = function(){\r\n\tmediator.changed( this );\r\n};\r\nmemorySelect.onchange = function(){\r\n\tmediator.changed( this );\r\n};\r\nnumberInput.onchange = function(){\r\n\tmediator.changed( this );\r\n};\r\n```\r\n\r\n## å‘å¸ƒè®¢é˜…æ¨¡å¼\r\n\r\n```js\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F.html\r\n\r\n// å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚\r\n\r\nconst Event = (function() {\r\n  // ç¼“å­˜åˆ—è¡¨\r\n  let list = {}\r\n\r\n  // ç›‘å¬å‡½æ•°\r\n  const listen = function(key, fn) {\r\n    if (!list[key]) {\r\n      list[key] = []\r\n    }\r\n    list[key].push(fn)\r\n  }\r\n\r\n  // è§¦å‘ç›‘å¬\r\n  const trigger = function() {\r\n    let key = Array.prototype.shift.call(arguments)\r\n    let fns = list[key]\r\n\r\n    if (!fns || fns.length === 0) {\r\n      return false\r\n    }\r\n\r\n    for (let i = 0, fn; fn = fns[i++];) {\r\n      fn.apply(this, arguments)\r\n    }\r\n  }\r\n  // ç§»é™¤ç›‘å¬å‡½æ•°\r\n  const remove = function(key, fn) {\r\n    let fns = list[key]\r\n\r\n    if (!fns) {\r\n      return false\r\n    }\r\n\r\n    if (!fn) {\r\n      fns && (fns.length = 0)\r\n    } else {\r\n      for (let i = fns.length - 1; i >= 0; i--) {\r\n        let _fn = fns[i]\r\n        if (_fn === fn) {\r\n          fns.splice(i, 1)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    listen,\r\n    trigger,\r\n    remove\r\n  }\r\n})()\r\n\r\n\r\nfunction d1() {\r\n  console.log('d11111')\r\n}\r\n\r\nfunction d2() {\r\n  console.log('d22222')\r\n}\r\n\r\nfunction d3() {\r\n  console.log('d33333')\r\n}\r\n\r\nEvent.listen('color', d1)\r\nEvent.listen('color', d2)\r\nEvent.listen('color', d3)\r\n\r\n\r\nEvent.listen('size', d1)\r\nEvent.listen('size', d2)\r\nEvent.remove('size', d1)\r\nEvent.listen('size', d3)\r\n\r\nEvent.trigger('color')\r\nconsole.log('----')\r\nEvent.trigger('size')\r\nconsole.log('----')\r\nEvent.trigger('color')\r\n\r\n\r\n// d11111\r\n// d22222\r\n// d33333\r\n// ----\r\n// d22222\r\n// d33333\r\n// ----\r\n// d11111\r\n// d22222\r\n// d33333\r\n```\r\n\r\n## è¿­ä»£å™¨æ¨¡å¼\r\n\r\n```javascript\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F.html\r\n// å®šä¹‰ï¼šè¿­ä»£å™¨æ¨¡å¼æ˜¯æŒ‡æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚\r\n\r\n// å†…éƒ¨è¿­ä»£å™¨\r\n\r\nconst each = (array, callback) => {\r\n  for (let i = 0, len = array.length; i < len; i++) {\r\n    if (callback.call(array[i], array[i], i) === false) {\r\n      break\r\n    }\r\n  }\r\n}\r\n\r\neach([1,2,3,4,5], (val, i) => {\r\n  console.log(val + ' - ' + i)\r\n})\r\nconsole.log('-----')\r\neach([1,2,3,4,5], (val, i) => {\r\n  if (i === 3) {\r\n    return false\r\n  }\r\n  console.log(val + ' - ' + i)\r\n})\r\n\r\n// å¤–éƒ¨è¿­ä»£å™¨\r\n\r\nconst Iterator = obj => {\r\n  let current = 0;\r\n\r\n  const next = () => {\r\n    if (current > obj.length) {\r\n      return false\r\n    }\r\n    current += 1;\r\n  }\r\n\r\n  const isDone = () => {\r\n    return current >= obj.length\r\n  }\r\n\r\n  const getCurrentItem = () => {\r\n    return obj[current]\r\n  }\r\n\r\n  return {\r\n    next,\r\n    isDone,\r\n    getCurrentItem\r\n  }\r\n}\r\n\r\nconsole.log('-----')\r\n\r\nlet iterator = Iterator([1,2,3,4,5])\r\nconsole.log(iterator.getCurrentItem())\r\nconsole.log(iterator.getCurrentItem())\r\n\r\niterator.next()\r\n\r\nconsole.log(iterator.getCurrentItem())\r\nconsole.log(iterator.isDone())\r\n\r\niterator.next()\r\nconsole.log(iterator.getCurrentItem())\r\niterator.next()\r\nconsole.log(iterator.getCurrentItem())\r\niterator.next()\r\nconsole.log(iterator.getCurrentItem())\r\niterator.next()\r\nconsole.log(iterator.getCurrentItem())\r\niterator.next()\r\n\r\nconsole.log(iterator.isDone())\r\n\r\n\r\n\r\n// 1 - 0\r\n// 2 - 1\r\n// 3 - 2\r\n// 4 - 3\r\n// 5 - 4\r\n// -----\r\n// 1 - 0\r\n// 2 - 1\r\n// 3 - 2\r\n// -----\r\n// 1\r\n// 1\r\n// 2\r\n// false\r\n// 3\r\n// 4\r\n// 5\r\n// undefined\r\n// true\r\n```\r\n\r\n## æ¡¥æ¥æ¨¡å¼\r\n\r\n[https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F.html](https://fanerge.github.io/2017/jsè®¾è®¡æ¨¡å¼-æ¡¥æ¥æ¨¡å¼.html)\r\n\r\nå®šä¹‰ï¼šæ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚\r\n\r\n\r\n\r\n## å¤–è§‚æ¨¡å¼\r\n\r\n```html\r\n<button id=\"button\">å¤–è§‚æ¨¡å¼</button>\r\n<div id=\"foo\"></div>\r\n<div id=\"foo1\"></div>\r\n<div id=\"foo2\"></div>\r\n```\r\n\r\n```javascript\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F.html\r\n// https://natee.gitbooks.io/javascript-design-patterns/facade-pattern.html\r\n// å®šä¹‰ï¼šå¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›äº†ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œæ­¤æ¨¡å—å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚\r\n\r\n\r\nconst addEvent = function(el, ev, fn) {\r\n  if (el.addEventListener) {\r\n    el.addEventListener(ev, fn, false)\r\n  } else if (el.attachEvent) {\r\n    el.attachEvent(`on${ev}`, fn)\r\n  } else {\r\n    el[`on${ev}`] = fn\r\n  }\r\n}\r\n\r\n// æ²¡æµ‹è¯•\r\nlet N = window.N || {}\r\nN.tools = {\r\n  stopPropagation(e) {\r\n    if (e.stopPropagation) {\r\n      e.stopPropagation()\r\n    } else {\r\n      e.cancelBubble = true\r\n    }\r\n  },\r\n  preventDefault(e) {\r\n    if (e.preventDefault) {\r\n      e.preventDefault()\r\n    } else {\r\n      e.returnValue = false\r\n    }\r\n  },\r\n  stopEvent(e) {\r\n    this.stopPropagation(e)\r\n    this.preventDefault(e)\r\n  }\r\n}\r\n\r\n\r\naddEvent(document.getElementById('button'), 'click', function() {\r\n  console.log('button')\r\n})\r\n\r\n\r\n\r\nfunction setStyles(elements, styles) {\r\n  for (let i = 0, len = elements.length; i < len; i++) {\r\n    let element = document.getElementById(elements[i])\r\n    if (element) {\r\n      for (let property in styles) {\r\n        element.style[property] = styles[property]\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nsetStyles(['foo', 'foo1', 'foo2'], {\r\n  backgroundColor: 'red',\r\n  width: '150px',\r\n  height: '200px'\r\n});\r\n```\r\n\r\n## è®¿é—®è€…æ¨¡å¼\r\n\r\n```javascript\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F.html\r\n// æ²¡å¤ªç†è§£...\r\n\r\nfunction Visitor () {\r\n  this.visit  = function(ConceteElement) {\r\n    ConceteElement.doSomething()\r\n  }\r\n}\r\n\r\nfunction ConceteElement() {\r\n  this.doSomething = function() {\r\n    console.log('this is a element')\r\n  }\r\n\r\n  this.accept = function(visitor) {\r\n    visitor.visit(this)\r\n  }\r\n}\r\n\r\n\r\nlet visitor = new Visitor()\r\nlet conceteElement = new ConceteElement()\r\n\r\nconceteElement.accept(visitor)\r\n\r\n```\r\n\r\n## æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼\r\n\r\nå®šä¹‰ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼ç”±äºŒéƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æŠ½è±¡çˆ¶ç±»ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å…·ä½“å®ç°çš„å­ç±»ï¼Œä¸€èˆ¬çš„æƒ…å†µä¸‹æ˜¯æŠ½è±¡çˆ¶ç±»å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶ï¼ŒåŒ…æ‹¬å®ç°ä¸€äº›å…¬å…±æ–¹æ³•åŠå°è£…å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåºï¼Œå­ç±»å¯ä»¥ç»§æ‰¿è¿™ä¸ªçˆ¶ç±»ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œä»è€Œå®ç°è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚\r\n\r\n```javascript\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A8%A1%E7%89%88%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F.html\r\n\r\n\r\nconst ITInterview = function() {}\r\n\r\nITInterview.prototype.writeTest = function() {\r\n  console.log('this is a write test')\r\n}\r\n\r\nITInterview.prototype.technicalInterView = function() {\r\n  console.log('this is a technical interview')\r\n}\r\n\r\nITInterview.prototype.leader = function() {\r\n  console.log('this is a leader interview')\r\n}\r\n\r\nITInterview.prototype.waitNotice = function() {\r\n  console.log('wait notice')\r\n}\r\n\r\nITInterview.prototype.init = function() {\r\n  this.writeTest()\r\n  this.technicalInterView()\r\n  this.leader()\r\n  this.waitNotice()\r\n}\r\n\r\nconst itInterview = new ITInterview()\r\nitInterview.init()\r\n\r\n\r\n// baidu\r\nconst BaiDuITInterview = function() {}\r\nBaiDuITInterview.prototype = new ITInterview()\r\n\r\nBaiDuITInterview.prototype.writeTest = function() {\r\n  console.log('this is a baidu write test')\r\n}\r\n\r\nBaiDuITInterview.prototype.technicalInterView = function() {\r\n  console.log('this is a baidu technical interview')\r\n}\r\n\r\n\r\nconst baiduItInterview = new BaiDuITInterview()\r\nbaiduItInterview.init()\r\n\r\n```\r\n\r\n## ç»„åˆæ¨¡å¼\r\n\r\nå®šä¹‰ï¼šç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚\r\n\r\n```javascript\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F.html\r\n// å®šä¹‰ï¼šç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚\r\n\r\n\r\n// å®šä¹‰ç»„åˆå¯¹è±¡ï¼ˆæ–‡ä»¶å¤¹ï¼‰\r\nlet Folder = function(name) {\r\n  this.name = name\r\n  this.files = []\r\n}\r\n\r\nFolder.prototype.add = function(file) {\r\n  this.files.push(file)\r\n}\r\n\r\nFolder.prototype.scan = function() {\r\n  console.log('å¼€å§‹æ–‡ä»¶æ‰«æ:' + this.name)\r\n\tfor( let i = 0, file, files = this.files; file = files[i++]; ){\r\n\t\tfile.scan();\r\n\t}\r\n} \r\n\r\n//å®šä¹‰å¶å­å¯¹è±¡ï¼ˆæ–‡ä»¶ï¼‰\r\nlet File = function(name) {\r\n  this.name = name\r\n}\r\n\r\nFile.prototype.add = function() {\r\n  throw new Error('æ–‡ä»¶ä¸‹é¢ä¸èƒ½å†æ·»åŠ æ–‡ä»¶')\r\n}\r\nFile.prototype.scan = function() {\r\n  console.log('å¼€å§‹æ‰«ç„ï¼š' + this.name)\r\n}\r\n\r\n\r\nlet folder = new Folder('å‰ç«¯å­¦ä¹ ');\r\nlet folder1 = new Folder('JSå­¦ä¹ ');\r\nlet folder2 = new Folder('JQå­¦ä¹ ');\r\n\r\nlet file1 = new File('JSè®¾è®¡æ¨¡å¼');\r\nlet file2 = new File('JQå®æˆ˜');\r\nlet file3 = new File('å‰ç«¯æ€§èƒ½');\r\n\r\nfolder1.add(file1);\r\nfolder2.add(file2);\r\n\r\nfolder.add(folder1);\r\nfolder.add(folder2);\r\nfolder.add(file3);\r\nfolder.scan();\r\n\r\n// å¼€å§‹æ–‡ä»¶æ‰«æ:å‰ç«¯å­¦ä¹ \r\n// å¼€å§‹æ–‡ä»¶æ‰«æ:JSå­¦ä¹ \r\n// å¼€å§‹æ‰«ç„ï¼šJSè®¾è®¡æ¨¡å¼\r\n// å¼€å§‹æ–‡ä»¶æ‰«æ:JQå­¦ä¹ \r\n// å¼€å§‹æ‰«ç„ï¼šJQå®æˆ˜\r\n// å¼€å§‹æ‰«ç„ï¼šå‰ç«¯æ€§èƒ½\r\n```\r\n\r\n## å¤‡å¿˜å½•æ¨¡å¼\r\n\r\nå®šä¹‰ï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·å°±å¯ä»¥å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€\r\n\r\n```javascript\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F.html\r\n// å®šä¹‰ï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·å°±å¯ä»¥å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€\r\n\r\nconst render = data => {\r\n  console.log(data)\r\n}\r\n\r\nconst page = function () {\r\n  let cache = {}\r\n\r\n  return (page) => {\r\n    console.log('page', page)\r\n    console.log('cache', JSON.stringify(cache))\r\n\r\n    if (cache[page]) {\r\n      render(cache[page])\r\n    } else {\r\n      let data = [\r\n        {\r\n          title: \"hi\"\r\n        }\r\n      ]\r\n\r\n      cache[page] = data\r\n      render(data)\r\n    }\r\n  }\r\n}()\r\n\r\n\r\n\r\npage(1)\r\npage(1)\r\npage(1)\r\npage(1)\r\n\r\npage(1)\r\npage(2)\r\npage(3)\r\npage(4)\r\n\r\npage(2)\r\n\r\n```\r\n\r\n## èŒè´£é“¾æ¨¡å¼\r\n\r\n```javascript\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F.html\r\n\r\n// å®šä¹‰ï¼šèŒè´£é“¾æ¨¡å¼ï¼ˆChain of responsibilityï¼‰æ˜¯ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™ä¸ªå¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†ä»–ä¸ºæ­¢ã€‚èŒè´£é“¾æ¨¡å¼çš„åå­—éå¸¸å½¢è±¡ï¼Œä¸€ç³»åˆ—å¯èƒ½ä¼šå¤„ç†è¯·æ±‚çš„å¯¹è±¡è¢«è¯¥è¿æ¥æˆä¸€æ¡é“¾ï¼Œè¯·æ±‚åœ¨è¿™äº›å¯¹è±¡ä¹‹é—´ä¾æ¬¡ä¼ é€’ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ªå¯ä»¥å¤„ç†å®ƒçš„å¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠè¿™äº›å¯¹è±¡æˆä¸ºé“¾ä¸­çš„èŠ‚ç‚¹ã€‚\r\n\r\n// 500 å…ƒå®¢æˆ·è®¢å•\r\nvar order500 = function (orderType, pay, stock) {\r\n  if (orderType === 1 && pay) {\r\n    console.log('500 rmb deposit, get 100 coupon ')\r\n  } else {\r\n    return 'nextSuccessor' // unknow the next node but always pass to next.\r\n  }\r\n};\r\n// 200 å…ƒå®¢æˆ·è®¢å•\r\nvar order200 = function (orderType, pay, stock) {\r\n  if (orderType === 2 && pay) {\r\n    console.log('200 rmb deposit , get 50 coupon')\r\n  } else {\r\n    return 'nextSuccessor';\r\n  }\r\n};\r\n// æ— é¢„çº¦å®¢æˆ·è®¢å•\r\nvar orderNormal = function (orderType, pay, stock) {\r\n  if (stock > 0) {\r\n    console.log('normal buy no coupon')\r\n  } else {\r\n    console.log('the stock lack')\r\n  }\r\n};\r\n\r\nlet Chain = function (fn) {\r\n  this.fn = fn\r\n  this.successor = null\r\n}\r\n\r\nChain.prototype.setNextSuccessor = function (successor) {\r\n  return this.successor = successor\r\n}\r\n\r\nChain.prototype.passRequest = function () {\r\n  let ret = this.fn.apply(this, arguments)\r\n  if (ret === 'nextSuccessor') {\r\n    return this.successor && this.successor.passRequest.apply(this.successor, arguments)\r\n  }\r\n  return ret\r\n}\r\n\r\n\r\n\r\n// ç°åœ¨æˆ‘ä»¬æŠŠ3ä¸ªè®¢å•å‡½æ•°åˆ†åˆ«åŒ…è£…æˆèŒè´£é“¾çš„èŠ‚ç‚¹\r\nvar chainOrder500 = new Chain(order500);\r\nvar chainOrder200 = new Chain(order200);\r\nvar chainOrderNormal = new Chain(orderNormal);\r\n\r\n// è¿™é‡Œæˆ‘ä»¬æŠŠä¸Šé¢å°è£…çš„èŠ‚ç‚¹è¿æˆä¸€æ¡çº¿ï¼Œä¾æ¬¡åˆ¤æ–­æ‰§è¡Œ\r\nchainOrder500.setNextSuccessor(chainOrder200)\r\nchainOrder200.setNextSuccessor(chainOrderNormal)\r\n// æµ‹è¯•ä»£ç \r\nchainOrder500.passRequest(1,true,6); // 500 rmb deposit, get 100 coupon\r\nchainOrder500.passRequest(2,true,4); // 200 rmb deposit , get 50 coupon\r\n\r\nchainOrderNormal.passRequest(2,true,0); // 200 rmb deposit , get 50 coupon\r\n\r\n```\r\n\r\n## çŠ¶æ€æ¨¡å¼\r\n\r\n```javascript\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F.html\r\n// å®šä¹‰ï¼šçŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥é€šè¿‡ç®¡ç†å…¶çŠ¶æ€ä»è€Œä½¿å¾—åº”ç”¨ç¨‹åºä½œå‡ºç›¸åº”çš„å˜åŒ–ã€‚\r\n\r\nvar trafficLight = (function () {\r\n\tvar currentLight = null;\r\n\treturn {\r\n\t\tchange: function (light) {\r\n\t\t\tcurrentLight = light;\r\n\t\t\tcurrentLight.go();\r\n\t\t}\r\n\t}\r\n})();\r\n\r\n\r\n// çº¢ç¯\r\nfunction RedLight() { }\r\nRedLight.prototype.go = function () {\r\n\tconsole.log(\"this is red light\");\r\n}\r\n// ç»¿ç¯\r\nfunction GreenLight() { }\r\nGreenLight.prototype.go = function () {\r\n\tconsole.log(\"this is green light\");\r\n}\r\n// é»„ç¯\r\nfunction YellowLight() { }\r\nYellowLight.prototype.go = function () {\r\n\tconsole.log(\"this is yellow light\");\r\n}\r\n\r\ntrafficLight.change(new RedLight()); // this is red light\r\ntrafficLight.change(new YellowLight()); // this is yellow light\r\n\r\n\r\nfunction Menu() { }\r\nMenu.prototype.toggle = function (state) {\r\n\tstate();\r\n}\r\n\r\nvar menuStates = {\r\n\t\"show\": function () {\r\n\t\tconsole.log(\"the menu is showing\");\r\n\t},\r\n\t\"hide\": function () {\r\n\t\tconsole.log(\"the menu is hiding\");\r\n\t}\r\n};\r\n\r\nvar menu = new Menu();\r\nmenu.toggle(menuStates.show);\r\nmenu.toggle(menuStates.hide);\r\n\r\n```\r\n\r\n## äº«å…ƒæ¨¡å¼\r\n\r\n```javascript\r\n// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F.html\r\n\r\n// å®šä¹‰ï¼šäº«å…ƒæ¨¡å¼æ˜¯ä¸€ç§ç”¨äºæ€§èƒ½ä¼˜åŒ–çš„æ¨¡å¼ï¼Œå¦‚æœç³»ç»Ÿä¸­å› ä¸ºåˆ›å»ºäº†å¤§é‡ç±»ä¼¼çš„å¯¹è±¡è€Œå¯¼è‡´å†…å­˜ä¸è¶³æˆ–å ç”¨è¿‡é«˜è¿™ç§æ¨¡å¼å°±éå¸¸æœ‰ç”¨äº†ã€‚\r\n\r\n// å®šä¹‰å¡‘æ–™æ¨¡ç‰¹çš„æ„é€ å‡½æ•°\r\nvar Model = function (sex) {\r\n\tthis.sex = sex;\r\n}\r\n// ä¸ºæ¨¡ç‰¹æ‹ç…§\r\nModel.prototype.takePhoto = function () {\r\n\tconsole.log('sex=' + this.sex + 'underwear=' + this.underwear )\r\n}\r\n// å®ä¾‹åŒ–ä¸€ä¸ªç”·æ¨¡ç‰¹ å’Œ ä¸€ä¸ªå¥³æ¨¡ç‰¹\r\nvar maleModel = new Model('male');\r\nlet female    = new Model('female');    \r\nfor (var i = 1; i <=50; i++){\r\n\t// åˆ†åˆ«ä¸ºæ¨¡ç‰¹æ¢ä¸Š 50 ä»¶å†…è¡£ ä»¥åŠ ç…§ç›¸\r\n\tmaleModel.underwear = 'underwear' + i;\r\n\tmaleModel.takePhoto();\r\n}\r\nfor (var i = 1; i <=50; i++){\r\n\t// åˆ†åˆ«ä¸ºæ¨¡ç‰¹æ¢ä¸Š 50 ä»¶å†…è¡£ ä»¥åŠ ç…§ç›¸\r\n\tfemale.underwear = 'underwear' + i;\r\n\tfemale.takePhoto();\r\n}\r\n\r\n\r\n\r\n\r\nlet toolTipFactory = (function() {\r\n  let tooplTipPool = []\r\n  return {\r\n    create: function() {\r\n      if (tooplTipPool.length === 0) {\r\n        console.log(1)\r\n        let div = document.createElement('div')\r\n        document.body.appendChild(div)\r\n        return div\r\n      } else {\r\n        console.log(2)\r\n        return tooplTipPool.shift()\r\n      }\r\n    },\r\n    recover: function(tooltipDOm) {\r\n      tooplTipPool.push(tooltipDOm)\r\n    }\r\n  }\r\n})()\r\n\r\n// 2\r\nlet arr = []\r\nfor (let i = 0, str; str = ['a', 'b'][i++];) {\r\n  let toolTip = toolTipFactory.create()\r\n  toolTip.innerHTML = str\r\n  arr.push(toolTip)\r\n}\r\n\r\n\r\nfor (let i = 0, toolTip; toolTip = arr[i++];) {\r\n  toolTipFactory.recover(toolTip)\r\n}\r\n\r\n// 11\r\n// 22\r\n// 1111\r\nfor (let i = 0, str; str = ['a', 'b', 'c', 'd', 'e', 'f'][i++];) {\r\n  let toolTip = toolTipFactory.create()\r\n  toolTip.innerHTML = str\r\n}\r\n```\r\n\r\n","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&v=4"},"html":"<p>2020-02-26 23:57:00</p>\n<p>ç¬¬ä¸€æ¬¡å­¦ä¹ è®¾è®¡æ¨¡å¼ <a href=\"https://github.com/xiaotiandada/javaScript-design-patterns\">repo æ‰€æœ‰çš„ä»£ç éƒ½åœ¨è¿™å„¿å•¦!</a></p>\n<!-- more --> \n\n<h2 id=\"å·¥å‚æ¨¡å¼\">å·¥å‚æ¨¡å¼</h2>\n<p><strong>ç›¸å…³èµ„æ–™:</strong></p>\n<p><a href=\"https://juejin.im/post/5c984610e51d45656702a785\">JavaScriptè®¾è®¡æ¨¡å¼æ€»ç»“</a></p>\n<p><a href=\"https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.html\">jsè®¾è®¡æ¨¡å¼-å·¥å‚æ¨¡å¼</a></p>\n<p><strong>åˆ›å»ºä¸‰ä¸ªè§’è‰²ç„¶åéšæœºå†³æ–—âš”ï¸</strong></p>\n<pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å·¥å‚æ¨¡å¼'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// æ”»å‡»åŠ›1-100</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">attackPower</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">100</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// æˆ˜å£«</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Warrior</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>occupation <span class=\"token operator\">=</span> <span class=\"token string\">'æˆ˜å£«'</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>skill <span class=\"token operator\">=</span> <span class=\"token string\">'å•ä¸€ç‹‚ç '</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blood <span class=\"token operator\">=</span> <span class=\"token number\">100</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hit <span class=\"token operator\">=</span> <span class=\"token function\">attackPower</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// other</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// æ³•å¸ˆ</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Mage</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>occupation <span class=\"token operator\">=</span> <span class=\"token string\">'æ³•å¸ˆ'</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>skill <span class=\"token operator\">=</span> <span class=\"token string\">'é›†ä½“å†°å†»'</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blood <span class=\"token operator\">=</span> <span class=\"token number\">100</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hit <span class=\"token operator\">=</span> <span class=\"token function\">attackPower</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// å°„æ‰‹</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Archer</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>occupation <span class=\"token operator\">=</span> <span class=\"token string\">'å°„æ‰‹'</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>skill <span class=\"token operator\">=</span> <span class=\"token string\">'å…¨å±€è½°ç‚¸'</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>blood <span class=\"token operator\">=</span> <span class=\"token number\">100</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hit <span class=\"token operator\">=</span> <span class=\"token function\">attackPower</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// å·¥å‚å¯¹è±¡</span>\n<span class=\"token comment\">// classã€functionã€object</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RoleFactory</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n  <span class=\"token function\">createRole</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">role</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> roles <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">Warrior</span><span class=\"token operator\">:</span> Warrior<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">Mage</span><span class=\"token operator\">:</span> Mage<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">Archer</span><span class=\"token operator\">:</span> Archer\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> Character <span class=\"token operator\">=</span> roles<span class=\"token punctuation\">[</span>role<span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> role <span class=\"token operator\">?</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Character</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Warrior</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// åˆ›å»ºè§’è‰²</span>\n<span class=\"token keyword\">let</span> roleFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RoleFactory</span>\n<span class=\"token keyword\">let</span> warrior <span class=\"token operator\">=</span> roleFactory<span class=\"token punctuation\">.</span><span class=\"token function\">createRole</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Warrior'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> mage <span class=\"token operator\">=</span> roleFactory<span class=\"token punctuation\">.</span><span class=\"token function\">createRole</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Mage'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> archer <span class=\"token operator\">=</span> roleFactory<span class=\"token punctuation\">.</span><span class=\"token function\">createRole</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Archer'</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'warrior:'</span><span class=\"token punctuation\">,</span> warrior<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mage:'</span><span class=\"token punctuation\">,</span> mage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'archer:'</span><span class=\"token punctuation\">,</span> archer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----------'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// éšæœºè§’è‰²</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">randomRole</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>data <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>number<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n\n  <span class=\"token keyword\">let</span> randomRole <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> data<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> sub <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> data<span class=\"token punctuation\">.</span>length <span class=\"token punctuation\">)</span>\n    randomRole<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>sub<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> randomRole\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// æˆ˜æ–—</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">duel</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">roles</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// æœ€å¼ºè§’è‰²</span>\n  <span class=\"token keyword\">let</span> maxRole <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n  <span class=\"token comment\">// æœ€é«˜æ”»å‡»åŠ›</span>\n  <span class=\"token keyword\">let</span> maxHit <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n  roles<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">// å¦‚æœæ”»å‡»åŠ›å¤§äºæœ€å¤§æ”»å‡»åŠ›</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>hit <span class=\"token operator\">></span> maxHit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// è®¾ç½®å½“å‰è§’è‰²</span>\n      maxRole <span class=\"token operator\">=</span> item\n      <span class=\"token comment\">// æ”»å‡»åŠ›ä¹Ÿæ›¿æ¢</span>\n      maxHit <span class=\"token operator\">=</span> item<span class=\"token punctuation\">.</span>hit\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>hit <span class=\"token operator\">===</span> maxHit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// æ¸…ç©º</span>\n      maxRole <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n      maxHit <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> maxRole\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">compose</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>fn</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> fn<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> winner <span class=\"token operator\">=</span> <span class=\"token function\">compose</span><span class=\"token punctuation\">(</span>duel<span class=\"token punctuation\">,</span> randomRole<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>warrior<span class=\"token punctuation\">,</span> mage<span class=\"token punctuation\">,</span> archer<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>winner<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">èƒœåˆ©è€…æ˜¯: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>winner<span class=\"token punctuation\">.</span>occupation<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, ä»–çš„æŠ€èƒ½æ˜¯: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>winner<span class=\"token punctuation\">.</span>skill<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">, æ”»å‡»åŠ›: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>winner<span class=\"token punctuation\">.</span>hit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">è¿™æ˜¯å¹³å±€</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre><p><strong>è¾“å‡º</strong></p>\n<pre class=\"language-js\"><code class=\"language-js\">å·¥å‚æ¨¡å¼\n<span class=\"token literal-property property\">warrior</span><span class=\"token operator\">:</span> Warrior <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">occupation</span><span class=\"token operator\">:</span> <span class=\"token string\">'æˆ˜å£«'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">skill</span><span class=\"token operator\">:</span> <span class=\"token string\">'å•ä¸€ç‹‚ç '</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">blood</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">hit</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span>\n<span class=\"token literal-property property\">mage</span><span class=\"token operator\">:</span> Mage <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">occupation</span><span class=\"token operator\">:</span> <span class=\"token string\">'æ³•å¸ˆ'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">skill</span><span class=\"token operator\">:</span> <span class=\"token string\">'é›†ä½“å†°å†»'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">blood</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">hit</span><span class=\"token operator\">:</span> <span class=\"token number\">39</span> <span class=\"token punctuation\">}</span>\n<span class=\"token literal-property property\">archer</span><span class=\"token operator\">:</span> Archer <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">occupation</span><span class=\"token operator\">:</span> <span class=\"token string\">'å°„æ‰‹'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">skill</span><span class=\"token operator\">:</span> <span class=\"token string\">'å…¨å±€è½°ç‚¸'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">blood</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">hit</span><span class=\"token operator\">:</span> <span class=\"token number\">33</span> <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span><span class=\"token operator\">--</span>\nWarrior <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">occupation</span><span class=\"token operator\">:</span> <span class=\"token string\">'æˆ˜å£«'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">skill</span><span class=\"token operator\">:</span> <span class=\"token string\">'å•ä¸€ç‹‚ç '</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">blood</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">hit</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span>\nMage <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">occupation</span><span class=\"token operator\">:</span> <span class=\"token string\">'æ³•å¸ˆ'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">skill</span><span class=\"token operator\">:</span> <span class=\"token string\">'é›†ä½“å†°å†»'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">blood</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">hit</span><span class=\"token operator\">:</span> <span class=\"token number\">39</span> <span class=\"token punctuation\">}</span>\n<span class=\"token literal-property property\">èƒœåˆ©è€…æ˜¯</span><span class=\"token operator\">:</span> æ³•å¸ˆ<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">ä»–çš„æŠ€èƒ½æ˜¯</span><span class=\"token operator\">:</span> é›†ä½“å†°å†»<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">æ”»å‡»åŠ›</span><span class=\"token operator\">:</span> <span class=\"token number\">39</span></code></pre><p>å› ä¸º<strong>ç¬¬ä¸€æ¬¡</strong>å­¦ä¹  è¿˜ä¸å¤ªçŸ¥é“å…·ä½“çš„<strong>ä¼˜ç‚¹å’Œå¥½å¤„</strong> ä¹Ÿæ²¡åŠæ³•<strong>å£å–·</strong> æ‰€ä»¥æš‚æ—¶ç•™ä¸ªå‘ç»™è‡ªå·± ä¸‹æ¬¡æ›´åŠ äº†è§£ä¹‹åå›æ¥<strong>å¡«å‘</strong> ğŸ‘</p>\n<h2 id=\"å•ä¾‹æ¨¡å¼\">å•ä¾‹æ¨¡å¼</h2>\n<p><a href=\"https://juejin.im/post/5c984610e51d45656702a785\">https://juejin.im/post/5c984610e51d45656702a785</a></p>\n<p><a href=\"https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html\">https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html</a></p>\n<blockquote>\n<p>å®šä¹‰ï¼šå•ä¾‹å°±æ˜¯ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå®ç°çš„æ–¹æ³•ä¸€èˆ¬æ˜¯å…ˆåˆ¤æ–­å®ä¾‹å­˜åœ¨ä¸å¦ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥è¿”å›ï¼Œå¦‚æœä¸å­˜åœ¨å°±åˆ›å»ºäº†å†è¿”å›ï¼Œè¿™å°±ç¡®ä¿äº†ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ã€‚ -- å¤åˆ¶çš„</p>\n</blockquote>\n<p>æˆ‘çš„ç†è§£ä¸ºä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹, å¹¶ä¸”å…¨å±€è®¿é—®éƒ½æ˜¯ç›¸åŒçš„å®ä¾‹</p>\n<p>å»ºè®®å…ˆçœ‹å®Œä¸Šé¢æ–‡ç« çš„å•ä¾‹æ¨¡å—, æˆ‘è§‰å¾—ä»–ä»¬æ€»ç»“å¾—æ¯”æˆ‘è¦å¥½</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// ç™»å½•æ¡†</span>\n<span class=\"token comment\">/**\n* æˆ‘è¿™é‡Œå•å‡»æŒ‰é’®ğŸ”˜æ˜¾ç¤ºç™»å½•æ¡†, å¹¶ä¸”è‡ªèº«è®¾ç½®å…³é—­äº‹ä»¶ åªæ˜¯éšè—\n* åœ¨ä¸‹ä¸€æ¬¡æ˜¾ç¤ºç™»å½•æ¡†çš„æ—¶å€™ä¸ä¼šåˆ›å»º è€Œæ˜¯ç›´æ¥å±•ç¤º å› ä¸ºå•ä¾‹æ¨¡å¼\n* ç™»å½•æ¡†å·²ç»åˆ›å»ºäº† æ‰€ä»¥ç›´æ¥è¿”å›äº†å¯¹è±¡ ç„¶åå±•ç¤º\n*/</span>\n<span class=\"token keyword\">const</span> loginBox <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> div\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>div<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      div <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span>\n      div<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        div<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span>\n      <span class=\"token punctuation\">}</span>\n      div<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'ç™»å½• hhhh (å•å‡»æˆ‘éšè—)'</span>\n      document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>div<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> div\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#btn'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> loginbox <span class=\"token operator\">=</span> <span class=\"token function\">loginBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  loginbox<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'block'</span>\n<span class=\"token punctuation\">}</span></code></pre><p>è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºèŒƒ... ğŸ‘</p>\n<h2 id=\"è£…é¥°å™¨æ¨¡å¼\">è£…é¥°å™¨æ¨¡å¼</h2>\n<p><a href=\"https://juejin.im/post/5c984610e51d45656702a785\">https://juejin.im/post/5c984610e51d45656702a785</a></p>\n<blockquote>\n<p>åœ¨ä¸æ”¹å˜å¯¹è±¡è‡ªèº«çš„åŸºç¡€ä¸Šï¼ŒåŠ¨æ€çš„ç»™æŸä¸ªå¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶æ¥å£</p>\n</blockquote>\n<p><a href=\"https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F.html\">https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F.html</a></p>\n<blockquote>\n<p>å®šä¹‰ï¼šè£…é¥°è€…(decorator)æ¨¡å¼èƒ½å¤Ÿåœ¨ä¸æ”¹å˜å¯¹è±¡è‡ªèº«çš„åŸºç¡€ä¸Šï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´ç»™å¯¹è±¡åŠ¨æ€çš„æ·»åŠ èŒè´£ã€‚</p>\n<p>è¿™æ ·ç»™å¯¹è±¡åŠ¨æ€çš„å¢åŠ èŒè´£çš„æ–¹å¼å°±æ²¡æœ‰æ”¹å˜å¯¹è±¡è‡ªèº«ï¼Œä¸€ä¸ªå¯¹è±¡æ”¾å…¥å¦ä¸€ä¸ªå¯¹è±¡å°±å½¢æˆäº†ä¸€æ¡è£…é¥°é“¾ï¼ˆä¸€ä¸ªèšåˆå¯¹è±¡ï¼‰ï¼Œ è€Œä¸Šé¢çš„shotå’Œtrackä¹Ÿå°±æ˜¯è£…é¥°è€…ã€è£…é¥°å‡½æ•° ï¼Œå½“å‡½æ•°æ‰§è¡Œæ—¶ï¼Œä¼šæŠŠè¯·æ±‚è½¬ç»™é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¯¹è±¡ã€‚</p>\n</blockquote>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">Plane</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å‘å°„æ™®é€šå­å¼¹'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">Missile</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">plane</span><span class=\"token operator\">:</span> any\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">plane</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>plane <span class=\"token operator\">=</span> plane\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">fire</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>plane<span class=\"token punctuation\">.</span><span class=\"token function\">fire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å‘å°„å¯¼å¼¹'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> plane <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Plane</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  plane <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Missile</span><span class=\"token punctuation\">(</span>plane<span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>plane<span class=\"token punctuation\">.</span><span class=\"token function\">fire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// åˆ©ç”¨AOPç»™å‡½æ•°åŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼Œå³Functionçš„afteræˆ–è€…before</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> <span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">before</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> _this <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">_this</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token class-name\">Function</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">after</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> _this <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> ret <span class=\"token operator\">=</span> <span class=\"token function\">_this</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n      <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> ret\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  \n  func <span class=\"token operator\">=</span> func<span class=\"token punctuation\">.</span><span class=\"token function\">before</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">after</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre><pre class=\"language-javascript\"><code class=\"language-javascript\">\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// åˆ©ç”¨è£…é¥°å™¨</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">func1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">func2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">Func</span> <span class=\"token punctuation\">{</span>\n    @func2\n    @func1\n    <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> func <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  func<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span></code></pre><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// å°è£…æˆå‡½æ•°</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">before</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> before</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">before</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">after</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn<span class=\"token punctuation\">,</span> after</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> ret <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n      <span class=\"token function\">after</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span> ret\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">func1</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token number\">2</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">func2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n\n  <span class=\"token function\">before</span><span class=\"token punctuation\">(</span>func1<span class=\"token punctuation\">,</span> func2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">after</span><span class=\"token punctuation\">(</span>func1<span class=\"token punctuation\">,</span> func2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre><p>æ ¸å¿ƒå°±åœ¨<code>after</code> <code>before</code> äº†</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// ...</span>\n <span class=\"token keyword\">function</span> <span class=\"token function\">handwashing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æ´—æ‰‹'</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">function</span> <span class=\"token function\">drink</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å–æ°´'</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">function</span> <span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'åƒé¥­'</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">}</span>\n\n\n <span class=\"token function\">before</span><span class=\"token punctuation\">(</span>eat<span class=\"token punctuation\">,</span> handwashing<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n <span class=\"token function\">after</span><span class=\"token punctuation\">(</span>eat<span class=\"token punctuation\">,</span> drink<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n \n <span class=\"token comment\">// åƒé¥­å‰æ´—æ‰‹</span>\n <span class=\"token comment\">// åƒé¥­åå–æ°´</span>\n<span class=\"token punctuation\">}</span></code></pre><p>æ¯”è¾ƒåŸºç¡€çš„æ¼”ç¤ºäº† :)</p>\n<h2 id=\"ä»£ç†æ¨¡å¼\">ä»£ç†æ¨¡å¼</h2>\n<blockquote>\n<p>ä¸ºä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç”¨å“æˆ–å ä½ç¬¦ï¼Œä»¥ä¾¿æ§åˆ¶å¯¹å®ƒçš„è®¿é—®ã€‚</p>\n</blockquote>\n<p><a href=\"https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.html\">https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.html</a></p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// ç¼“å­˜ä»£ç†</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">mult</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    a <span class=\"token operator\">*=</span> arguments<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> a\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">plus</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> arguments<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    a <span class=\"token operator\">+=</span> arguments<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> a\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">createProxyFactory</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> cache <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// ä¿å­˜è®¡ç®—ç»“æœ</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> args <span class=\"token operator\">=</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">','</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>args <span class=\"token keyword\">in</span> cache<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> cache<span class=\"token punctuation\">[</span>args<span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> cache<span class=\"token punctuation\">[</span>args<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">let</span> proxyMult <span class=\"token operator\">=</span> <span class=\"token function\">createProxyFactory</span><span class=\"token punctuation\">(</span>mult<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> proxyPlus <span class=\"token operator\">=</span> <span class=\"token function\">createProxyFactory</span><span class=\"token punctuation\">(</span>plus<span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">proxyMult</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">proxyPlus</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre><blockquote>\n<p>è¿™é‡Œæ¯æ¬¡è¿›è¡ŒåŒç±»çš„è®¡ç®—æ—¶ï¼ˆä¹˜æ³•å’ŒåŠ æ³•ä¸¤ç±»ï¼‰ï¼Œå…ˆåˆ¤æ–­ç¼“å­˜å¯¹è±¡cacheä¸­æ˜¯å¦å­˜åœ¨è¯¥å‚æ•°è¿æ¥æˆçš„å­—ç¬¦ä¸²ä½œä¸ºkeyçš„å±æ€§ã€‚\nå¦‚æœæœ‰ï¼Œåˆ™ç›´æ¥ä»cacheä¸­è¯»å–ï¼Œå¦åˆ™å°±è¿›è¡Œè®¡ç®—å¹¶ä¿å­˜å…¶ç»“æœã€‚</p>\n</blockquote>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// è™šæ‹Ÿä»£ç†</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">sleep</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">time</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span> <span class=\"token operator\">=></span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>resolve<span class=\"token punctuation\">,</span> time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> imgFunc <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> imgNode <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'img'</span><span class=\"token punctuation\">)</span>\n  document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>imgNode<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setSrc</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">src</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      imgNode<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">const</span> proxyImage <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  img<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    imgFunc<span class=\"token punctuation\">.</span><span class=\"token function\">setSrc</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>src<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setSrc</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">src</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      imgFunc<span class=\"token punctuation\">.</span><span class=\"token function\">setSrc</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=766379944,3048822499&amp;fm=26&amp;gp=0.jpg'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// æ¨¡æ‹ŸåŠ è½½æ—¶é—´</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nproxyImage<span class=\"token punctuation\">.</span><span class=\"token function\">setSrc</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://t8.baidu.com/it/u=1484500186,1503043093&amp;fm=79&amp;app=86&amp;f=JPEG?w=1280&amp;h=853'</span><span class=\"token punctuation\">)</span></code></pre><blockquote>\n<p>å›¾ç‰‡æ‡’åŠ è½½çš„æ–¹å¼ï¼šå…ˆé€šè¿‡ä¸€å¼ loadingå›¾å ä½ï¼Œç„¶åé€šè¿‡å¼‚æ­¥çš„æ–¹å¼åŠ è½½å›¾ç‰‡ï¼Œç­‰å›¾ç‰‡åŠ è½½å¥½äº†å†æŠŠå®Œæˆçš„å›¾ç‰‡åŠ è½½åˆ°imgæ ‡ç­¾é‡Œé¢ã€‚</p>\n</blockquote>\n<h2 id=\"ç­–ç•¥æ¨¡å¼\">ç­–ç•¥æ¨¡å¼</h2>\n<p><a href=\"https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.html\">https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.html</a></p>\n<blockquote>\n<p> å®šä¹‰ï¼šå®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚</p>\n</blockquote>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> strategy <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">salary</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">return</span> salary <span class=\"token operator\">*</span> <span class=\"token number\">4</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">salary</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> salary <span class=\"token operator\">*</span> <span class=\"token number\">3</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">salary</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> salary <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>strategy<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">returnMoney</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> salary</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> strategy<span class=\"token punctuation\">[</span>type<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>salary<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">returnMoney</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">returnMoney</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">returnMoney</span><span class=\"token punctuation\">(</span><span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre><p>ç®€å•çš„ä½¿ç”¨</p>\n<p>ps: ç­–ç•¥æ¨¡å¼æŒ‡çš„æ˜¯å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå°†ä¸å˜çš„éƒ¨åˆ†å’Œå˜åŒ–çš„éƒ¨åˆ†éš”å¼€ï¼Œ\nå®é™…å°±æ˜¯å°†ç®—æ³•çš„ä½¿ç”¨å’Œå®ç°åˆ†ç¦»å‡ºæ¥ï¼›</p>\n<p><strong>è¡¨å•éªŒè¯</strong></p>\n<p>æˆ‘åœ¨åŸæœ‰çš„codeä¸ŠåŠ äº†ä¸€ä¸ªæ–¹æ³•(é”™è¯¯å±•ç¤º, æ¯”è¾ƒåŸºç¡€æ‰€ä»¥å¾ˆå¤šåœ°æ–¹æ²¡æœ‰è€ƒè™‘åˆ°)</p>\n<iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"ç­–ç•¥æ¨¡å¼\" src=\"https://codepen.io/xiaotiandada/embed/xxZOBvG?height=265&theme-id=dark&default-tab=js,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/xiaotiandada/pen/xxZOBvG'>ç­–ç•¥æ¨¡å¼</a> by xiaotiandada\n  (<a href='https://codepen.io/xiaotiandada'>@xiaotiandada</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n\n\n\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- ... --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">></span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">.error-msg</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> red<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 14px<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>registerForm<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>ç”¨æˆ·å<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>å¯†ç <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>æ‰‹æœºå·ç <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>phoneNumber<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">></span></span>submit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n<span class=\"token comment\">&lt;!-- ... --></span></code></pre><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ç»„ç­–ç•¥ç±»å°è£…å…·ä½“çš„éªŒè¯è§„åˆ™</span>\n<span class=\"token keyword\">const</span> strategyForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// æ˜¯å¦ä¸ºç©º</span>\n    <span class=\"token function\">isNotEmpty</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span> errorMsg</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> errorMsg<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// æœ€å°é•¿åº¦</span>\n    <span class=\"token function\">minLength</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">,</span> errorMsg</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> errorMsg<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// æ‰‹æœºå·ç æ ¼å¼</span>\n    <span class=\"token function\">mobileFormat</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span>errorMsg</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">(^1[3|5|8][0-9]{9}$)</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">test</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> errorMsg<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">freeze</span><span class=\"token punctuation\">(</span>strategyForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Validator</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cache <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Validator</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dom<span class=\"token punctuation\">,</span> rules</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> slef <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span>\n    <span class=\"token comment\">// æ·»åŠ é”™è¯¯ä¿¡æ¯æç¤º</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addErrorMsg</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">msg<span class=\"token punctuation\">,</span> dom<span class=\"token punctuation\">,</span> errorMsg</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// å¦‚æœæœ‰é”™è¯¯ä¿¡æ¯</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// å¦‚æœå·²ç»æœ‰äº†é”™è¯¯æç¤º</span>\n            <span class=\"token keyword\">let</span> errorMsgDom <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.error-msg'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>errorMsgDom<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                errorMsgDom<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> errorMsg\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token comment\">// æ²¡æœ‰æç¤ºåˆ›å»º</span>\n                <span class=\"token keyword\">let</span> errorHtml <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">)</span>\n                errorHtml<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'error-msg'</span>\n                errorHtml<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> errorMsg\n                dom<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>errorHtml<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// æ²¡æœ‰é”™è¯¯æç¤º</span>\n            <span class=\"token comment\">// å¦‚æœæœ‰é”™è¯¯æç¤ºä½†æ˜¯tagè¿˜å­˜åœ¨åˆ™æ¸…é™¤</span>\n            <span class=\"token keyword\">let</span> errorMsgDom <span class=\"token operator\">=</span> dom<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.error-msg'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>errorMsgDom<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                errorMsgDom<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> rule<span class=\"token punctuation\">;</span> rule <span class=\"token operator\">=</span> rules<span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">rule</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> strategyArr <span class=\"token operator\">=</span> rule<span class=\"token punctuation\">.</span>strategy<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">':'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">let</span> errorMsg <span class=\"token operator\">=</span> rule<span class=\"token punctuation\">.</span>errorMsg\n\n            slef<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">let</span> strategy <span class=\"token operator\">=</span> strategyArr<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// å–ç¬¬ä¸€ä¸ª ç­–ç•¥å</span>\n                strategyArr<span class=\"token punctuation\">.</span><span class=\"token function\">unshift</span><span class=\"token punctuation\">(</span>dom<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\n                strategyArr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>errorMsg<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">let</span> msg <span class=\"token operator\">=</span> strategyForm<span class=\"token punctuation\">[</span>strategy<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>dom<span class=\"token punctuation\">,</span> strategyArr<span class=\"token punctuation\">)</span>\n                <span class=\"token function\">addErrorMsg</span><span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">,</span> dom<span class=\"token punctuation\">,</span> errorMsg<span class=\"token punctuation\">)</span>\n                <span class=\"token keyword\">return</span> msg\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>rule<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Validator</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">start</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> validatorFunc<span class=\"token punctuation\">;</span> validatorFunc <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> msg <span class=\"token operator\">=</span> <span class=\"token function\">validatorFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>msg<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> msg\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> registerForm <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'registerForm'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">validateFunc</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> validator <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Validator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    validator<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>registerForm<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">strategy</span><span class=\"token operator\">:</span> <span class=\"token string\">'isNotEmpty'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">errorMsg</span><span class=\"token operator\">:</span> <span class=\"token string\">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">strategy</span><span class=\"token operator\">:</span> <span class=\"token string\">'minLength:6'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">errorMsg</span><span class=\"token operator\">:</span> <span class=\"token string\">'ç”¨æˆ·åé•¿åº¦ä¸èƒ½å°äº6ä½'</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    validator<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>registerForm<span class=\"token punctuation\">.</span>password<span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">strategy</span><span class=\"token operator\">:</span> <span class=\"token string\">'minLength:6'</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">errorMsg</span><span class=\"token operator\">:</span><span class=\"token string\">'å¯†ç é•¿åº¦ä¸èƒ½å°äº6ä½'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    validator<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>registerForm<span class=\"token punctuation\">.</span>phoneNumber<span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">strategy</span><span class=\"token operator\">:</span> <span class=\"token string\">'mobileFormat'</span><span class=\"token punctuation\">,</span><span class=\"token literal-property property\">errorMsg</span><span class=\"token operator\">:</span><span class=\"token string\">'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> errorMsg <span class=\"token operator\">=</span> validator<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> errorMsg\n<span class=\"token punctuation\">}</span>\n\nregisterForm<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsubmit</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> errorMsg <span class=\"token operator\">=</span> <span class=\"token function\">validateFunc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>errorMsg<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>errorMsg<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'done'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span></code></pre><h2 id=\"ä¸­ä»‹è€…æ¨¡å¼\">ä¸­ä»‹è€…æ¨¡å¼</h2>\n<p><a href=\"https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F.html\">https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F.html</a></p>\n<p>å®šä¹‰ï¼šä¸­ä»‹è€…æ¨¡å¼çš„ä½œç”¨å°±æ˜¯è§£é™¤å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ç´§è€¦åˆå…³ç³»</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// MVC æ¨¡å¼</span>\n<span class=\"token keyword\">let</span> <span class=\"token constant\">M</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> <span class=\"token constant\">V</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> <span class=\"token constant\">C</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token constant\">M</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> <span class=\"token string\">'Hello World'</span>\n<span class=\"token constant\">V</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">render</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token constant\">M</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// alert(M.data)</span>\n    document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'p'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token constant\">M</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token constant\">C</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">handleOnload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">V</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token constant\">M</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n\nwindow<span class=\"token punctuation\">.</span>onload <span class=\"token operator\">=</span> <span class=\"token constant\">C</span><span class=\"token punctuation\">.</span>handleOnload</code></pre><iframe height=\"265\" style=\"width: 100%;\" scrolling=\"no\" title=\"ä¸­ä»‹è€…æ¨¡å¼\" src=\"https://codepen.io/xiaotiandada/embed/abdBOvp?height=265&theme-id=dark&default-tab=js,result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/xiaotiandada/pen/abdBOvp'>ä¸­ä»‹è€…æ¨¡å¼</a> by xiaotiandada\n  (<a href='https://codepen.io/xiaotiandada'>@xiaotiandada</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>selectPhone<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>é€‰æ‹©æ‰‹æœºé¢œè‰²<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>colorSelect<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>è¯·é€‰æ‹©<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>red<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>çº¢è‰²<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blue<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>è“è‰²<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>é€‰æ‹©å†…å­˜<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memorySelect<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>è¯·é€‰æ‹©<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16G<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>16G<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>32G<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>32G<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">for</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>è¾“å…¥è´­ä¹°æ•°é‡<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>number<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">min</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>numberInput<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span>\n    æ‚¨é€‰æ‹©äº†é¢œè‰²: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>colorInfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/></span></span>\n    æ‚¨é€‰æ‹©äº†å†…å­˜: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memoryInfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/></span></span>\n    æ‚¨è¾“å…¥äº†æ•°é‡: <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>numberInfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>nextBtn<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">disabled</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²å’Œè´­ä¹°æ•°é‡<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> goods <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token string-property property\">\"red|32G\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"red|16G\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"blue|32G\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"blue|16G\"</span><span class=\"token operator\">:</span> <span class=\"token number\">6</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// è·å¾—æ‰€æœ‰èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œæ“ä½œï¼ˆä¸­ä»‹è€…å¿…è®¸è·å¾—å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ï¼‰</span>\n<span class=\"token keyword\">let</span> colorSelect <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'colorSelect'</span> <span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> memorySelect <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'memorySelect'</span> <span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> numberInput <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'numberInput'</span> <span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> colorInfo <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'colorInfo'</span> <span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> memoryInfo <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'memoryInfo'</span> <span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> numberInfo <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'numberInfo'</span> <span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> nextBtn <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'nextBtn'</span> <span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> mediator <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">changed</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">var</span> color <span class=\"token operator\">=</span> colorSelect<span class=\"token punctuation\">.</span>value <span class=\"token comment\">// é¢œè‰²</span>\n            <span class=\"token keyword\">let</span> memory <span class=\"token operator\">=</span> memorySelect<span class=\"token punctuation\">.</span>value<span class=\"token comment\">// å†…å­˜</span>\n            <span class=\"token keyword\">let</span> number <span class=\"token operator\">=</span> numberInput<span class=\"token punctuation\">.</span>value <span class=\"token comment\">// æ•°é‡</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">===</span> colorSelect<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                colorInfo<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> color\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">===</span> memorySelect<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                memoryInfo<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> memory\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>obj <span class=\"token operator\">===</span> numberInput<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                numberInfo<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> number\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>color<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                nextBtn<span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n                nextBtn<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'è¯·é€‰æ‹©æ‰‹æœºé¢œè‰²'</span>\n                <span class=\"token keyword\">return</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>memory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                nextBtn<span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n                nextBtn<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'è¯·é€‰æ‹©å†…å­˜å¤§å°'</span>\n                <span class=\"token keyword\">return</span>\n            <span class=\"token punctuation\">}</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>number <span class=\"token operator\">-</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token number\">0</span> <span class=\"token operator\">!==</span> number <span class=\"token operator\">-</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                nextBtn<span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n                nextBtn<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'è¯·è¾“å…¥æ­£ç¡®çš„è´­ä¹°æ•°é‡'</span>\n                <span class=\"token keyword\">return</span>\n            <span class=\"token punctuation\">}</span>\n\n            nextBtn<span class=\"token punctuation\">.</span>disabled <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            nextBtn<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'æ”¾å…¥è´­ç‰©è½¦'</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\">// ä¸ä¸­ä»‹è€…è”ç³»èµ·æ¥ï¼Œäº‹ä»¶å‡½æ•°</span>\ncolorSelect<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onchange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    mediator<span class=\"token punctuation\">.</span><span class=\"token function\">changed</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">this</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nmemorySelect<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onchange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    mediator<span class=\"token punctuation\">.</span><span class=\"token function\">changed</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">this</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nnumberInput<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onchange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    mediator<span class=\"token punctuation\">.</span><span class=\"token function\">changed</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">this</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre><h2 id=\"å‘å¸ƒè®¢é˜…æ¨¡å¼\">å‘å¸ƒè®¢é˜…æ¨¡å¼</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F.html</span>\n\n<span class=\"token comment\">// å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚</span>\n\n<span class=\"token keyword\">const</span> Event <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ç¼“å­˜åˆ—è¡¨</span>\n  <span class=\"token keyword\">let</span> list <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// ç›‘å¬å‡½æ•°</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">listen</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>list<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      list<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n    list<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>fn<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// è§¦å‘ç›‘å¬</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">trigger</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> key <span class=\"token operator\">=</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">let</span> fns <span class=\"token operator\">=</span> list<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fns <span class=\"token operator\">||</span> fns<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">;</span> fn <span class=\"token operator\">=</span> fns<span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ç§»é™¤ç›‘å¬å‡½æ•°</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">remove</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">key<span class=\"token punctuation\">,</span> fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> fns <span class=\"token operator\">=</span> list<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fns<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      fns <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>fns<span class=\"token punctuation\">.</span>length <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> fns<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">>=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> _fn <span class=\"token operator\">=</span> fns<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>_fn <span class=\"token operator\">===</span> fn<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          fns<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    listen<span class=\"token punctuation\">,</span>\n    trigger<span class=\"token punctuation\">,</span>\n    remove\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">d1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d11111'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">d2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d22222'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">d3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'d33333'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'color'</span><span class=\"token punctuation\">,</span> d1<span class=\"token punctuation\">)</span>\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'color'</span><span class=\"token punctuation\">,</span> d2<span class=\"token punctuation\">)</span>\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'color'</span><span class=\"token punctuation\">,</span> d3<span class=\"token punctuation\">)</span>\n\n\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'size'</span><span class=\"token punctuation\">,</span> d1<span class=\"token punctuation\">)</span>\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'size'</span><span class=\"token punctuation\">,</span> d2<span class=\"token punctuation\">)</span>\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'size'</span><span class=\"token punctuation\">,</span> d1<span class=\"token punctuation\">)</span>\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'size'</span><span class=\"token punctuation\">,</span> d3<span class=\"token punctuation\">)</span>\n\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">trigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'color'</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----'</span><span class=\"token punctuation\">)</span>\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">trigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'size'</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'----'</span><span class=\"token punctuation\">)</span>\nEvent<span class=\"token punctuation\">.</span><span class=\"token function\">trigger</span><span class=\"token punctuation\">(</span><span class=\"token string\">'color'</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\">// d11111</span>\n<span class=\"token comment\">// d22222</span>\n<span class=\"token comment\">// d33333</span>\n<span class=\"token comment\">// ----</span>\n<span class=\"token comment\">// d22222</span>\n<span class=\"token comment\">// d33333</span>\n<span class=\"token comment\">// ----</span>\n<span class=\"token comment\">// d11111</span>\n<span class=\"token comment\">// d22222</span>\n<span class=\"token comment\">// d33333</span></code></pre><h2 id=\"è¿­ä»£å™¨æ¨¡å¼\">è¿­ä»£å™¨æ¨¡å¼</h2>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F.html</span>\n<span class=\"token comment\">// å®šä¹‰ï¼šè¿­ä»£å™¨æ¨¡å¼æ˜¯æŒ‡æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</span>\n\n<span class=\"token comment\">// å†…éƒ¨è¿­ä»£å™¨</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">each</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">array<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> len <span class=\"token operator\">=</span> array<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">callback</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> array<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">break</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>val <span class=\"token operator\">+</span> <span class=\"token string\">' - '</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-----'</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">each</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">val<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">===</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n  <span class=\"token punctuation\">}</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>val <span class=\"token operator\">+</span> <span class=\"token string\">' - '</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// å¤–éƒ¨è¿­ä»£å™¨</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Iterator</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">obj</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> current <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">next</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>current <span class=\"token operator\">></span> obj<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n    current <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">isDone</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> current <span class=\"token operator\">>=</span> obj<span class=\"token punctuation\">.</span>length\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getCurrentItem</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> obj<span class=\"token punctuation\">[</span>current<span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    next<span class=\"token punctuation\">,</span>\n    isDone<span class=\"token punctuation\">,</span>\n    getCurrentItem\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-----'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> iterator <span class=\"token operator\">=</span> <span class=\"token function\">Iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\niterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">isDone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\niterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\niterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\niterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\niterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">getCurrentItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\niterator<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>iterator<span class=\"token punctuation\">.</span><span class=\"token function\">isDone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n\n<span class=\"token comment\">// 1 - 0</span>\n<span class=\"token comment\">// 2 - 1</span>\n<span class=\"token comment\">// 3 - 2</span>\n<span class=\"token comment\">// 4 - 3</span>\n<span class=\"token comment\">// 5 - 4</span>\n<span class=\"token comment\">// -----</span>\n<span class=\"token comment\">// 1 - 0</span>\n<span class=\"token comment\">// 2 - 1</span>\n<span class=\"token comment\">// 3 - 2</span>\n<span class=\"token comment\">// -----</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 1</span>\n<span class=\"token comment\">// 2</span>\n<span class=\"token comment\">// false</span>\n<span class=\"token comment\">// 3</span>\n<span class=\"token comment\">// 4</span>\n<span class=\"token comment\">// 5</span>\n<span class=\"token comment\">// undefined</span>\n<span class=\"token comment\">// true</span></code></pre><h2 id=\"æ¡¥æ¥æ¨¡å¼\">æ¡¥æ¥æ¨¡å¼</h2>\n<p><a href=\"https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F.html\">https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F.html</a></p>\n<p>å®šä¹‰ï¼šæ¡¥æ¥æ¨¡å¼ï¼ˆBridgeï¼‰å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</p>\n<h2 id=\"å¤–è§‚æ¨¡å¼\">å¤–è§‚æ¨¡å¼</h2>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>å¤–è§‚æ¨¡å¼<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>foo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>foo1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>foo2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F.html</span>\n<span class=\"token comment\">// https://natee.gitbooks.io/javascript-design-patterns/facade-pattern.html</span>\n<span class=\"token comment\">// å®šä¹‰ï¼šå¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›äº†ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œæ­¤æ¨¡å—å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚</span>\n\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">addEvent</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">el<span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">,</span> fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">.</span>addEventListener<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    el<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>el<span class=\"token punctuation\">.</span>attachEvent<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    el<span class=\"token punctuation\">.</span><span class=\"token function\">attachEvent</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">on</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>ev<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> fn<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    el<span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">on</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>ev<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> fn\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// æ²¡æµ‹è¯•</span>\n<span class=\"token keyword\">let</span> <span class=\"token constant\">N</span> <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token constant\">N</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token constant\">N</span><span class=\"token punctuation\">.</span>tools <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>stopPropagation<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      e<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      e<span class=\"token punctuation\">.</span>cancelBubble <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>preventDefault<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      e<span class=\"token punctuation\">.</span>returnValue <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">stopEvent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token function\">addEvent</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">setStyles</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">elements<span class=\"token punctuation\">,</span> styles</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> len <span class=\"token operator\">=</span> elements<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> len<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> element <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>elements<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> property <span class=\"token keyword\">in</span> styles<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        element<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">[</span>property<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> styles<span class=\"token punctuation\">[</span>property<span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">setStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'foo1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'foo2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">backgroundColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'red'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">'150px'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'200px'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h2 id=\"è®¿é—®è€…æ¨¡å¼\">è®¿é—®è€…æ¨¡å¼</h2>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F.html</span>\n<span class=\"token comment\">// æ²¡å¤ªç†è§£...</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Visitor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">visit</span>  <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ConceteElement</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    ConceteElement<span class=\"token punctuation\">.</span><span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ConceteElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">doSomething</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is a element'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">accept</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">visitor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    visitor<span class=\"token punctuation\">.</span><span class=\"token function\">visit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">let</span> visitor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Visitor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> conceteElement <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConceteElement</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nconceteElement<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span>visitor<span class=\"token punctuation\">)</span>\n</code></pre><h2 id=\"æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼\">æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼</h2>\n<p>å®šä¹‰ï¼šæ¨¡æ¿æ–¹æ³•æ¨¡å¼ç”±äºŒéƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æŠ½è±¡çˆ¶ç±»ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å…·ä½“å®ç°çš„å­ç±»ï¼Œä¸€èˆ¬çš„æƒ…å†µä¸‹æ˜¯æŠ½è±¡çˆ¶ç±»å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶ï¼ŒåŒ…æ‹¬å®ç°ä¸€äº›å…¬å…±æ–¹æ³•åŠå°è£…å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåºï¼Œå­ç±»å¯ä»¥ç»§æ‰¿è¿™ä¸ªçˆ¶ç±»ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼Œä»è€Œå®ç°è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A8%A1%E7%89%88%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F.html</span>\n\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ITInterview</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">ITInterview</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">writeTest</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is a write test'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">ITInterview</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">technicalInterView</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is a technical interview'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">ITInterview</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">leader</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is a leader interview'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">ITInterview</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">waitNotice</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'wait notice'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">ITInterview</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">init</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">writeTest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">technicalInterView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">leader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">waitNotice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> itInterview <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ITInterview</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nitInterview<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\">// baidu</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">BaiDuITInterview</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">BaiDuITInterview</span><span class=\"token punctuation\">.</span>prototype <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ITInterview</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token class-name\">BaiDuITInterview</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">writeTest</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is a baidu write test'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">BaiDuITInterview</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">technicalInterView</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'this is a baidu technical interview'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">const</span> baiduItInterview <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BaiDuITInterview</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nbaiduItInterview<span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre><h2 id=\"ç»„åˆæ¨¡å¼\">ç»„åˆæ¨¡å¼</h2>\n<p>å®šä¹‰ï¼šç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F.html</span>\n<span class=\"token comment\">// å®šä¹‰ï¼šç»„åˆæ¨¡å¼ï¼ˆCompositeï¼‰å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</span>\n\n\n<span class=\"token comment\">// å®šä¹‰ç»„åˆå¯¹è±¡ï¼ˆæ–‡ä»¶å¤¹ï¼‰</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">Folder</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>files <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Folder</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Folder</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">scan</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å¼€å§‹æ–‡ä»¶æ‰«æ:'</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">,</span> files <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">;</span> file <span class=\"token operator\">=</span> files<span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        file<span class=\"token punctuation\">.</span><span class=\"token function\">scan</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span> \n\n<span class=\"token comment\">//å®šä¹‰å¶å­å¯¹è±¡ï¼ˆæ–‡ä»¶ï¼‰</span>\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">File</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">File</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'æ–‡ä»¶ä¸‹é¢ä¸èƒ½å†æ·»åŠ æ–‡ä»¶'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">File</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">scan</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å¼€å§‹æ‰«ç„ï¼š'</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">let</span> folder <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Folder</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å‰ç«¯å­¦ä¹ '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> folder1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Folder</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JSå­¦ä¹ '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> folder2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Folder</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JQå­¦ä¹ '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> file1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JSè®¾è®¡æ¨¡å¼'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> file2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token string\">'JQå®æˆ˜'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> file3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å‰ç«¯æ€§èƒ½'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfolder1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>file1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfolder2<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>file2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nfolder<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>folder1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfolder<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>folder2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfolder<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>file3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfolder<span class=\"token punctuation\">.</span><span class=\"token function\">scan</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// å¼€å§‹æ–‡ä»¶æ‰«æ:å‰ç«¯å­¦ä¹ </span>\n<span class=\"token comment\">// å¼€å§‹æ–‡ä»¶æ‰«æ:JSå­¦ä¹ </span>\n<span class=\"token comment\">// å¼€å§‹æ‰«ç„ï¼šJSè®¾è®¡æ¨¡å¼</span>\n<span class=\"token comment\">// å¼€å§‹æ–‡ä»¶æ‰«æ:JQå­¦ä¹ </span>\n<span class=\"token comment\">// å¼€å§‹æ‰«ç„ï¼šJQå®æˆ˜</span>\n<span class=\"token comment\">// å¼€å§‹æ‰«ç„ï¼šå‰ç«¯æ€§èƒ½</span></code></pre><h2 id=\"å¤‡å¿˜å½•æ¨¡å¼\">å¤‡å¿˜å½•æ¨¡å¼</h2>\n<p>å®šä¹‰ï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·å°±å¯ä»¥å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F.html</span>\n<span class=\"token comment\">// å®šä¹‰ï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·å°±å¯ä»¥å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">render</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">page</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> cache <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">page</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'page'</span><span class=\"token punctuation\">,</span> page<span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'cache'</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>cache<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cache<span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>cache<span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hi\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n\n      cache<span class=\"token punctuation\">[</span>page<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> data\n      <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n\n<span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n</code></pre><h2 id=\"èŒè´£é“¾æ¨¡å¼\">èŒè´£é“¾æ¨¡å¼</h2>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F.html</span>\n\n<span class=\"token comment\">// å®šä¹‰ï¼šèŒè´£é“¾æ¨¡å¼ï¼ˆChain of responsibilityï¼‰æ˜¯ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™ä¸ªå¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†ä»–ä¸ºæ­¢ã€‚èŒè´£é“¾æ¨¡å¼çš„åå­—éå¸¸å½¢è±¡ï¼Œä¸€ç³»åˆ—å¯èƒ½ä¼šå¤„ç†è¯·æ±‚çš„å¯¹è±¡è¢«è¯¥è¿æ¥æˆä¸€æ¡é“¾ï¼Œè¯·æ±‚åœ¨è¿™äº›å¯¹è±¡ä¹‹é—´ä¾æ¬¡ä¼ é€’ï¼Œç›´åˆ°é‡åˆ°ä¸€ä¸ªå¯ä»¥å¤„ç†å®ƒçš„å¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠè¿™äº›å¯¹è±¡æˆä¸ºé“¾ä¸­çš„èŠ‚ç‚¹ã€‚</span>\n\n<span class=\"token comment\">// 500 å…ƒå®¢æˆ·è®¢å•</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">order500</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">orderType<span class=\"token punctuation\">,</span> pay<span class=\"token punctuation\">,</span> stock</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>orderType <span class=\"token operator\">===</span> <span class=\"token number\">1</span> <span class=\"token operator\">&amp;&amp;</span> pay<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'500 rmb deposit, get 100 coupon '</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'nextSuccessor'</span> <span class=\"token comment\">// unknow the next node but always pass to next.</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 200 å…ƒå®¢æˆ·è®¢å•</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">order200</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">orderType<span class=\"token punctuation\">,</span> pay<span class=\"token punctuation\">,</span> stock</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>orderType <span class=\"token operator\">===</span> <span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> pay<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'200 rmb deposit , get 50 coupon'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'nextSuccessor'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// æ— é¢„çº¦å®¢æˆ·è®¢å•</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">orderNormal</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">orderType<span class=\"token punctuation\">,</span> pay<span class=\"token punctuation\">,</span> stock</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>stock <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'normal buy no coupon'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'the stock lack'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token function-variable function\">Chain</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fn</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fn <span class=\"token operator\">=</span> fn\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>successor <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Chain</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">setNextSuccessor</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">successor</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>successor <span class=\"token operator\">=</span> successor\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">Chain</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">passRequest</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> ret <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fn</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ret <span class=\"token operator\">===</span> <span class=\"token string\">'nextSuccessor'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>successor <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>successor<span class=\"token punctuation\">.</span><span class=\"token function\">passRequest</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>successor<span class=\"token punctuation\">,</span> arguments<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> ret\n<span class=\"token punctuation\">}</span>\n\n\n\n<span class=\"token comment\">// ç°åœ¨æˆ‘ä»¬æŠŠ3ä¸ªè®¢å•å‡½æ•°åˆ†åˆ«åŒ…è£…æˆèŒè´£é“¾çš„èŠ‚ç‚¹</span>\n<span class=\"token keyword\">var</span> chainOrder500 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Chain</span><span class=\"token punctuation\">(</span>order500<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> chainOrder200 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Chain</span><span class=\"token punctuation\">(</span>order200<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> chainOrderNormal <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Chain</span><span class=\"token punctuation\">(</span>orderNormal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// è¿™é‡Œæˆ‘ä»¬æŠŠä¸Šé¢å°è£…çš„èŠ‚ç‚¹è¿æˆä¸€æ¡çº¿ï¼Œä¾æ¬¡åˆ¤æ–­æ‰§è¡Œ</span>\nchainOrder500<span class=\"token punctuation\">.</span><span class=\"token function\">setNextSuccessor</span><span class=\"token punctuation\">(</span>chainOrder200<span class=\"token punctuation\">)</span>\nchainOrder200<span class=\"token punctuation\">.</span><span class=\"token function\">setNextSuccessor</span><span class=\"token punctuation\">(</span>chainOrderNormal<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// æµ‹è¯•ä»£ç </span>\nchainOrder500<span class=\"token punctuation\">.</span><span class=\"token function\">passRequest</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 500 rmb deposit, get 100 coupon</span>\nchainOrder500<span class=\"token punctuation\">.</span><span class=\"token function\">passRequest</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 200 rmb deposit , get 50 coupon</span>\n\nchainOrderNormal<span class=\"token punctuation\">.</span><span class=\"token function\">passRequest</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 200 rmb deposit , get 50 coupon</span>\n</code></pre><h2 id=\"çŠ¶æ€æ¨¡å¼\">çŠ¶æ€æ¨¡å¼</h2>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F.html</span>\n<span class=\"token comment\">// å®šä¹‰ï¼šçŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥é€šè¿‡ç®¡ç†å…¶çŠ¶æ€ä»è€Œä½¿å¾—åº”ç”¨ç¨‹åºä½œå‡ºç›¸åº”çš„å˜åŒ–ã€‚</span>\n\n<span class=\"token keyword\">var</span> trafficLight <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> currentLight <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">change</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">light</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            currentLight <span class=\"token operator\">=</span> light<span class=\"token punctuation\">;</span>\n            currentLight<span class=\"token punctuation\">.</span><span class=\"token function\">go</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// çº¢ç¯</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">RedLight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">RedLight</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">go</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"this is red light\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ç»¿ç¯</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">GreenLight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">GreenLight</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">go</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"this is green light\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// é»„ç¯</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">YellowLight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">YellowLight</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">go</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"this is yellow light\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\ntrafficLight<span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">RedLight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// this is red light</span>\ntrafficLight<span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">YellowLight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// this is yellow light</span>\n\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Menu</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n<span class=\"token class-name\">Menu</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">toggle</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">state</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> menuStates <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">\"show\"</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"the menu is showing\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">\"hide\"</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"the menu is hiding\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> menu <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Menu</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmenu<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span>menuStates<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmenu<span class=\"token punctuation\">.</span><span class=\"token function\">toggle</span><span class=\"token punctuation\">(</span>menuStates<span class=\"token punctuation\">.</span>hide<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><h2 id=\"äº«å…ƒæ¨¡å¼\">äº«å…ƒæ¨¡å¼</h2>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// https://fanerge.github.io/2017/js%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F.html</span>\n\n<span class=\"token comment\">// å®šä¹‰ï¼šäº«å…ƒæ¨¡å¼æ˜¯ä¸€ç§ç”¨äºæ€§èƒ½ä¼˜åŒ–çš„æ¨¡å¼ï¼Œå¦‚æœç³»ç»Ÿä¸­å› ä¸ºåˆ›å»ºäº†å¤§é‡ç±»ä¼¼çš„å¯¹è±¡è€Œå¯¼è‡´å†…å­˜ä¸è¶³æˆ–å ç”¨è¿‡é«˜è¿™ç§æ¨¡å¼å°±éå¸¸æœ‰ç”¨äº†ã€‚</span>\n\n<span class=\"token comment\">// å®šä¹‰å¡‘æ–™æ¨¡ç‰¹çš„æ„é€ å‡½æ•°</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">Model</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">sex</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sex <span class=\"token operator\">=</span> sex<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ä¸ºæ¨¡ç‰¹æ‹ç…§</span>\n<span class=\"token class-name\">Model</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">takePhoto</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'sex='</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sex <span class=\"token operator\">+</span> <span class=\"token string\">'underwear='</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>underwear <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// å®ä¾‹åŒ–ä¸€ä¸ªç”·æ¨¡ç‰¹ å’Œ ä¸€ä¸ªå¥³æ¨¡ç‰¹</span>\n<span class=\"token keyword\">var</span> maleModel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Model</span><span class=\"token punctuation\">(</span><span class=\"token string\">'male'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> female    <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Model</span><span class=\"token punctuation\">(</span><span class=\"token string\">'female'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span><span class=\"token number\">50</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// åˆ†åˆ«ä¸ºæ¨¡ç‰¹æ¢ä¸Š 50 ä»¶å†…è¡£ ä»¥åŠ ç…§ç›¸</span>\n    maleModel<span class=\"token punctuation\">.</span>underwear <span class=\"token operator\">=</span> <span class=\"token string\">'underwear'</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">;</span>\n    maleModel<span class=\"token punctuation\">.</span><span class=\"token function\">takePhoto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span><span class=\"token number\">50</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// åˆ†åˆ«ä¸ºæ¨¡ç‰¹æ¢ä¸Š 50 ä»¶å†…è¡£ ä»¥åŠ ç…§ç›¸</span>\n    female<span class=\"token punctuation\">.</span>underwear <span class=\"token operator\">=</span> <span class=\"token string\">'underwear'</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">;</span>\n    female<span class=\"token punctuation\">.</span><span class=\"token function\">takePhoto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n\n\n<span class=\"token keyword\">let</span> toolTipFactory <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> tooplTipPool <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">create</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tooplTipPool<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> div <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span>\n        document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>div<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> div\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> tooplTipPool<span class=\"token punctuation\">.</span><span class=\"token function\">shift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">recover</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tooltipDOm</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      tooplTipPool<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>tooltipDOm<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 2</span>\n<span class=\"token keyword\">let</span> arr <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">;</span> str <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> toolTip <span class=\"token operator\">=</span> toolTipFactory<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  toolTip<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> str\n  arr<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>toolTip<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> toolTip<span class=\"token punctuation\">;</span> toolTip <span class=\"token operator\">=</span> arr<span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  toolTipFactory<span class=\"token punctuation\">.</span><span class=\"token function\">recover</span><span class=\"token punctuation\">(</span>toolTip<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 11</span>\n<span class=\"token comment\">// 22</span>\n<span class=\"token comment\">// 1111</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> str<span class=\"token punctuation\">;</span> str <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'d'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'e'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'f'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> toolTip <span class=\"token operator\">=</span> toolTipFactory<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  toolTip<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> str\n<span class=\"token punctuation\">}</span></code></pre>","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true}