{"pageProps":{"post":{"id":"MDU6SXNzdWU5MjU2MzM2ODM=","url":"https://github.com/xiaotiandada/blog/issues/79","title":"document.createComment API","updatedAt":"2021-06-20T16:20:50Z","createdAt":"2021-06-20T16:20:50Z","body":"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createComment\r\n\r\ncreateComment() 方法用来创建并返回一个注释节点.\r\n\r\n``` javascript\r\nvar commentNode = document.createComment('注释')\r\n\r\ndocument.querySelector('body').appendChild(commentNode)\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/24250627/122681283-15b97d00-d226-11eb-9742-b1c0695f8278.png)\r\n\r\napi 是在看 snabbdom 源码的时候发现的\r\n\r\n```javascript\r\n// init.ts\r\n\r\nconst sel = vnode.sel;\r\nif (sel === \"!\") {\r\n  if (isUndef(vnode.text)) {\r\n    vnode.text = \"\";\r\n  }\r\n  vnode.elm = api.createComment(vnode.text!);\r\n}\r\n\r\nh(\"!\", \"注释\"),\r\n```\r\n","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&v=4"},"html":"<p><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createComment\">https://developer.mozilla.org/zh-CN/docs/Web/API/Document/createComment</a></p>\n<p>createComment() 方法用来创建并返回一个注释节点.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> commentNode <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createComment</span><span class=\"token punctuation\">(</span><span class=\"token string\">'注释'</span><span class=\"token punctuation\">)</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>commentNode<span class=\"token punctuation\">)</span></code></pre><p><img src=\"https://user-images.githubusercontent.com/24250627/122681283-15b97d00-d226-11eb-9742-b1c0695f8278.png\" alt=\"image\"></p>\n<p>api 是在看 snabbdom 源码的时候发现的</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// init.ts</span>\n\n<span class=\"token keyword\">const</span> sel <span class=\"token operator\">=</span> vnode<span class=\"token punctuation\">.</span>sel<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>sel <span class=\"token operator\">===</span> <span class=\"token string\">\"!\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">isUndef</span><span class=\"token punctuation\">(</span>vnode<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    vnode<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  vnode<span class=\"token punctuation\">.</span>elm <span class=\"token operator\">=</span> api<span class=\"token punctuation\">.</span><span class=\"token function\">createComment</span><span class=\"token punctuation\">(</span>vnode<span class=\"token punctuation\">.</span>text<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"!\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"注释\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></code></pre>","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true}