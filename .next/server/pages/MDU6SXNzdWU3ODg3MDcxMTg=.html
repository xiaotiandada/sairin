<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>vue个人小项目总结 - Blog(issues)</title><meta property="og:type" content="artical"/><meta property="og:title" content="vue个人小项目总结"/><meta property="og:image" content="
        https://og-image.vercel.app/vue个人小项目总结.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fvercel-triangle-black.svg
      "/><meta property="article:published_time" content="2021-01-19T04:58:16Z"/><meta property="article:author" content="xiaotiandada"/><meta name="twitter:card" content="vue个人小项目总结"/><meta name="twitter:title" content="vue个人小项目总结"/><meta name="twitter:image" content="
        https://og-image.vercel.app/vue个人小项目总结.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fvercel-triangle-black.svg
      "/><meta name="next-head-count" content="4"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;display=swap" rel="stylesheet"/><link rel="preload" href="/_next/static/css/b78bfc7021c6877d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b78bfc7021c6877d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-2190439a97dca295.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2aac380799256b7f.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...path%5D-e0b96643230aac68.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_buildManifest.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_ssgManifest.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div class="container mx-auto mt-24 max-w-2xl px-4 sm:px-0"><div><div class="flex my-8 font-bold"><a href="/">Blog(issues)</a></div></div><div class="mb-8"><div class="text-3xl font-medium">vue个人小项目总结</div><div class="flex mt-4 items-center gap-2"><img class="w-8 h-8 rounded-full" src="https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&amp;v=4"/><a target="_blank" href="https://github.com/xiaotiandada">xiaotiandada</a><a class="underline text-sm" target="_blank" href="https://github.com/xiaotiandada/blog/issues/9">View on GitHub</a></div><div class="my-8"><div class="flex gap-4 flex-wrap"></div></div></div><div class="post-body"><p>2018-06-22 13:14:50</p>
<h2 id="简介">简介</h2>
<p>自己写了一个vue小项目总结总结(为了节省篇幅和大家阅读的时间直接进入正题 认真脸！)</p>
<hr>
<blockquote>
<p>项目详情可以查看的我Github仓库<a href="https://github.com/xiaotiandada/My-music">地址</a></p>
</blockquote>
<blockquote>
<p><a href="http://123.207.60.132:8081/">项目预览地址</a></p>
</blockquote>
<ul>
<li>用户登录帐号密码都是11</li>
<li>后台管理登录也是11 </li>
<li>(其实还有别的帐号密码,如果您有心情可以查看api自己用Postman注册,用户注册自己可以直接在页面上注册)</li>
</ul>
<blockquote>
<p>github描述文档写了使用了写技术栈 和 界面截图</p>
</blockquote>
<!-- more -->

<h2 id="功能总结">功能总结</h2>
<blockquote>
<h3 id="前端api调用">前端api调用</h3>
</blockquote>
<pre class="language-bash"><code class="language-bash"># api
import axios from 'axios'
import store from '@/store/store'

export default () => {
  return axios.create({
    baseURL: `http://123.207.60.132:8081/`,
    headers: {
      Authorization: `Bearer ${store.state.token}`
    }
  })
}

import Api from '@/services/Api'

export default {
  userLogin(credentials) {
    return Api().post('/userLogin', credentials)
  }
}

# music api

import axios from 'axios'
export default () => {
  return axios.create({
    baseURL: `http://123.207.60.132:3000/`
  })
}

import Api from '@/services/musicApi'

export default {
  getTopList() {
    return Api().get('/top/list?idx=3')
  }
}</code></pre><ul>
<li>更多内容<a href="https://github.com/xiaotiandada/My-music/tree/master/client/src/services">地址</a></li>
</ul>
<blockquote>
<h3 id="前端vuex状态管理">前端vuex状态管理</h3>
</blockquote>
<pre class="language-bash"><code class="language-bash">import Vue from 'vue'
import Vuex from 'vuex'
import createPersistedState from 'vuex-persistedstate'

Vue.use(Vuex)

export default new Vuex.Store({
  strict: true,
  plugins: [createPersistedState()],
  state: {
    token: null,
    user: null,
    isUserLoggedIn: false
  },

  mutations: {
    setToken(state, token) {
      state.token = token
      state.isUserLoggedIn = !!(token)
    },
    setUser(state, user) {
      state.user = user
    }
  },

  actions: {
    setToken({ commit }, token) {
      commit('setToken', token)
    },
    setUser({ commit }, user) {
      commit('setUser', user)
    }
  }
})</code></pre><ul>
<li>更多内容<a href="https://github.com/xiaotiandada/My-music/tree/master/client/src/store">地址</a></li>
</ul>
<blockquote>
<h3 id="前端界面">前端界面</h3>
</blockquote>
<pre class="language-bash"><code class="language-bash"># 组件使用
<v-slider :sliderImg="sliderImg"></v-slider>

# 组件引入
 import VSlider from './Slider/Index'

export default {
    # 声明组件
    components: {
        VSlider
    },
    data() {
        return {
            sliderImg: [
                {
                src: 'item1'
                },
                {
                src: 'item2'
                },
                {
                src: 'item3'
                },
                {
                src: 'item4'
                }
            ]
        }
    }
}</code></pre><ul>
<li>前端页面基本都是按照这样的方式写的 更多内容<a href="https://github.com/xiaotiandada/My-music/tree/master/client/src/views">地址</a></li>
</ul>
<blockquote>
<h3 id="后台界面">后台界面</h3>
</blockquote>
<ul>
<li><p>后台界面除了按照前端页面写的以外还用了<a href="https://github.com/PanJiaChen/vue-element-admin">vue-element-admin</a>后台界面的写法</p>
</li>
<li><p>其中侧边栏是根据 router.js 配置的路由并且根据权限动态生成的，这样就省去了写一遍路由还要手动再写一次侧边栏这种麻烦事，但也遇到了一个问题，路由可能会有多层嵌套，很多人反馈自己的侧边栏会有三级，甚至还有五级的。所以重构了一下侧边栏，使用了递归组件，这样不管你多少级，都能愉快的显示了。<a href="https://juejin.im/post/593121aa0ce4630057f70d35#heading-3">文章地址</a> 复制的hhhh</p>
</li>
<li><p>页面还用了icon<a href="https://juejin.im/post/59bb864b5188257e7a427c09">文章地址</a></p>
</li>
<li><p>主页显示用了<a href="https://github.com/ElemeFE/v-charts">v-charts图表组件</a> 这个基本的使用挺简单的看看文档就ok了 不用另外写文章了</p>
</li>
<li><p>更多内容<a href="https://github.com/xiaotiandada/My-music/tree/master/client/src/views">地址</a></p>
</li>
</ul>
<blockquote>
<h3 id="前端router">前端router</h3>
</blockquote>
<pre class="language-bash"><code class="language-bash">import Vue from 'vue'
import Router from 'vue-router'
Vue.use(Router)

export const constantRouterMap = [
  { path: '*', redirect: '/404', hidden: true }
]

export default new Router({
  mode: 'history', // require service support
  scrollBehavior: () => ({ y: 0 }),
  routes: constantRouterMap
})</code></pre><ul>
<li>更多内容<a href="https://github.com/xiaotiandada/My-music/tree/master/client/src/router">地址</a></li>
</ul>
<blockquote>
<h3 id="后端基本服务">后端基本服务</h3>
</blockquote>
<pre class="language-bash"><code class="language-bash">const express = require('express')
const app = express()
const config = require('./config/config')

const fs = require('fs')
const path = require('path')
require('./router/index.js')(app)
app.use(express.static(path.resolve(__dirname, './dist')))

app.get('*', function(req, res) {
    const html = fs.readFileSync(path.resolve(__dirname, './dist/index.html'), 'utf-8')
    res.send(html)
})

app.listen(config.port, function () {
  console.log(`server run ${config.port} port`)
})</code></pre><ul>
<li><p>后台主要使用nodejs express mongodb提供服务</p>
</li>
<li><p>功能 用户登录注册</p>
</li>
<li><p>功能 管理员登录注册</p>
</li>
<li><p>用户的密码加密</p>
</li>
<li><p>更多内容<a href="https://github.com/xiaotiandada/My-music/blob/master/service/app.js">地址</a></p>
</li>
</ul>
<blockquote>
<h3 id="后端model">后端model</h3>
</blockquote>
<pre class="language-bash"><code class="language-bash">const mongoose = require('mongoose')
const Schema = mongoose.Schema
const bcrypt =require('bcryptjs')  // 密码加密
let SALT_WORK_FACTOR = 10
const config = require('../config/config')
mongoose.connect(config.database)


var UserSchema = new Schema({
  userName: {
    type: String,
    unique: true,  // 不重复
    require: true  // 不为空
  }
})

// 在保存密码之前用bcrypt加密保证密码只有用户知道
UserSchema.pre('save', function (next){
  // 保存this指向
  let _this = this
  // 判断是否为最新
  if(!_this.isModified('password')){
      return next()
  }
  // 加密EMMM 产生一个salt
  bcrypt.genSalt(SALT_WORK_FACTOR, function (err, salt){
    if(err){
      return next(err)
    }

    // 结合salt 生成 hash
    bcrypt.hash(_this.password, salt, function (err, hash) {
      if(err){
        return next(err)
      }

      // 用hash覆盖明文密码
      _this.password = hash
      next()
    })
  })
})

// 通过bcrypt的compare方法，对再次传入的密码和数据库中保存的加密后的密码进行比较，如果匹配，则登录成功 isMatch 为布尔值
// mongoose 模型扩展 在 methods 对象上扩展
UserSchema.methods.comparePassword = function (candidatePassword, cb) {
  bcrypt.compare(candidatePassword, this.password, function (err, isMatch) {
    if (err) {
      return cb(err);
    }

    cb(null, isMatch);
  });
};
module.exports = mongoose.model('User', UserSchema)</code></pre><ul>
<li><p>使用mongoose Schema定义数据模型</p>
</li>
<li><p>通过bcrypt密码加密</p>
</li>
<li><p>扩展方法 对密码加密</p>
</li>
<li><p>更多内容<a href="https://github.com/xiaotiandada/My-music/tree/master/service/model">地址</a></p>
</li>
</ul>
<blockquote>
<h3 id="后端controllers">后端controllers</h3>
</blockquote>
<pre class="language-bash"><code class="language-bash">const User = require('../model/User')
const AdminUser = require('../model/AdminUser')
const jwt = require('jsonwebtoken')
const config = require('../config/config')


// token
function jwtSignUser(user) {
  const ONE_WEEK = 60 * 60 * 24 * 7
  return jwt.sign(user, config.authentication.jwtSecret, {
    expiresIn: ONE_WEEK
  })
}

module.exports = {
  async userLogin(req, res) {
    try {
      await User.findOne({
        userName: req.body.userName
      }, function (err, user) {
        .........
      })
    }
  }
}</code></pre><ul>
<li>登录成功返回</li>
</ul>
<pre class="language-bash"><code class="language-bash">success: true,
message: '登录成功',
token: 'token值'</code></pre><ul>
<li>登录成功返回</li>
</ul>
<pre class="language-bash"><code class="language-bash">success: false,
message: '登录失败', (或其他信息详情看文件)
token: ''</code></pre><ul>
<li>对用户的密码判断</li>
</ul>
<pre class="language-bash"><code class="language-bash"> user.comparePassword(req.body.pass, (err, isMatch) => {
     ...
 }</code></pre><ul>
<li>更多内容<a href="https://github.com/xiaotiandada/My-music/tree/master/service/controllers">地址</a></li>
</ul>
<hr>
<blockquote>
<h3 id="总结">总结</h3>
</blockquote>
<ul>
<li><p>通过上面的练习学习了更多新知识</p>
</li>
<li><p>更加理解前后端的交互</p>
</li>
<li><p>加强了技术掌握程度</p>
</li>
<li><p>还有很多不符合现在开发的规范</p>
</li>
<li><p>代码不够精简干练</p>
</li>
<li><p>基础知识掌握不牢固</p>
</li>
<li><p>设计审美水平需要提升</p>
</li>
<li><p>......</p>
</li>
</ul>
<p>大概就是这么多吧, 项目还有很多部规范的地方以后会慢慢改正, 虽然是个人里练习的项目, 自己还是话了很多时间和心血</p>
<p>最后 最后 最后 说一个厚脸皮的话 小哥哥小姐姐如果觉得不错的话可以给小生点一个 <a href="https://github.com/xiaotiandada/My-music">Star</a> 嘛 谢谢哇QAQ~~</p>
<p>自己马上就要实习了 有大佬看上带走的吗！QAQ</p>
</div><hr class="my-12"/><div class="font-sans"><div class="mb-12"><a target="_blank" href="https://github.com/xiaotiandada/blog/issues/9" class="font-medium border border-gray-700 hover:bg-gray-700 hover:text-gray-100 transition-all text-gray-700 text-sm rounded px-4 py-2">Add comment</a></div></div><div class="my-12"><div class="text-sm">Powered by <a class="underline" target="_blank" href="https://github.com/djyde/sairin">Sairin</a></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"MDU6SXNzdWU3ODg3MDcxMTg=","url":"https://github.com/xiaotiandada/blog/issues/9","title":"vue个人小项目总结","updatedAt":"2021-01-19T04:58:16Z","createdAt":"2021-01-19T04:58:16Z","body":"2018-06-22 13:14:50\r\n\r\n## 简介\r\n\r\n自己写了一个vue小项目总结总结(为了节省篇幅和大家阅读的时间直接进入正题 认真脸！)\r\n\r\n---\r\n\r\n\u003e 项目详情可以查看的我Github仓库[地址](https://github.com/xiaotiandada/My-music)\r\n\r\n\u003e [项目预览地址](http://123.207.60.132:8081/)\r\n\r\n- 用户登录帐号密码都是11\r\n- 后台管理登录也是11 \r\n- (其实还有别的帐号密码,如果您有心情可以查看api自己用Postman注册,用户注册自己可以直接在页面上注册)\r\n\r\n\u003e github描述文档写了使用了写技术栈 和 界面截图\r\n\r\n\u003c!-- more --\u003e\r\n\r\n## 功能总结\r\n\r\n\u003e ### 前端api调用\r\n\r\n``` bash\r\n# api\r\nimport axios from 'axios'\r\nimport store from '@/store/store'\r\n\r\nexport default () =\u003e {\r\n  return axios.create({\r\n    baseURL: `http://123.207.60.132:8081/`,\r\n    headers: {\r\n      Authorization: `Bearer ${store.state.token}`\r\n    }\r\n  })\r\n}\r\n\r\nimport Api from '@/services/Api'\r\n\r\nexport default {\r\n  userLogin(credentials) {\r\n    return Api().post('/userLogin', credentials)\r\n  }\r\n}\r\n\r\n# music api\r\n\r\nimport axios from 'axios'\r\nexport default () =\u003e {\r\n  return axios.create({\r\n    baseURL: `http://123.207.60.132:3000/`\r\n  })\r\n}\r\n\r\nimport Api from '@/services/musicApi'\r\n\r\nexport default {\r\n  getTopList() {\r\n    return Api().get('/top/list?idx=3')\r\n  }\r\n}\r\n```\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/services)\r\n\r\n\u003e ### 前端vuex状态管理\r\n\r\n``` bash\r\nimport Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport createPersistedState from 'vuex-persistedstate'\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  strict: true,\r\n  plugins: [createPersistedState()],\r\n  state: {\r\n    token: null,\r\n    user: null,\r\n    isUserLoggedIn: false\r\n  },\r\n\r\n  mutations: {\r\n    setToken(state, token) {\r\n      state.token = token\r\n      state.isUserLoggedIn = !!(token)\r\n    },\r\n    setUser(state, user) {\r\n      state.user = user\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    setToken({ commit }, token) {\r\n      commit('setToken', token)\r\n    },\r\n    setUser({ commit }, user) {\r\n      commit('setUser', user)\r\n    }\r\n  }\r\n})\r\n```\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/store)\r\n\r\n\u003e ### 前端界面\r\n\r\n``` bash\r\n# 组件使用\r\n\u003cv-slider :sliderImg=\"sliderImg\"\u003e\u003c/v-slider\u003e\r\n\r\n# 组件引入\r\n import VSlider from './Slider/Index'\r\n\r\nexport default {\r\n    # 声明组件\r\n    components: {\r\n        VSlider\r\n    },\r\n    data() {\r\n        return {\r\n            sliderImg: [\r\n                {\r\n                src: 'item1'\r\n                },\r\n                {\r\n                src: 'item2'\r\n                },\r\n                {\r\n                src: 'item3'\r\n                },\r\n                {\r\n                src: 'item4'\r\n                }\r\n            ]\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n- 前端页面基本都是按照这样的方式写的 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/views)\r\n\r\n\u003e ### 后台界面\r\n\r\n- 后台界面除了按照前端页面写的以外还用了[vue-element-admin](https://github.com/PanJiaChen/vue-element-admin)后台界面的写法\r\n\r\n- 其中侧边栏是根据 router.js 配置的路由并且根据权限动态生成的，这样就省去了写一遍路由还要手动再写一次侧边栏这种麻烦事，但也遇到了一个问题，路由可能会有多层嵌套，很多人反馈自己的侧边栏会有三级，甚至还有五级的。所以重构了一下侧边栏，使用了递归组件，这样不管你多少级，都能愉快的显示了。[文章地址](https://juejin.im/post/593121aa0ce4630057f70d35#heading-3) 复制的hhhh\r\n\r\n- 页面还用了icon[文章地址](https://juejin.im/post/59bb864b5188257e7a427c09)\r\n\r\n- 主页显示用了[v-charts图表组件](https://github.com/ElemeFE/v-charts) 这个基本的使用挺简单的看看文档就ok了 不用另外写文章了\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/views)\r\n\r\n\r\n\u003e ### 前端router\r\n\r\n``` bash\r\nimport Vue from 'vue'\r\nimport Router from 'vue-router'\r\nVue.use(Router)\r\n\r\nexport const constantRouterMap = [\r\n  { path: '*', redirect: '/404', hidden: true }\r\n]\r\n\r\nexport default new Router({\r\n  mode: 'history', // require service support\r\n  scrollBehavior: () =\u003e ({ y: 0 }),\r\n  routes: constantRouterMap\r\n})\r\n```\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/client/src/router)\r\n\r\n\r\n\u003e ### 后端基本服务\r\n\r\n``` bash\r\nconst express = require('express')\r\nconst app = express()\r\nconst config = require('./config/config')\r\n\r\nconst fs = require('fs')\r\nconst path = require('path')\r\nrequire('./router/index.js')(app)\r\napp.use(express.static(path.resolve(__dirname, './dist')))\r\n\r\napp.get('*', function(req, res) {\r\n    const html = fs.readFileSync(path.resolve(__dirname, './dist/index.html'), 'utf-8')\r\n    res.send(html)\r\n})\r\n\r\napp.listen(config.port, function () {\r\n  console.log(`server run ${config.port} port`)\r\n})\r\n```\r\n\r\n- 后台主要使用nodejs express mongodb提供服务\r\n\r\n- 功能 用户登录注册\r\n\r\n- 功能 管理员登录注册\r\n\r\n- 用户的密码加密\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/blob/master/service/app.js)\r\n\r\n\r\n\r\n\u003e ### 后端model\r\n\r\n``` bash\r\nconst mongoose = require('mongoose')\r\nconst Schema = mongoose.Schema\r\nconst bcrypt =require('bcryptjs')  // 密码加密\r\nlet SALT_WORK_FACTOR = 10\r\nconst config = require('../config/config')\r\nmongoose.connect(config.database)\r\n\r\n\r\nvar UserSchema = new Schema({\r\n  userName: {\r\n    type: String,\r\n    unique: true,  // 不重复\r\n    require: true  // 不为空\r\n  }\r\n})\r\n\r\n// 在保存密码之前用bcrypt加密保证密码只有用户知道\r\nUserSchema.pre('save', function (next){\r\n  // 保存this指向\r\n  let _this = this\r\n  // 判断是否为最新\r\n  if(!_this.isModified('password')){\r\n      return next()\r\n  }\r\n  // 加密EMMM 产生一个salt\r\n  bcrypt.genSalt(SALT_WORK_FACTOR, function (err, salt){\r\n    if(err){\r\n      return next(err)\r\n    }\r\n\r\n    // 结合salt 生成 hash\r\n    bcrypt.hash(_this.password, salt, function (err, hash) {\r\n      if(err){\r\n        return next(err)\r\n      }\r\n\r\n      // 用hash覆盖明文密码\r\n      _this.password = hash\r\n      next()\r\n    })\r\n  })\r\n})\r\n\r\n// 通过bcrypt的compare方法，对再次传入的密码和数据库中保存的加密后的密码进行比较，如果匹配，则登录成功 isMatch 为布尔值\r\n// mongoose 模型扩展 在 methods 对象上扩展\r\nUserSchema.methods.comparePassword = function (candidatePassword, cb) {\r\n  bcrypt.compare(candidatePassword, this.password, function (err, isMatch) {\r\n    if (err) {\r\n      return cb(err);\r\n    }\r\n\r\n    cb(null, isMatch);\r\n  });\r\n};\r\nmodule.exports = mongoose.model('User', UserSchema)\r\n```\r\n\r\n- 使用mongoose Schema定义数据模型\r\n\r\n- 通过bcrypt密码加密\r\n\r\n- 扩展方法 对密码加密\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/service/model)\r\n\r\n\r\n\r\n\r\n\u003e ### 后端controllers\r\n\r\n``` bash\r\nconst User = require('../model/User')\r\nconst AdminUser = require('../model/AdminUser')\r\nconst jwt = require('jsonwebtoken')\r\nconst config = require('../config/config')\r\n\r\n\r\n// token\r\nfunction jwtSignUser(user) {\r\n  const ONE_WEEK = 60 * 60 * 24 * 7\r\n  return jwt.sign(user, config.authentication.jwtSecret, {\r\n    expiresIn: ONE_WEEK\r\n  })\r\n}\r\n\r\nmodule.exports = {\r\n  async userLogin(req, res) {\r\n    try {\r\n      await User.findOne({\r\n        userName: req.body.userName\r\n      }, function (err, user) {\r\n        .........\r\n      })\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n- 登录成功返回\r\n\r\n```bash\r\nsuccess: true,\r\nmessage: '登录成功',\r\ntoken: 'token值'\r\n```\r\n\r\n- 登录成功返回\r\n\r\n```bash\r\nsuccess: false,\r\nmessage: '登录失败', (或其他信息详情看文件)\r\ntoken: ''\r\n```\r\n\r\n- 对用户的密码判断\r\n\r\n```bash\r\n user.comparePassword(req.body.pass, (err, isMatch) =\u003e {\r\n     ...\r\n }\r\n```\r\n\r\n- 更多内容[地址](https://github.com/xiaotiandada/My-music/tree/master/service/controllers)\r\n\r\n---\r\n\r\n\u003e ### 总结\r\n\r\n- 通过上面的练习学习了更多新知识\r\n\r\n- 更加理解前后端的交互\r\n\r\n- 加强了技术掌握程度\r\n\r\n- 还有很多不符合现在开发的规范\r\n\r\n- 代码不够精简干练\r\n\r\n- 基础知识掌握不牢固\r\n\r\n- 设计审美水平需要提升\r\n\r\n- ......\r\n\r\n大概就是这么多吧, 项目还有很多部规范的地方以后会慢慢改正, 虽然是个人里练习的项目, 自己还是话了很多时间和心血\r\n\r\n最后 最后 最后 说一个厚脸皮的话 小哥哥小姐姐如果觉得不错的话可以给小生点一个 [Star](https://github.com/xiaotiandada/My-music) 嘛 谢谢哇QAQ~~\r\n\r\n自己马上就要实习了 有大佬看上带走的吗！QAQ","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d\u0026v=4"},"html":"\u003cp\u003e2018-06-22 13:14:50\u003c/p\u003e\n\u003ch2 id=\"简介\"\u003e简介\u003c/h2\u003e\n\u003cp\u003e自己写了一个vue小项目总结总结(为了节省篇幅和大家阅读的时间直接进入正题 认真脸！)\u003c/p\u003e\n\u003chr\u003e\n\u003cblockquote\u003e\n\u003cp\u003e项目详情可以查看的我Github仓库\u003ca href=\"https://github.com/xiaotiandada/My-music\"\u003e地址\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"http://123.207.60.132:8081/\"\u003e项目预览地址\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e用户登录帐号密码都是11\u003c/li\u003e\n\u003cli\u003e后台管理登录也是11 \u003c/li\u003e\n\u003cli\u003e(其实还有别的帐号密码,如果您有心情可以查看api自己用Postman注册,用户注册自己可以直接在页面上注册)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003cp\u003egithub描述文档写了使用了写技术栈 和 界面截图\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c!-- more --\u003e\n\n\u003ch2 id=\"功能总结\"\u003e功能总结\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003ch3 id=\"前端api调用\"\u003e前端api调用\u003c/h3\u003e\n\u003c/blockquote\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e# api\nimport axios from 'axios'\nimport store from '@/store/store'\n\nexport default () =\u003e {\n  return axios.create({\n    baseURL: `http://123.207.60.132:8081/`,\n    headers: {\n      Authorization: `Bearer ${store.state.token}`\n    }\n  })\n}\n\nimport Api from '@/services/Api'\n\nexport default {\n  userLogin(credentials) {\n    return Api().post('/userLogin', credentials)\n  }\n}\n\n# music api\n\nimport axios from 'axios'\nexport default () =\u003e {\n  return axios.create({\n    baseURL: `http://123.207.60.132:3000/`\n  })\n}\n\nimport Api from '@/services/musicApi'\n\nexport default {\n  getTopList() {\n    return Api().get('/top/list?idx=3')\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e更多内容\u003ca href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/services\"\u003e地址\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003ch3 id=\"前端vuex状态管理\"\u003e前端vuex状态管理\u003c/h3\u003e\n\u003c/blockquote\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003eimport Vue from 'vue'\nimport Vuex from 'vuex'\nimport createPersistedState from 'vuex-persistedstate'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  strict: true,\n  plugins: [createPersistedState()],\n  state: {\n    token: null,\n    user: null,\n    isUserLoggedIn: false\n  },\n\n  mutations: {\n    setToken(state, token) {\n      state.token = token\n      state.isUserLoggedIn = !!(token)\n    },\n    setUser(state, user) {\n      state.user = user\n    }\n  },\n\n  actions: {\n    setToken({ commit }, token) {\n      commit('setToken', token)\n    },\n    setUser({ commit }, user) {\n      commit('setUser', user)\n    }\n  }\n})\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e更多内容\u003ca href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/store\"\u003e地址\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003ch3 id=\"前端界面\"\u003e前端界面\u003c/h3\u003e\n\u003c/blockquote\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e# 组件使用\n\u003cv-slider :sliderImg=\"sliderImg\"\u003e\u003c/v-slider\u003e\n\n# 组件引入\n import VSlider from './Slider/Index'\n\nexport default {\n    # 声明组件\n    components: {\n        VSlider\n    },\n    data() {\n        return {\n            sliderImg: [\n                {\n                src: 'item1'\n                },\n                {\n                src: 'item2'\n                },\n                {\n                src: 'item3'\n                },\n                {\n                src: 'item4'\n                }\n            ]\n        }\n    }\n}\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e前端页面基本都是按照这样的方式写的 更多内容\u003ca href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/views\"\u003e地址\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003ch3 id=\"后台界面\"\u003e后台界面\u003c/h3\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e后台界面除了按照前端页面写的以外还用了\u003ca href=\"https://github.com/PanJiaChen/vue-element-admin\"\u003evue-element-admin\u003c/a\u003e后台界面的写法\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e其中侧边栏是根据 router.js 配置的路由并且根据权限动态生成的，这样就省去了写一遍路由还要手动再写一次侧边栏这种麻烦事，但也遇到了一个问题，路由可能会有多层嵌套，很多人反馈自己的侧边栏会有三级，甚至还有五级的。所以重构了一下侧边栏，使用了递归组件，这样不管你多少级，都能愉快的显示了。\u003ca href=\"https://juejin.im/post/593121aa0ce4630057f70d35#heading-3\"\u003e文章地址\u003c/a\u003e 复制的hhhh\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e页面还用了icon\u003ca href=\"https://juejin.im/post/59bb864b5188257e7a427c09\"\u003e文章地址\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e主页显示用了\u003ca href=\"https://github.com/ElemeFE/v-charts\"\u003ev-charts图表组件\u003c/a\u003e 这个基本的使用挺简单的看看文档就ok了 不用另外写文章了\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e更多内容\u003ca href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/views\"\u003e地址\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003ch3 id=\"前端router\"\u003e前端router\u003c/h3\u003e\n\u003c/blockquote\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003eimport Vue from 'vue'\nimport Router from 'vue-router'\nVue.use(Router)\n\nexport const constantRouterMap = [\n  { path: '*', redirect: '/404', hidden: true }\n]\n\nexport default new Router({\n  mode: 'history', // require service support\n  scrollBehavior: () =\u003e ({ y: 0 }),\n  routes: constantRouterMap\n})\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e更多内容\u003ca href=\"https://github.com/xiaotiandada/My-music/tree/master/client/src/router\"\u003e地址\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003ch3 id=\"后端基本服务\"\u003e后端基本服务\u003c/h3\u003e\n\u003c/blockquote\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003econst express = require('express')\nconst app = express()\nconst config = require('./config/config')\n\nconst fs = require('fs')\nconst path = require('path')\nrequire('./router/index.js')(app)\napp.use(express.static(path.resolve(__dirname, './dist')))\n\napp.get('*', function(req, res) {\n    const html = fs.readFileSync(path.resolve(__dirname, './dist/index.html'), 'utf-8')\n    res.send(html)\n})\n\napp.listen(config.port, function () {\n  console.log(`server run ${config.port} port`)\n})\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\u003cp\u003e后台主要使用nodejs express mongodb提供服务\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e功能 用户登录注册\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e功能 管理员登录注册\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e用户的密码加密\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e更多内容\u003ca href=\"https://github.com/xiaotiandada/My-music/blob/master/service/app.js\"\u003e地址\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003ch3 id=\"后端model\"\u003e后端model\u003c/h3\u003e\n\u003c/blockquote\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003econst mongoose = require('mongoose')\nconst Schema = mongoose.Schema\nconst bcrypt =require('bcryptjs')  // 密码加密\nlet SALT_WORK_FACTOR = 10\nconst config = require('../config/config')\nmongoose.connect(config.database)\n\n\nvar UserSchema = new Schema({\n  userName: {\n    type: String,\n    unique: true,  // 不重复\n    require: true  // 不为空\n  }\n})\n\n// 在保存密码之前用bcrypt加密保证密码只有用户知道\nUserSchema.pre('save', function (next){\n  // 保存this指向\n  let _this = this\n  // 判断是否为最新\n  if(!_this.isModified('password')){\n      return next()\n  }\n  // 加密EMMM 产生一个salt\n  bcrypt.genSalt(SALT_WORK_FACTOR, function (err, salt){\n    if(err){\n      return next(err)\n    }\n\n    // 结合salt 生成 hash\n    bcrypt.hash(_this.password, salt, function (err, hash) {\n      if(err){\n        return next(err)\n      }\n\n      // 用hash覆盖明文密码\n      _this.password = hash\n      next()\n    })\n  })\n})\n\n// 通过bcrypt的compare方法，对再次传入的密码和数据库中保存的加密后的密码进行比较，如果匹配，则登录成功 isMatch 为布尔值\n// mongoose 模型扩展 在 methods 对象上扩展\nUserSchema.methods.comparePassword = function (candidatePassword, cb) {\n  bcrypt.compare(candidatePassword, this.password, function (err, isMatch) {\n    if (err) {\n      return cb(err);\n    }\n\n    cb(null, isMatch);\n  });\n};\nmodule.exports = mongoose.model('User', UserSchema)\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e\u003cp\u003e使用mongoose Schema定义数据模型\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e通过bcrypt密码加密\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e扩展方法 对密码加密\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e更多内容\u003ca href=\"https://github.com/xiaotiandada/My-music/tree/master/service/model\"\u003e地址\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cblockquote\u003e\n\u003ch3 id=\"后端controllers\"\u003e后端controllers\u003c/h3\u003e\n\u003c/blockquote\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003econst User = require('../model/User')\nconst AdminUser = require('../model/AdminUser')\nconst jwt = require('jsonwebtoken')\nconst config = require('../config/config')\n\n\n// token\nfunction jwtSignUser(user) {\n  const ONE_WEEK = 60 * 60 * 24 * 7\n  return jwt.sign(user, config.authentication.jwtSecret, {\n    expiresIn: ONE_WEEK\n  })\n}\n\nmodule.exports = {\n  async userLogin(req, res) {\n    try {\n      await User.findOne({\n        userName: req.body.userName\n      }, function (err, user) {\n        .........\n      })\n    }\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e登录成功返回\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003esuccess: true,\nmessage: '登录成功',\ntoken: 'token值'\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e登录成功返回\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003esuccess: false,\nmessage: '登录失败', (或其他信息详情看文件)\ntoken: ''\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e对用户的密码判断\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e user.comparePassword(req.body.pass, (err, isMatch) =\u003e {\n     ...\n }\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003e更多内容\u003ca href=\"https://github.com/xiaotiandada/My-music/tree/master/service/controllers\"\u003e地址\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cblockquote\u003e\n\u003ch3 id=\"总结\"\u003e总结\u003c/h3\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e通过上面的练习学习了更多新知识\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e更加理解前后端的交互\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e加强了技术掌握程度\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e还有很多不符合现在开发的规范\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e代码不够精简干练\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e基础知识掌握不牢固\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e设计审美水平需要提升\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e......\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e大概就是这么多吧, 项目还有很多部规范的地方以后会慢慢改正, 虽然是个人里练习的项目, 自己还是话了很多时间和心血\u003c/p\u003e\n\u003cp\u003e最后 最后 最后 说一个厚脸皮的话 小哥哥小姐姐如果觉得不错的话可以给小生点一个 \u003ca href=\"https://github.com/xiaotiandada/My-music\"\u003eStar\u003c/a\u003e 嘛 谢谢哇QAQ~~\u003c/p\u003e\n\u003cp\u003e自己马上就要实习了 有大佬看上带走的吗！QAQ\u003c/p\u003e\n","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true},"page":"/[...path]","query":{"path":["MDU6SXNzdWU3ODg3MDcxMTg="]},"buildId":"YPEk3V-eoVeml18YoUSCM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>