{"pageProps":{"post":{"id":"MDU6SXNzdWU3ODg3MTA5NjM=","url":"https://github.com/xiaotiandada/blog/issues/22","title":"svg动画用复杂交互动画改善用户体验-练习","updatedAt":"2021-01-19T05:08:18Z","createdAt":"2021-01-19T05:08:18Z","body":"2019-07-07 23:53:32\r\n\r\n[书籍Demo](https://codepen.io/sdras/pen/BKaYyG)\r\n[源码](https://github.com/xiaotiandada/Case/tree/master/svg%E5%8A%A8%E7%94%BB%E7%94%A8%E5%A4%8D%E6%9D%82%E4%BA%A4%E4%BA%92%E5%8A%A8%E7%94%BB%E6%94%B9%E5%96%84%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C-%E7%BB%83%E4%B9%A0/%E4%B8%8D%E5%AE%9E%E7%94%A8%E9%A2%9D%E5%A4%96%E7%9A%84%E5%BA%93%E6%9D%A5%E5%88%9B%E5%BB%BAUI%7CUX%E5%8A%A8%E7%94%BB)\r\n\r\nhttps://codei.netlify.com/gist/b4c50cbd51edb77d431fe4d5929128ab\r\n\r\n### HTML\r\n\r\n随意写的,主要用svg画一些线条和圆,具体的大家可以参考svg文档把\r\n\r\n```html\r\n  ...\r\n  <svg class=\"magnifier\" vieBox=\"0 0 300 46\">\r\n    <!-- 圆 -->\r\n    <circle class=\"magnifier-c\" cx=\"20\" cy=\"20\" r=\"16\" fill=\"none\" stroke=\"#fff\"></circle>\r\n    <!-- 线 -->\r\n    <line class=\"magnifier-l-c\" x1=\"10\" y1=\"10\" x2=\"20\" y2=\"20\" fill=\"none\" stroke=\"#fff\" />\r\n  </svg>\r\n  ...\r\n```\r\n\r\n### CSS\r\n\r\ncss部分写得比较乱(我真垃圾!!!)\r\n\r\n主要通过Element添加class来切换(能用css的就不用js)\r\n\r\n随便贴一点意思意思emmm\r\n\r\n```css\r\n.magnifier-l-c,\r\n .line-line,\r\n .main input {\r\n  /* 避免引起回流 */\r\n  visibility: hidden;\r\n  opacity: 0;\r\n}\r\n\r\n.magnifier.open .magnifier-l-c, \r\n.main.open .line-line,\r\n.main.open input {\r\n  /* 避免引起回流 */\r\n  visibility: visible;\r\n  opacity: 1;\r\n}\r\n```\r\n\r\n### JS\r\n\r\n```js\r\n// 获取Element\r\nlet magnifier = document.querySelector('.magnifier')\r\nlet main = document.querySelector('.main')\r\nlet line = document.querySelector('.line')\r\n// set click\r\nmagnifier.onclick = function() {\r\n  // 判断是否有class\r\n  let hasOpen = magnifier.classList.contains('open')\r\n  console.log(hasOpen)\r\n  // 设置 class\r\n  if (hasOpen) {\r\n    magnifier.classList.remove('open')\r\n    main.classList.remove('open')\r\n    line.classList.remove('open')\r\n  } else {\r\n    magnifier.classList.add('open')\r\n    main.classList.add('open')\r\n    line.classList.add('open')\r\n  }\r\n}\r\n```\r\n\r\nokk了, 大概就这么多,然后具体的可以看源码和书籍Demo\r\n\r\n[书籍Demo](https://codepen.io/sdras/pen/BKaYyG)\r\n[源码](","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&v=4"},"html":"<p>2019-07-07 23:53:32</p>\n<p><a href=\"https://codepen.io/sdras/pen/BKaYyG\">书籍Demo</a>\n<a href=\"https://github.com/xiaotiandada/Case/tree/master/svg%E5%8A%A8%E7%94%BB%E7%94%A8%E5%A4%8D%E6%9D%82%E4%BA%A4%E4%BA%92%E5%8A%A8%E7%94%BB%E6%94%B9%E5%96%84%E7%94%A8%E6%88%B7%E4%BD%93%E9%AA%8C-%E7%BB%83%E4%B9%A0/%E4%B8%8D%E5%AE%9E%E7%94%A8%E9%A2%9D%E5%A4%96%E7%9A%84%E5%BA%93%E6%9D%A5%E5%88%9B%E5%BB%BAUI%7CUX%E5%8A%A8%E7%94%BB\">源码</a></p>\n<p><a href=\"https://codei.netlify.com/gist/b4c50cbd51edb77d431fe4d5929128ab\">https://codei.netlify.com/gist/b4c50cbd51edb77d431fe4d5929128ab</a></p>\n<h3 id=\"html\">HTML</h3>\n<p>随意写的,主要用svg画一些线条和圆,具体的大家可以参考svg文档把</p>\n<pre class=\"language-html\"><code class=\"language-html\">  ...\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>magnifier<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">vieBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 300 46<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 圆 --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>circle</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>magnifier-c<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>16<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>none<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#fff<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>circle</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 线 --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>line</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>magnifier-l-c<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y1</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">x2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">y2</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>none<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">stroke</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#fff<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span>\n  ...</code></pre><h3 id=\"css\">CSS</h3>\n<p>css部分写得比较乱(我真垃圾!!!)</p>\n<p>主要通过Element添加class来切换(能用css的就不用js)</p>\n<p>随便贴一点意思意思emmm</p>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.magnifier-l-c,\n .line-line,\n .main input</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* 避免引起回流 */</span>\n  <span class=\"token property\">visibility</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.magnifier.open .magnifier-l-c, \n.main.open .line-line,\n.main.open input</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* 避免引起回流 */</span>\n  <span class=\"token property\">visibility</span><span class=\"token punctuation\">:</span> visible<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">opacity</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre><h3 id=\"js\">JS</h3>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// 获取Element</span>\n<span class=\"token keyword\">let</span> magnifier <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.magnifier'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> main <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.main'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> line <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.line'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// set click</span>\nmagnifier<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 判断是否有class</span>\n  <span class=\"token keyword\">let</span> hasOpen <span class=\"token operator\">=</span> magnifier<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>hasOpen<span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// 设置 class</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasOpen<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    magnifier<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span>\n    main<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span>\n    line<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    magnifier<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span>\n    main<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span>\n    line<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre><p>okk了, 大概就这么多,然后具体的可以看源码和书籍Demo</p>\n<p><a href=\"https://codepen.io/sdras/pen/BKaYyG\">书籍Demo</a>\n[源码](</p>\n","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true}