<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>GraphQLå­¦ä¹  - Blog(issues)</title><meta property="og:type" content="artical"/><meta property="og:title" content="GraphQLå­¦ä¹ "/><meta property="og:image" content="
        https://og-image.vercel.app/GraphQLå­¦ä¹ .png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fvercel-triangle-black.svg
      "/><meta property="article:published_time" content="2021-01-19T06:36:49Z"/><meta property="article:author" content="xiaotiandada"/><meta name="twitter:card" content="GraphQLå­¦ä¹ "/><meta name="twitter:title" content="GraphQLå­¦ä¹ "/><meta name="twitter:image" content="
        https://og-image.vercel.app/GraphQLå­¦ä¹ .png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fvercel-triangle-black.svg
      "/><meta name="next-head-count" content="4"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;display=swap" rel="stylesheet"/><link rel="preload" href="/_next/static/css/b78bfc7021c6877d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b78bfc7021c6877d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-2190439a97dca295.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2aac380799256b7f.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...path%5D-e0b96643230aac68.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_buildManifest.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_ssgManifest.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div class="container mx-auto mt-24 max-w-2xl px-4 sm:px-0"><div><div class="flex my-8 font-bold"><a href="/">Blog(issues)</a></div></div><div class="mb-8"><div class="text-3xl font-medium">GraphQLå­¦ä¹ </div><div class="flex mt-4 items-center gap-2"><img class="w-8 h-8 rounded-full" src="https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&amp;v=4"/><a target="_blank" href="https://github.com/xiaotiandada">xiaotiandada</a><a class="underline text-sm" target="_blank" href="https://github.com/xiaotiandada/blog/issues/50">View on GitHub</a></div><div class="my-8"><div class="flex gap-4 flex-wrap"></div></div></div><div class="post-body"><p>2020-07-07 13:02:08</p>
<p>å­¦ä¹ è®°å½•ğŸ“ <a href="https://github.com/xiaotiandada/graphql">Repo</a></p>
<!-- more -->

<p><strong>èµ„æ–™</strong></p>
<p><a href="https://graphql.org/">https://graphql.org/</a></p>
<p><a href="https://mp.weixin.qq.com/s/bqStS2IBvBSDAiSjLdYETw">https://mp.weixin.qq.com/s/bqStS2IBvBSDAiSjLdYETw</a></p>
<p><a href="https://www.apollographql.com/docs/apollo-server/">https://www.apollographql.com/docs/apollo-server/</a></p>
<h2 id="å°é²œåˆæ¬¡ä½“éªŒ">å°é²œ(åˆæ¬¡ä½“éªŒ)</h2>
<h3 id="å¤åˆ¶æ–‡æ¡£">å¤åˆ¶æ–‡æ¡£</h3>
<pre class="language-bash"><code class="language-bash"># ... init ...
npm install graphql</code></pre><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> buildSchema <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'graphql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> schema <span class="token operator">=</span> <span class="token function">buildSchema</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  type Query {
    hello: String
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> root <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">'Hello world!'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">graphql</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> <span class="token string">'{ hello }'</span><span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç„¶åè¿è¡Œ <code>node app</code>, åŸºæœ¬æ“ä½œäº†... è¿™ä¸ªå¯èƒ½ä¸å¤ªç›´è§‚ ~</p>
<pre class="language-bash"><code class="language-bash">npm install express express-graphql graphql</code></pre><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> graphqlHTTP <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-graphql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token punctuation">{</span> buildSchema <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'graphql'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> schema <span class="token operator">=</span> <span class="token function">buildSchema</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  type Query {
    hello: String
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> root <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">'Hello world!'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/graphql'</span><span class="token punctuation">,</span> <span class="token function">graphqlHTTP</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">schema</span><span class="token operator">:</span> schema<span class="token punctuation">,</span>
  <span class="token literal-property property">rootValue</span><span class="token operator">:</span> root<span class="token punctuation">,</span>
  <span class="token literal-property property">graphiql</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Now browse to localhost:4000/graphql'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ç„¶åè¿è¡Œ <code>node app</code>, å¯ä»¥åœ¨ <code>/graphql</code>è·¯ç”±ä¸‹è¿è¡Œä»–çš„å·¥å…·é¡µé¢ (æ‡’å¾—æˆªå›¾ ğŸ‘)</p>
<pre class="language-bash"><code class="language-bash">npm install apollo-server-express express</code></pre><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ApolloServer<span class="token punctuation">,</span> gql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'apollo-server-express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> typeDefs <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  type Query {
    hello: String
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> resolvers <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">Query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">'Hello world!'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> typeDefs<span class="token punctuation">,</span> resolvers <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span> app <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">4000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Now browse to http://localhost:4000'</span> <span class="token operator">+</span> server<span class="token punctuation">.</span>graphqlPath<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>é‡å¤ä¸Šé¢çš„æ“ä½œ... è¿™é‡Œåˆ©ç”¨äº† <a href="https://www.apollographql.com/docs/apollo-server/">apollo-server</a></p>
<pre class="language-json"><code class="language-json">{
    hello
}</code></pre><p>ç®€å•çš„æŸ¥è¯¢ Query hello..... hello world ç»å…¸è¯­å½•</p>
<p>å…·ä½“çš„å¯ä»¥çœ‹æ–‡æ¡£, æ²¡æœ‰ä»€ä¹ˆè¥å…» å› ä¸ºéƒ½æ˜¯copyçš„(å‡‘ç‚¹å­—æ•°).....</p>
<hr>
<h3 id="ç®€å•çš„æ“ä½œ">ç®€å•çš„æ“ä½œ</h3>
<p>éœ€è¦ä¸€ä¸ªç®€å•çš„ books list</p>
<ol>
<li>æŸ¥è¯¢æ‰€æœ‰books</li>
<li>æ·»åŠ  book</li>
<li>æ›´æ–° book</li>
<li>åˆ é™¤ book</li>
</ol>
<p>è·³è¿‡ä¾èµ–å®‰è£…, ç¼ºå°‘ä¾èµ–è‡ªè¡Œæå®š! æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“ æœ¬åœ°å­˜æ”¾ä¸€ä¸ª <strong>Varible</strong> </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> ApolloServer<span class="token punctuation">,</span> gql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'apollo-server-express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä¹¦åº“ æ²¡æ¥æ•°æ®åº“</span>
<span class="token keyword">const</span> books <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Harry Potter and the Chamber of Secrets'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">'J.K. Rowling'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Jurassic Park'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">'Michael Crichton'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// å®šä¹‰ type</span>
<span class="token keyword">const</span> typeDefs <span class="token operator">=</span> gql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  type Book {
    id: Int,
    title: String
    author: String
  }

  type Query {
    books: [Book],
  }

  type Mutation {
    createBook(title: String, author: String): Book,
    updateBook(id: Int, title: String, author: String): Book,
    deleteBook(id: Int, title: String, author: String): Book,
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// å®šä¹‰ resolvers</span>
<span class="token keyword">const</span> resolvers <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">Query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// æŸ¥è¯¢æ‰€æœ‰ä¹¦</span>
    <span class="token function-variable function">books</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> books<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">Mutation</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ›å»ºä¸€æœ¬ä¹¦</span>
    <span class="token function-variable function">createBook</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> author <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> books<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
        title<span class="token punctuation">,</span>
        author
      <span class="token punctuation">}</span>
      books<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>
      <span class="token keyword">return</span> list
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// æ›´æ–°ä¸€æœ¬ä¹¦</span>
    <span class="token function-variable function">updateBook</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id<span class="token punctuation">,</span> title<span class="token punctuation">,</span> author <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> idx <span class="token operator">=</span> books<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=></span> i<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">~</span>idx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        books<span class="token punctuation">[</span>idx<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span> idx<span class="token punctuation">,</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> title<span class="token punctuation">,</span>
          <span class="token literal-property property">author</span><span class="token operator">:</span> author
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> books<span class="token punctuation">[</span>idx<span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// åˆ é™¤ä¸€æœ¬ä¹¦</span>
    <span class="token function-variable function">deleteBook</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> idx <span class="token operator">=</span> books<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=></span> i<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">~</span>idx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        books<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>idx<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> books<span class="token punctuation">[</span>idx<span class="token punctuation">]</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> typeDefs<span class="token punctuation">,</span> resolvers <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span> app <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">4000</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Now browse to http://localhost:4000'</span> <span class="token operator">+</span> server<span class="token punctuation">.</span>graphqlPath<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><pre class="language-json"><code class="language-json">query GetBooks {
  books {
    id,
    title
    author
  }
}

mutation Create {
  createBook(title: "12312", author: "xxxxx") {title, author},
}

mutation Update {
  updateBook(id: 0, title: "123", author: "xxxxx") {id, title, author}
}

mutation Delete {
  deleteBook(id: 1) {id, title, author}
}</code></pre><p>ä¸€äº›è¯·æ±‚è¯­å¥å‚è€ƒ æ„¿å›å¿«é€Ÿ <strong>debug</strong> </p>
<pre class="language-json"><code class="language-json">{
  "data": {
    "books": [
      {
        "id": 0,
        "title": "Harry Potter and the Chamber of Secrets",
        "author": "J.K. Rowling"
      },
      {
        "id": 1,
        "title": "Jurassic Park",
        "author": "Michael Crichton"
      }
    ]
  }
}</code></pre><p>æ‰€æœ‰ä¹¦å•çš„è¿”å› <strong>list</strong></p>
<p>å› ä¸ºç¬¬ä¸€æ¬¡ä½¿ç”¨, å…ˆç»™è‡ªå·±è¸©ä¸ªå‘, åç»­çš„ä¸€äº›åŠŸèƒ½ä½¿ç”¨ä¼šæ…¢æ…¢äº†è§£, å¹¶ä¸”æ›´æ–°æ–‡ç«  ğŸ‘</p>
</div><hr class="my-12"/><div class="font-sans"><div class="mb-12"><a target="_blank" href="https://github.com/xiaotiandada/blog/issues/50" class="font-medium border border-gray-700 hover:bg-gray-700 hover:text-gray-100 transition-all text-gray-700 text-sm rounded px-4 py-2">Add comment</a></div></div><div class="my-12"><div class="text-sm">Powered by <a class="underline" target="_blank" href="https://github.com/djyde/sairin">Sairin</a></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"MDU6SXNzdWU3ODg3NTAwNzM=","url":"https://github.com/xiaotiandada/blog/issues/50","title":"GraphQLå­¦ä¹ ","updatedAt":"2021-01-19T06:36:49Z","createdAt":"2021-01-19T06:36:49Z","body":"2020-07-07 13:02:08\r\n\r\nå­¦ä¹ è®°å½•ğŸ“ [Repo](https://github.com/xiaotiandada/graphql)\r\n\r\n\u003c!-- more --\u003e\r\n\r\n**èµ„æ–™**\r\n\r\nhttps://graphql.org/\r\n\r\nhttps://mp.weixin.qq.com/s/bqStS2IBvBSDAiSjLdYETw\r\n\r\nhttps://www.apollographql.com/docs/apollo-server/\r\n\r\n## å°é²œ(åˆæ¬¡ä½“éªŒ)\r\n\r\n### å¤åˆ¶æ–‡æ¡£\r\n\r\n```bash\r\n# ... init ...\r\nnpm install graphql\r\n```\r\n\r\n```javascript\r\nvar { graphql, buildSchema } = require('graphql');\r\n\r\nvar schema = buildSchema(`\r\n  type Query {\r\n    hello: String\r\n  }\r\n`);\r\n\r\nvar root = { hello: () =\u003e 'Hello world!' };\r\n\r\ngraphql(schema, '{ hello }', root).then((response) =\u003e {\r\n  console.log(response);\r\n});\r\n```\r\n\r\nç„¶åè¿è¡Œ ``node app``, åŸºæœ¬æ“ä½œäº†... è¿™ä¸ªå¯èƒ½ä¸å¤ªç›´è§‚ ~\r\n\r\n```bash\r\nnpm install express express-graphql graphql\r\n```\r\n\r\n```javascript\r\nvar express = require('express');\r\nvar graphqlHTTP = require('express-graphql');\r\nvar { buildSchema } = require('graphql');\r\n\r\nvar schema = buildSchema(`\r\n  type Query {\r\n    hello: String\r\n  }\r\n`);\r\n\r\nvar root = { hello: () =\u003e 'Hello world!' };\r\n\r\nvar app = express();\r\napp.use('/graphql', graphqlHTTP({\r\n  schema: schema,\r\n  rootValue: root,\r\n  graphiql: true,\r\n}));\r\napp.listen(4000, () =\u003e console.log('Now browse to localhost:4000/graphql'));\r\n```\r\n\r\nç„¶åè¿è¡Œ ``node app``, å¯ä»¥åœ¨ ``/graphql``è·¯ç”±ä¸‹è¿è¡Œä»–çš„å·¥å…·é¡µé¢ (æ‡’å¾—æˆªå›¾ ğŸ‘)\r\n\r\n```bash\r\nnpm install apollo-server-express express\r\n```\r\n\r\n```javascript\r\nconst express = require('express');\r\nconst { ApolloServer, gql } = require('apollo-server-express');\r\n\r\nconst typeDefs = gql`\r\n  type Query {\r\n    hello: String\r\n  }\r\n`;\r\n\r\nconst resolvers = {\r\n  Query: {\r\n    hello: () =\u003e 'Hello world!',\r\n  },\r\n};\r\n\r\nconst server = new ApolloServer({ typeDefs, resolvers });\r\n\r\nconst app = express();\r\nserver.applyMiddleware({ app });\r\n\r\napp.listen({ port: 4000 }, () =\u003e\r\n  console.log('Now browse to http://localhost:4000' + server.graphqlPath)\r\n);\r\n```\r\n\r\né‡å¤ä¸Šé¢çš„æ“ä½œ... è¿™é‡Œåˆ©ç”¨äº† [apollo-server](https://www.apollographql.com/docs/apollo-server/)\r\n\r\n```json\r\n{\r\n\thello\r\n}\r\n```\r\n\r\nç®€å•çš„æŸ¥è¯¢ Query hello..... hello world ç»å…¸è¯­å½•\r\n\r\nå…·ä½“çš„å¯ä»¥çœ‹æ–‡æ¡£, æ²¡æœ‰ä»€ä¹ˆè¥å…» å› ä¸ºéƒ½æ˜¯copyçš„(å‡‘ç‚¹å­—æ•°).....\r\n\r\n---\r\n\r\n### ç®€å•çš„æ“ä½œ\r\n\r\néœ€è¦ä¸€ä¸ªç®€å•çš„ books list\r\n\r\n1. æŸ¥è¯¢æ‰€æœ‰books\r\n2. æ·»åŠ  book\r\n3. æ›´æ–° book\r\n4. åˆ é™¤ book\r\n\r\nè·³è¿‡ä¾èµ–å®‰è£…, ç¼ºå°‘ä¾èµ–è‡ªè¡Œæå®š! æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“ æœ¬åœ°å­˜æ”¾ä¸€ä¸ª **Varible** \r\n\r\n```javascript\r\nconst express = require('express');\r\nconst { ApolloServer, gql } = require('apollo-server-express');\r\n\r\n// ä¹¦åº“ æ²¡æ¥æ•°æ®åº“\r\nconst books = [\r\n  {\r\n    id: 0,\r\n    title: 'Harry Potter and the Chamber of Secrets',\r\n    author: 'J.K. Rowling',\r\n  },\r\n  {\r\n    id: 1,\r\n    title: 'Jurassic Park',\r\n    author: 'Michael Crichton'\r\n  },\r\n];\r\n\r\n// å®šä¹‰ type\r\nconst typeDefs = gql`\r\n  type Book {\r\n    id: Int,\r\n    title: String\r\n    author: String\r\n  }\r\n\r\n  type Query {\r\n    books: [Book],\r\n  }\r\n\r\n  type Mutation {\r\n    createBook(title: String, author: String): Book,\r\n    updateBook(id: Int, title: String, author: String): Book,\r\n    deleteBook(id: Int, title: String, author: String): Book,\r\n  }\r\n`;\r\n// å®šä¹‰ resolvers\r\nconst resolvers = {\r\n  Query: {\r\n    // æŸ¥è¯¢æ‰€æœ‰ä¹¦\r\n    books: () =\u003e books,\r\n  },\r\n  Mutation: {\r\n    // åˆ›å»ºä¸€æœ¬ä¹¦\r\n    createBook: (_, { title, author }) =\u003e {\r\n      let list = {\r\n        id: books.length,\r\n        title,\r\n        author\r\n      }\r\n      books.push(list)\r\n      return list\r\n    },\r\n    // æ›´æ–°ä¸€æœ¬ä¹¦\r\n    updateBook: (_, { id, title, author }) =\u003e {\r\n      let idx = books.findIndex(i =\u003e i.id === id)\r\n      if (~idx) {\r\n        books[idx] = {\r\n          id: idx,\r\n          title: title,\r\n          author: author\r\n        }\r\n        return books[idx]\r\n      } else {\r\n        return []\r\n      }\r\n    },\r\n    // åˆ é™¤ä¸€æœ¬ä¹¦\r\n    deleteBook: (_, { id }) =\u003e {\r\n      let idx = books.findIndex(i =\u003e i.id === id)\r\n      if (~idx) {\r\n        books.splice(idx, 1)\r\n        return books[idx]\r\n      } else {\r\n        return []\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nconst server = new ApolloServer({ typeDefs, resolvers });\r\n\r\nconst app = express();\r\nserver.applyMiddleware({ app });\r\n\r\napp.listen({ port: 4000 }, () =\u003e\r\n  console.log('Now browse to http://localhost:4000' + server.graphqlPath)\r\n);\r\n```\r\n\r\n```json\r\nquery GetBooks {\r\n  books {\r\n    id,\r\n    title\r\n    author\r\n  }\r\n}\r\n\r\nmutation Create {\r\n  createBook(title: \"12312\", author: \"xxxxx\") {title, author},\r\n}\r\n\r\nmutation Update {\r\n  updateBook(id: 0, title: \"123\", author: \"xxxxx\") {id, title, author}\r\n}\r\n\r\nmutation Delete {\r\n  deleteBook(id: 1) {id, title, author}\r\n}\r\n```\r\n\r\nä¸€äº›è¯·æ±‚è¯­å¥å‚è€ƒ æ„¿å›å¿«é€Ÿ **debug** \r\n\r\n```json\r\n{\r\n  \"data\": {\r\n    \"books\": [\r\n      {\r\n        \"id\": 0,\r\n        \"title\": \"Harry Potter and the Chamber of Secrets\",\r\n        \"author\": \"J.K. Rowling\"\r\n      },\r\n      {\r\n        \"id\": 1,\r\n        \"title\": \"Jurassic Park\",\r\n        \"author\": \"Michael Crichton\"\r\n      }\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\næ‰€æœ‰ä¹¦å•çš„è¿”å› **list**\r\n\r\nå› ä¸ºç¬¬ä¸€æ¬¡ä½¿ç”¨, å…ˆç»™è‡ªå·±è¸©ä¸ªå‘, åç»­çš„ä¸€äº›åŠŸèƒ½ä½¿ç”¨ä¼šæ…¢æ…¢äº†è§£, å¹¶ä¸”æ›´æ–°æ–‡ç«  ğŸ‘","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d\u0026v=4"},"html":"\u003cp\u003e2020-07-07 13:02:08\u003c/p\u003e\n\u003cp\u003eå­¦ä¹ è®°å½•ğŸ“ \u003ca href=\"https://github.com/xiaotiandada/graphql\"\u003eRepo\u003c/a\u003e\u003c/p\u003e\n\u003c!-- more --\u003e\n\n\u003cp\u003e\u003cstrong\u003eèµ„æ–™\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://graphql.org/\"\u003ehttps://graphql.org/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://mp.weixin.qq.com/s/bqStS2IBvBSDAiSjLdYETw\"\u003ehttps://mp.weixin.qq.com/s/bqStS2IBvBSDAiSjLdYETw\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.apollographql.com/docs/apollo-server/\"\u003ehttps://www.apollographql.com/docs/apollo-server/\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"å°é²œåˆæ¬¡ä½“éªŒ\"\u003eå°é²œ(åˆæ¬¡ä½“éªŒ)\u003c/h2\u003e\n\u003ch3 id=\"å¤åˆ¶æ–‡æ¡£\"\u003eå¤åˆ¶æ–‡æ¡£\u003c/h3\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e# ... init ...\nnpm install graphql\u003c/code\u003e\u003c/pre\u003e\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e graphql\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e buildSchema \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'graphql'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e schema \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ebuildSchema\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e\n  type Query {\n    hello: String\n  }\n\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e root \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003ehello\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Hello world!'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token function\"\u003egraphql\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eschema\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'{ hello }'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e root\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ethen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003eresponse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  console\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eresponse\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eç„¶åè¿è¡Œ \u003ccode\u003enode app\u003c/code\u003e, åŸºæœ¬æ“ä½œäº†... è¿™ä¸ªå¯èƒ½ä¸å¤ªç›´è§‚ ~\u003c/p\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003enpm install express express-graphql graphql\u003c/code\u003e\u003c/pre\u003e\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e express \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'express'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e graphqlHTTP \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'express-graphql'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e buildSchema \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'graphql'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e schema \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003ebuildSchema\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e\n  type Query {\n    hello: String\n  }\n\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e root \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003ehello\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Hello world!'\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e app \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eexpress\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\napp\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003euse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'/graphql'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003egraphqlHTTP\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token literal-property property\"\u003eschema\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e schema\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token literal-property property\"\u003erootValue\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e root\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token literal-property property\"\u003egraphiql\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\napp\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elisten\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e4000\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e console\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Now browse to localhost:4000/graphql'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eç„¶åè¿è¡Œ \u003ccode\u003enode app\u003c/code\u003e, å¯ä»¥åœ¨ \u003ccode\u003e/graphql\u003c/code\u003eè·¯ç”±ä¸‹è¿è¡Œä»–çš„å·¥å…·é¡µé¢ (æ‡’å¾—æˆªå›¾ ğŸ‘)\u003c/p\u003e\n\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003enpm install apollo-server-express express\u003c/code\u003e\u003c/pre\u003e\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e express \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'express'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ApolloServer\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e gql \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'apollo-server-express'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e typeDefs \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e gql\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e\n  type Query {\n    hello: String\n  }\n\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e resolvers \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token literal-property property\"\u003eQuery\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003ehello\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Hello world!'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e server \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eApolloServer\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e typeDefs\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e resolvers \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e app \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eexpress\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eapplyMiddleware\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e app \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\napp\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elisten\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eport\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e4000\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\n  console\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Now browse to http://localhost:4000'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e server\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egraphqlPath\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eé‡å¤ä¸Šé¢çš„æ“ä½œ... è¿™é‡Œåˆ©ç”¨äº† \u003ca href=\"https://www.apollographql.com/docs/apollo-server/\"\u003eapollo-server\u003c/a\u003e\u003c/p\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e{\n    hello\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eç®€å•çš„æŸ¥è¯¢ Query hello..... hello world ç»å…¸è¯­å½•\u003c/p\u003e\n\u003cp\u003eå…·ä½“çš„å¯ä»¥çœ‹æ–‡æ¡£, æ²¡æœ‰ä»€ä¹ˆè¥å…» å› ä¸ºéƒ½æ˜¯copyçš„(å‡‘ç‚¹å­—æ•°).....\u003c/p\u003e\n\u003chr\u003e\n\u003ch3 id=\"ç®€å•çš„æ“ä½œ\"\u003eç®€å•çš„æ“ä½œ\u003c/h3\u003e\n\u003cp\u003eéœ€è¦ä¸€ä¸ªç®€å•çš„ books list\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eæŸ¥è¯¢æ‰€æœ‰books\u003c/li\u003e\n\u003cli\u003eæ·»åŠ  book\u003c/li\u003e\n\u003cli\u003eæ›´æ–° book\u003c/li\u003e\n\u003cli\u003eåˆ é™¤ book\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eè·³è¿‡ä¾èµ–å®‰è£…, ç¼ºå°‘ä¾èµ–è‡ªè¡Œæå®š! æ²¡æœ‰ä½¿ç”¨æ•°æ®åº“ æœ¬åœ°å­˜æ”¾ä¸€ä¸ª \u003cstrong\u003eVarible\u003c/strong\u003e \u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e express \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'express'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ApolloServer\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e gql \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003erequire\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'apollo-server-express'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// ä¹¦åº“ æ²¡æ¥æ•°æ®åº“\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e books \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003eid\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003etitle\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Harry Potter and the Chamber of Secrets'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003eauthor\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'J.K. Rowling'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003eid\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003etitle\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Jurassic Park'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token literal-property property\"\u003eauthor\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Michael Crichton'\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// å®šä¹‰ type\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e typeDefs \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e gql\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e\n  type Book {\n    id: Int,\n    title: String\n    author: String\n  }\n\n  type Query {\n    books: [Book],\n  }\n\n  type Mutation {\n    createBook(title: String, author: String): Book,\n    updateBook(id: Int, title: String, author: String): Book,\n    deleteBook(id: Int, title: String, author: String): Book,\n  }\n\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// å®šä¹‰ resolvers\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e resolvers \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token literal-property property\"\u003eQuery\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// æŸ¥è¯¢æ‰€æœ‰ä¹¦\u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003ebooks\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e books\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token literal-property property\"\u003eMutation\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// åˆ›å»ºä¸€æœ¬ä¹¦\u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003ecreateBook\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003e_\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e title\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e author \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e list \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token literal-property property\"\u003eid\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e books\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003elength\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        title\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        author\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n      books\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003elist\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e list\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// æ›´æ–°ä¸€æœ¬ä¹¦\u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003eupdateBook\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003e_\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e id\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e title\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e author \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e idx \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e books\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efindIndex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ei\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eid \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e id\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e~\u003c/span\u003eidx\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        books\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eidx\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"token literal-property property\"\u003eid\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e idx\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n          \u003cspan class=\"token literal-property property\"\u003etitle\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e title\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n          \u003cspan class=\"token literal-property property\"\u003eauthor\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e author\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e books\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eidx\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// åˆ é™¤ä¸€æœ¬ä¹¦\u003c/span\u003e\n    \u003cspan class=\"token function-variable function\"\u003edeleteBook\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003e_\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e id \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e idx \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e books\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efindIndex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003ei\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eid \u003cspan class=\"token operator\"\u003e===\u003c/span\u003e id\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e~\u003c/span\u003eidx\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        books\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esplice\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eidx\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e books\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003eidx\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n      \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e server \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eApolloServer\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e typeDefs\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e resolvers \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e app \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003eexpress\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\nserver\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eapplyMiddleware\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e app \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\napp\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elisten\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token literal-property property\"\u003eport\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e4000\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e\n  console\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'Now browse to http://localhost:4000'\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e server\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003egraphqlPath\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003equery GetBooks {\n  books {\n    id,\n    title\n    author\n  }\n}\n\nmutation Create {\n  createBook(title: \"12312\", author: \"xxxxx\") {title, author},\n}\n\nmutation Update {\n  updateBook(id: 0, title: \"123\", author: \"xxxxx\") {id, title, author}\n}\n\nmutation Delete {\n  deleteBook(id: 1) {id, title, author}\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eä¸€äº›è¯·æ±‚è¯­å¥å‚è€ƒ æ„¿å›å¿«é€Ÿ \u003cstrong\u003edebug\u003c/strong\u003e \u003c/p\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e{\n  \"data\": {\n    \"books\": [\n      {\n        \"id\": 0,\n        \"title\": \"Harry Potter and the Chamber of Secrets\",\n        \"author\": \"J.K. Rowling\"\n      },\n      {\n        \"id\": 1,\n        \"title\": \"Jurassic Park\",\n        \"author\": \"Michael Crichton\"\n      }\n    ]\n  }\n}\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eæ‰€æœ‰ä¹¦å•çš„è¿”å› \u003cstrong\u003elist\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå› ä¸ºç¬¬ä¸€æ¬¡ä½¿ç”¨, å…ˆç»™è‡ªå·±è¸©ä¸ªå‘, åç»­çš„ä¸€äº›åŠŸèƒ½ä½¿ç”¨ä¼šæ…¢æ…¢äº†è§£, å¹¶ä¸”æ›´æ–°æ–‡ç«  ğŸ‘\u003c/p\u003e\n","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true},"page":"/[...path]","query":{"path":["MDU6SXNzdWU3ODg3NTAwNzM="]},"buildId":"YPEk3V-eoVeml18YoUSCM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>