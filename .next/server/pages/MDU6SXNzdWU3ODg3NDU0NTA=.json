{"pageProps":{"post":{"id":"MDU6SXNzdWU3ODg3NDU0NTA=","url":"https://github.com/xiaotiandada/blog/issues/34","title":"i18n","updatedAt":"2022-05-16T07:47:25Z","createdAt":"2021-01-19T06:27:40Z","body":"### Next\r\n- https://jasonlam.cc/blog/ZitySpace/the-experience-of-website-internationalization\r\n- https://github.com/isaachinman/next-i18next/issues/1552\r\n\r\n\r\n###  vue-i18n 为什么切换语言部分的数据会不变？\r\n\r\n2019-09-26 15:48:12\r\n\r\n**vue-i18n国际化在data中切换不起作用**\r\n\r\nhttps://www.bbsmax.com/A/qVdep96p5P/\r\n\r\n配置会写在另一篇文章里面!!\r\n\r\n\r\n```\r\n将this.$t() 写到了data属性里，切换语言不起作用\r\n\r\ndata是一次性生产的，你这么写只能是在 data 初始化的时候拿到这些被国际化的值，并不能响应变化。\r\n\r\n官方的解决办法是，建议我们将表达式写到computed属性里，不要写到data里\r\n\r\ncopy⬆️\r\n\r\n```\r\n\r\n因为在 js 中的this.options只会在初始化的时候执行一次，它的数据并不会随着你本地 lang的变化而变化，所以需要你在lang变化的时候手动重设this.options。 -- copy\r\n\r\nhttps://panjiachen.github.io/vue-element-admin-site/zh/guide/advanced/i18n.html\r\n\r\n有些数据又不想写在computed里面怎么办???\r\n\r\n解决方案\r\n\r\n1. 刷新页面 (体验不太好\r\n2. 写入computed\r\n3. 通过监听locale重新赋值\r\n\r\n```js\r\n  watch: {\r\n    '$i18n.locale'() {\r\n      console.log(this.$i18n.locale)\r\n      this.setContent() // 重新设置一下值\r\n    }\r\n  },\r\n```","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&v=4"},"html":"<h3 id=\"next\">Next</h3>\n<ul>\n<li><a href=\"https://jasonlam.cc/blog/ZitySpace/the-experience-of-website-internationalization\">https://jasonlam.cc/blog/ZitySpace/the-experience-of-website-internationalization</a></li>\n<li><a href=\"https://github.com/isaachinman/next-i18next/issues/1552\">https://github.com/isaachinman/next-i18next/issues/1552</a></li>\n</ul>\n<h3 id=\"vue-i18n-为什么切换语言部分的数据会不变？\">vue-i18n 为什么切换语言部分的数据会不变？</h3>\n<p>2019-09-26 15:48:12</p>\n<p><strong>vue-i18n国际化在data中切换不起作用</strong></p>\n<p><a href=\"https://www.bbsmax.com/A/qVdep96p5P/\">https://www.bbsmax.com/A/qVdep96p5P/</a></p>\n<p>配置会写在另一篇文章里面!!</p>\n<pre><code>将this.$t() 写到了data属性里，切换语言不起作用\n\ndata是一次性生产的，你这么写只能是在 data 初始化的时候拿到这些被国际化的值，并不能响应变化。\n\n官方的解决办法是，建议我们将表达式写到computed属性里，不要写到data里\n\ncopy⬆️\n</code></pre><p>因为在 js 中的this.options只会在初始化的时候执行一次，它的数据并不会随着你本地 lang的变化而变化，所以需要你在lang变化的时候手动重设this.options。 -- copy</p>\n<p><a href=\"https://panjiachen.github.io/vue-element-admin-site/zh/guide/advanced/i18n.html\">https://panjiachen.github.io/vue-element-admin-site/zh/guide/advanced/i18n.html</a></p>\n<p>有些数据又不想写在computed里面怎么办???</p>\n<p>解决方案</p>\n<ol>\n<li>刷新页面 (体验不太好</li>\n<li>写入computed</li>\n<li>通过监听locale重新赋值</li>\n</ol>\n<pre class=\"language-js\"><code class=\"language-js\">  <span class=\"token literal-property property\">watch</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'$i18n.locale'</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$i18n<span class=\"token punctuation\">.</span>locale<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 重新设置一下值</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre>","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true}