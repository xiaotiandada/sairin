<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Nuxt.js deploy to vercel - Blog(issues)</title><meta property="og:type" content="artical"/><meta property="og:title" content="Nuxt.js deploy to vercel"/><meta property="og:image" content="
        https://og-image.vercel.app/Nuxt.js deploy to vercel.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fvercel-triangle-black.svg
      "/><meta property="article:published_time" content="2021-12-06T18:09:46Z"/><meta property="article:author" content="xiaotiandada"/><meta name="twitter:card" content="Nuxt.js deploy to vercel"/><meta name="twitter:title" content="Nuxt.js deploy to vercel"/><meta name="twitter:image" content="
        https://og-image.vercel.app/Nuxt.js deploy to vercel.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fvercel-triangle-black.svg
      "/><meta name="next-head-count" content="4"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;display=swap" rel="stylesheet"/><link rel="preload" href="/_next/static/css/b78bfc7021c6877d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b78bfc7021c6877d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-2190439a97dca295.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2aac380799256b7f.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...path%5D-e0b96643230aac68.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_buildManifest.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_ssgManifest.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div class="container mx-auto mt-24 max-w-2xl px-4 sm:px-0"><div><div class="flex my-8 font-bold"><a href="/">Blog(issues)</a></div></div><div class="mb-8"><div class="text-3xl font-medium">Nuxt.js deploy to vercel</div><div class="flex mt-4 items-center gap-2"><img class="w-8 h-8 rounded-full" src="https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&amp;v=4"/><a target="_blank" href="https://github.com/xiaotiandada">xiaotiandada</a><a class="underline text-sm" target="_blank" href="https://github.com/xiaotiandada/blog/issues/89">View on GitHub</a></div><div class="my-8"><div class="flex gap-4 flex-wrap"><a href="https://github.com/xiaotiandada/blog/issues/89" target="_blank"><div class="flex gap-2 bg-blue-50 border border-blue-100 px-4 py-1 rounded-full items-center"><span class="text-md">👀</span><span class="text-sm font-sans">1</span></div></a></div></div></div><div class="post-body"><p>Vercel deploy ...</p>
<p><a href="https://github.com/nuxt/vercel-builder#readme">https://github.com/nuxt/vercel-builder#readme</a></p>
<ol>
<li><p>/bin/sh: node-gyp-build: command not found  <a href="https://github.com/nuxt/vercel-builder/issues/371">https://github.com/nuxt/vercel-builder/issues/371</a></p>
<ol>
<li>package.json add script</li>
</ol>
<pre class="language-json"><code class="language-json">"scripts": {
  "vercel-build": "yarn global add node-gyp-build"
}</code></pre><ol start="2">
<li>add vercel.json file</li>
</ol>
<pre class="language-json"><code class="language-json">{
  "version": 2,
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/node"
    },
    {
      "src": "nuxt.config.js",
      "use": "@nuxtjs/vercel-builder",
      "config": {
        "serverFiles": [
          "package.json"
          ...
        ]
      }
    }
  ],
  "routes": [
    {
      "src": "/sw.js",
      "continue": true,
      "headers": {
        "Cache-Control": "public, max-age=0, must-revalidate",
        "Service-Worker-Allowed": "/"
      }
    }
  ]
}</code></pre></li>
<li><p>other dependencies command not found or local file command not found</p>
</li>
</ol>
<p>需要包含在 serverFiles 或者 dependencies</p>
<p>其他也一样 command not found 基本上都一样 esm 之类的文件</p>
<pre><code>npm i 'command not found'</code></pre><ol start="3">
<li>Serverless Function &quot;index&quot; size limit</li>
</ol>
<pre><code>Error: The Serverless Function "index" is 104.9mb which exceeds the maximum size limit of 50mb. Learn More: https://vercel.link/serverless-function-size</code></pre><p>dependencies move to devDependencies</p>
<p>前置条件 nuxt.config.js 没有导入任何依赖文件</p>
<ul>
<li>如果需要 import 本地文件 需要在 vercel.json serverFiles 里面包含文件</li>
<li>如果需要 import 依赖，需要在 dependencies 包含</li>
<li>如果 import 本地文件 里面包含了 本地文件或依赖也需要包含在 serverFiles or dependencies</li>
<li>如果需要 modules 使用（不会报错 会有警告 所以可以包含在 dependencies）</li>
</ul>
<p>减少 map 这样也可以减少打包大小</p>
<pre class="language-javascript"><code class="language-javascript">  <span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">extend</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      config<span class="token punctuation">.</span>devtool <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><ol start="4">
<li>if use svg-sprite-loader （optional）</li>
</ol>
<p><a href="https://github.com/JetBrains/svg-sprite-loader#readme">https://github.com/JetBrains/svg-sprite-loader#readme</a></p>
<p><a href="https://github.com/dword-design/nuxt-svg-sprite-loader#readme">https://github.com/dword-design/nuxt-svg-sprite-loader#readme</a></p>
<p><a href="https://nuxtjs.org/docs/directory-structure/modules/">https://nuxtjs.org/docs/directory-structure/modules/</a></p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> packageName <span class="token keyword">from</span> <span class="token string">'depcheck-package-name'</span>
<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>

<span class="token keyword">const</span> <span class="token function-variable function">resolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">dir</span><span class="token punctuation">)</span> <span class="token operator">=></span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> dir<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">svgRulePredicate</span> <span class="token operator">=</span> <span class="token parameter">rule</span> <span class="token operator">=></span> rule<span class="token punctuation">.</span>test <span class="token operator">&amp;&amp;</span> rule<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'.svg'</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">moduleOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>spriteSvgLoader<span class="token punctuation">,</span> <span class="token operator">...</span>moduleOptions <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">extendBuild</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> imageLoaderRule <span class="token operator">=</span> config<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>svgRulePredicate<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'imageLoaderRule'</span><span class="token punctuation">,</span> imageLoaderRule<span class="token punctuation">,</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'../icons/svg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    imageLoaderRule<span class="token punctuation">.</span>exclude <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'../icons/svg'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    config<span class="token punctuation">.</span>module<span class="token punctuation">.</span>rules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">loader</span><span class="token operator">:</span> packageName<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">svg-sprite-loader</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      options<span class="token punctuation">,</span>
      <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'../icons/svg'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// include => 只处理指定的文件夹下的文件</span>
      <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.svg$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre><ol start="5">
<li>nuxt.config.js import webpack （optional）</li>
</ol>
<p>webpack command not found</p>
<p>maybe add webpack dependence can solve it</p>
<p>but i use other webpack rules, show <code>Error: Cannot find module &#39;webpack/lib/RuleSet&#39;</code></p>
<ol start="6">
<li>nuxt.config.js import svg-sprite-loader（optional）</li>
</ol>
<p>show <code>Error: Cannot find module &#39;webpack/lib/RuleSet&#39;</code>, so i remove it</p>
<p>use modules <code>nuxt-svg-sprite-loader</code></p>
<ol start="7">
<li>nuxt.config.js parallel config （optional）</li>
</ol>
<p>if parallel is true, maybe build fail</p>
</div><hr class="my-12"/><div class="font-sans"><div class="mb-12"><a target="_blank" href="https://github.com/xiaotiandada/blog/issues/89" class="font-medium border border-gray-700 hover:bg-gray-700 hover:text-gray-100 transition-all text-gray-700 text-sm rounded px-4 py-2">Add comment</a></div></div><div class="my-12"><div class="text-sm">Powered by <a class="underline" target="_blank" href="https://github.com/djyde/sairin">Sairin</a></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"I_kwDOD_pKSM4_7EU7","url":"https://github.com/xiaotiandada/blog/issues/89","title":"Nuxt.js deploy to vercel","updatedAt":"2021-12-07T03:38:37Z","createdAt":"2021-12-06T18:09:46Z","body":"Vercel deploy ...\r\n\r\nhttps://github.com/nuxt/vercel-builder#readme\r\n\r\n1. /bin/sh: node-gyp-build: command not found  https://github.com/nuxt/vercel-builder/issues/371\r\n\r\n   1. package.json add script\r\n\r\n    ```json\r\n    \"scripts\": {\r\n      \"vercel-build\": \"yarn global add node-gyp-build\"\r\n    }\r\n    ```\r\n\r\n    2. add vercel.json file\r\n\r\n      ```json\r\n      {\r\n        \"version\": 2,\r\n        \"builds\": [\r\n          {\r\n            \"src\": \"package.json\",\r\n            \"use\": \"@vercel/node\"\r\n          },\r\n          {\r\n            \"src\": \"nuxt.config.js\",\r\n            \"use\": \"@nuxtjs/vercel-builder\",\r\n            \"config\": {\r\n              \"serverFiles\": [\r\n                \"package.json\"\r\n                ...\r\n              ]\r\n            }\r\n          }\r\n        ],\r\n        \"routes\": [\r\n          {\r\n            \"src\": \"/sw.js\",\r\n            \"continue\": true,\r\n            \"headers\": {\r\n              \"Cache-Control\": \"public, max-age=0, must-revalidate\",\r\n              \"Service-Worker-Allowed\": \"/\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n      ```\r\n\r\n1. other dependencies command not found or local file command not found\r\n\r\n需要包含在 serverFiles 或者 dependencies\r\n\r\n其他也一样 command not found 基本上都一样 esm 之类的文件\r\n\r\n```\r\nnpm i 'command not found'\r\n```\r\n\r\n3. Serverless Function \"index\" size limit\r\n\r\n```\r\nError: The Serverless Function \"index\" is 104.9mb which exceeds the maximum size limit of 50mb. Learn More: https://vercel.link/serverless-function-size\r\n```\r\n\r\ndependencies move to devDependencies\r\n\r\n前置条件 nuxt.config.js 没有导入任何依赖文件\r\n\r\n- 如果需要 import 本地文件 需要在 vercel.json serverFiles 里面包含文件\r\n- 如果需要 import 依赖，需要在 dependencies 包含\r\n- 如果 import 本地文件 里面包含了 本地文件或依赖也需要包含在 serverFiles or dependencies\r\n- 如果需要 modules 使用（不会报错 会有警告 所以可以包含在 dependencies）\r\n\r\n减少 map 这样也可以减少打包大小\r\n\r\n```javascript\r\n  build: {\r\n    extend (config) {\r\n      config.devtool = false\r\n    }\r\n  },\r\n```\r\n\r\n4. if use svg-sprite-loader （optional）\r\n\r\nhttps://github.com/JetBrains/svg-sprite-loader#readme\r\n\r\nhttps://github.com/dword-design/nuxt-svg-sprite-loader#readme\r\n\r\nhttps://nuxtjs.org/docs/directory-structure/modules/\r\n\r\n```javascript\r\nimport packageName from 'depcheck-package-name'\r\nimport path from 'path'\r\n\r\nconst resolve = (dir) =\u003e path.join(__dirname, dir)\r\nconst svgRulePredicate = rule =\u003e rule.test \u0026\u0026 rule.test.test('.svg')\r\n\r\nexport default function (moduleOptions) {\r\n  const options = { ...this.options.spriteSvgLoader, ...moduleOptions }\r\n  this.extendBuild(config =\u003e {\r\n    const imageLoaderRule = config.module.rules.find(svgRulePredicate)\r\n    console.log('imageLoaderRule', imageLoaderRule, resolve('../icons/svg'))\r\n    imageLoaderRule.exclude = [resolve('../icons/svg')]\r\n\r\n    config.module.rules.push({\r\n      loader: packageName`svg-sprite-loader`,\r\n      options,\r\n      include: [resolve('../icons/svg')], // include =\u003e 只处理指定的文件夹下的文件\r\n      test: /\\.svg$/,\r\n    })\r\n  })\r\n}\r\n```\r\n\r\n5. nuxt.config.js import webpack （optional）\r\n\r\nwebpack command not found\r\n\r\nmaybe add webpack dependence can solve it\r\n\r\nbut i use other webpack rules, show ``Error: Cannot find module 'webpack/lib/RuleSet'``\r\n\r\n6. nuxt.config.js import svg-sprite-loader（optional）\r\n\r\nshow ``Error: Cannot find module 'webpack/lib/RuleSet'``, so i remove it\r\n\r\nuse modules ``nuxt-svg-sprite-loader``\r\n\r\n7. nuxt.config.js parallel config （optional）\r\n\r\nif parallel is true, maybe build fail\r\n\r\n","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":1}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d\u0026v=4"},"html":"\u003cp\u003eVercel deploy ...\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/nuxt/vercel-builder#readme\"\u003ehttps://github.com/nuxt/vercel-builder#readme\u003c/a\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cp\u003e/bin/sh: node-gyp-build: command not found  \u003ca href=\"https://github.com/nuxt/vercel-builder/issues/371\"\u003ehttps://github.com/nuxt/vercel-builder/issues/371\u003c/a\u003e\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003epackage.json add script\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e\"scripts\": {\n  \"vercel-build\": \"yarn global add node-gyp-build\"\n}\u003c/code\u003e\u003c/pre\u003e\u003col start=\"2\"\u003e\n\u003cli\u003eadd vercel.json file\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre class=\"language-json\"\u003e\u003ccode class=\"language-json\"\u003e{\n  \"version\": 2,\n  \"builds\": [\n    {\n      \"src\": \"package.json\",\n      \"use\": \"@vercel/node\"\n    },\n    {\n      \"src\": \"nuxt.config.js\",\n      \"use\": \"@nuxtjs/vercel-builder\",\n      \"config\": {\n        \"serverFiles\": [\n          \"package.json\"\n          ...\n        ]\n      }\n    }\n  ],\n  \"routes\": [\n    {\n      \"src\": \"/sw.js\",\n      \"continue\": true,\n      \"headers\": {\n        \"Cache-Control\": \"public, max-age=0, must-revalidate\",\n        \"Service-Worker-Allowed\": \"/\"\n      }\n    }\n  ]\n}\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eother dependencies command not found or local file command not found\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e需要包含在 serverFiles 或者 dependencies\u003c/p\u003e\n\u003cp\u003e其他也一样 command not found 基本上都一样 esm 之类的文件\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003enpm i 'command not found'\u003c/code\u003e\u003c/pre\u003e\u003col start=\"3\"\u003e\n\u003cli\u003eServerless Function \u0026quot;index\u0026quot; size limit\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode\u003eError: The Serverless Function \"index\" is 104.9mb which exceeds the maximum size limit of 50mb. Learn More: https://vercel.link/serverless-function-size\u003c/code\u003e\u003c/pre\u003e\u003cp\u003edependencies move to devDependencies\u003c/p\u003e\n\u003cp\u003e前置条件 nuxt.config.js 没有导入任何依赖文件\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e如果需要 import 本地文件 需要在 vercel.json serverFiles 里面包含文件\u003c/li\u003e\n\u003cli\u003e如果需要 import 依赖，需要在 dependencies 包含\u003c/li\u003e\n\u003cli\u003e如果 import 本地文件 里面包含了 本地文件或依赖也需要包含在 serverFiles or dependencies\u003c/li\u003e\n\u003cli\u003e如果需要 modules 使用（不会报错 会有警告 所以可以包含在 dependencies）\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e减少 map 这样也可以减少打包大小\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e  \u003cspan class=\"token literal-property property\"\u003ebuild\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token function\"\u003eextend\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003econfig\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      config\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edevtool \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003efalse\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003col start=\"4\"\u003e\n\u003cli\u003eif use svg-sprite-loader （optional）\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/JetBrains/svg-sprite-loader#readme\"\u003ehttps://github.com/JetBrains/svg-sprite-loader#readme\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/dword-design/nuxt-svg-sprite-loader#readme\"\u003ehttps://github.com/dword-design/nuxt-svg-sprite-loader#readme\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://nuxtjs.org/docs/directory-structure/modules/\"\u003ehttps://nuxtjs.org/docs/directory-structure/modules/\u003c/a\u003e\u003c/p\u003e\n\u003cpre class=\"language-javascript\"\u003e\u003ccode class=\"language-javascript\"\u003e\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e packageName \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'depcheck-package-name'\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e path \u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'path'\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003eresolve\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003edir\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e path\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ejoin\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e__dirname\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e dir\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token function-variable function\"\u003esvgRulePredicate\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token parameter\"\u003erule\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e rule\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etest \u003cspan class=\"token operator\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e rule\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etest\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'.svg'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003emoduleOptions\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e options \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eoptions\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003espriteSvgLoader\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e...\u003c/span\u003emoduleOptions \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003ethis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eextendBuild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token parameter\"\u003econfig\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e imageLoaderRule \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e config\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emodule\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003erules\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003efind\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003esvgRulePredicate\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    console\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'imageLoaderRule'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e imageLoaderRule\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token function\"\u003eresolve\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'../icons/svg'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    imageLoaderRule\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eexclude \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token function\"\u003eresolve\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'../icons/svg'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\n    config\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003emodule\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003erules\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"token literal-property property\"\u003eloader\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e packageName\u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003esvg-sprite-loader\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      options\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token literal-property property\"\u003einclude\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token function\"\u003eresolve\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'../icons/svg'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token comment\"\u003e// include =\u003e 只处理指定的文件夹下的文件\u003c/span\u003e\n      \u003cspan class=\"token literal-property property\"\u003etest\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token regex\"\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003cspan class=\"token regex-source language-regex\"\u003e\\.svg$\u003c/span\u003e\u003cspan class=\"token regex-delimiter\"\u003e/\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003col start=\"5\"\u003e\n\u003cli\u003enuxt.config.js import webpack （optional）\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003ewebpack command not found\u003c/p\u003e\n\u003cp\u003emaybe add webpack dependence can solve it\u003c/p\u003e\n\u003cp\u003ebut i use other webpack rules, show \u003ccode\u003eError: Cannot find module \u0026#39;webpack/lib/RuleSet\u0026#39;\u003c/code\u003e\u003c/p\u003e\n\u003col start=\"6\"\u003e\n\u003cli\u003enuxt.config.js import svg-sprite-loader（optional）\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eshow \u003ccode\u003eError: Cannot find module \u0026#39;webpack/lib/RuleSet\u0026#39;\u003c/code\u003e, so i remove it\u003c/p\u003e\n\u003cp\u003euse modules \u003ccode\u003enuxt-svg-sprite-loader\u003c/code\u003e\u003c/p\u003e\n\u003col start=\"7\"\u003e\n\u003cli\u003enuxt.config.js parallel config （optional）\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eif parallel is true, maybe build fail\u003c/p\u003e\n","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true},"page":"/[...path]","query":{"path":["I_kwDOD_pKSM4_7EU7"]},"buildId":"YPEk3V-eoVeml18YoUSCM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>