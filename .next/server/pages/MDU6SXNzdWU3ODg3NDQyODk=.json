{"pageProps":{"post":{"id":"MDU6SXNzdWU3ODg3NDQyODk=","url":"https://github.com/xiaotiandada/blog/issues/31","title":"twitter 点赞简易动画","updatedAt":"2021-01-19T06:25:14Z","createdAt":"2021-01-19T06:25:14Z","body":"2019-09-08 16:06:47\r\n\r\n## 资料\r\n\r\nhttps://zhuanlan.zhihu.com/p/20486738\r\n<img src=\"https://abs.twimg.com/a/1446542199/img/t1/web_heart_animation.png\">\r\n\r\n## GO\r\n\r\n- 首先去twitter打开控制台下载png的素材\r\n- 放入一个div\r\n- 设置css 完事\r\n\r\n## Js\r\n\r\n\r\n```js\r\nexport default class Render {\r\n  append(parent, dom){\r\n    parent.append(dom)\r\n  }\r\n}\r\n\r\n\r\nlet render =  new Render()\r\n\r\nlet likeButton = document.createElement('div')\r\nlikeButton.classList.add('like-button')\r\n\r\n\r\nrender.append(document.querySelector('body'), likeButton)\r\n```\r\n\r\n## Css\r\n\r\n```css\r\n.like-button {\r\n  width: 50px;\r\n  height: 50px;\r\n  background-position: left;\r\n  background-image: url(https://abs.twimg.com/a/1446542199/img/t1/web_heart_animation.png);\r\n  background-repeat:no-repeat;\r\n  background-size:2900%;\r\n  cursor: pointer;\r\n  &:hover {\r\n    background-position: right;\r\n  }\r\n}\r\n\r\n.is-animating {\r\n  animation: heart-burst .8s steps(28) 1 forwards;\r\n}\r\n\r\n@keyframes heart-burst { // 从左到右\r\n  0%{\r\n    background-position: left;\r\n  }\r\n  100%{\r\n    background-position: right;\r\n  }\r\n}\r\n\r\n\r\n```\r\n\r\n鼠标经过png从 **background-position: left;** 到 **background-position: right;** 变色处理\r\n\r\n通过单击添加 class 达到目的\r\n\r\n**animation: heart-burst .8s steps(28) 1 forwards;** 分为steps 28 执行动画\r\n\r\n## js\r\n\r\n```js\r\nlikeButton.onclick = function() {\r\n  let hasClass = likeButton.classList.contains('is-animating')\r\n  if (!hasClass) likeButton.classList.add('is-animating')\r\n}\r\n\r\nlikeButton.addEventListener('animationend', function() {\r\n  let hasClass = likeButton.classList.contains('is-animating')\r\n  if (hasClass) likeButton.classList.remove('is-animating')\r\n}) // 根据情况处理\r\n```\r\n\r\n-- end ---","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&v=4"},"html":"<p>2019-09-08 16:06:47</p>\n<h2 id=\"资料\">资料</h2>\n<p><a href=\"https://zhuanlan.zhihu.com/p/20486738\">https://zhuanlan.zhihu.com/p/20486738</a>\n<img src=\"https://abs.twimg.com/a/1446542199/img/t1/web_heart_animation.png\"></p>\n<h2 id=\"go\">GO</h2>\n<ul>\n<li>首先去twitter打开控制台下载png的素材</li>\n<li>放入一个div</li>\n<li>设置css 完事</li>\n</ul>\n<h2 id=\"js\">Js</h2>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Render</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> dom</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    parent<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>dom<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">let</span> render <span class=\"token operator\">=</span>  <span class=\"token keyword\">new</span> <span class=\"token class-name\">Render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">let</span> likeButton <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">)</span>\nlikeButton<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'like-button'</span><span class=\"token punctuation\">)</span>\n\n\nrender<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> likeButton<span class=\"token punctuation\">)</span></code></pre><h2 id=\"css\">Css</h2>\n<pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.like-button</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 50px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 50px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-position</span><span class=\"token punctuation\">:</span> left<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>https://abs.twimg.com/a/1446542199/img/t1/web_heart_animation.png<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-repeat</span><span class=\"token punctuation\">:</span>no-repeat<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-size</span><span class=\"token punctuation\">:</span>2900%<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">cursor</span><span class=\"token punctuation\">:</span> pointer<span class=\"token punctuation\">;</span>\n  <span class=\"token selector\">&amp;:hover</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-position</span><span class=\"token punctuation\">:</span> right<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.is-animating</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> heart-burst .8s <span class=\"token function\">steps</span><span class=\"token punctuation\">(</span>28<span class=\"token punctuation\">)</span> 1 forwards<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> heart-burst</span> <span class=\"token punctuation\">{</span> <span class=\"token selector\">// 从左到右\n  0%</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-position</span><span class=\"token punctuation\">:</span> left<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">100%</span><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-position</span><span class=\"token punctuation\">:</span> right<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre><p>鼠标经过png从 <strong>background-position: left;</strong> 到 <strong>background-position: right;</strong> 变色处理</p>\n<p>通过单击添加 class 达到目的</p>\n<p><strong>animation: heart-burst .8s steps(28) 1 forwards;</strong> 分为steps 28 执行动画</p>\n<h2 id=\"js-1\">js</h2>\n<pre class=\"language-js\"><code class=\"language-js\">likeButton<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> hasClass <span class=\"token operator\">=</span> likeButton<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'is-animating'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>hasClass<span class=\"token punctuation\">)</span> likeButton<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'is-animating'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nlikeButton<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'animationend'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> hasClass <span class=\"token operator\">=</span> likeButton<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">'is-animating'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>hasClass<span class=\"token punctuation\">)</span> likeButton<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'is-animating'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 根据情况处理</span></code></pre><p>-- end ---</p>\n","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true}