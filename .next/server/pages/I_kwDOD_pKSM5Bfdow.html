<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>浏览器打开图片 URL 是显示还是下载 - Blog(issues)</title><meta property="og:type" content="artical"/><meta property="og:title" content="浏览器打开图片 URL 是显示还是下载"/><meta property="og:image" content="
        https://og-image.vercel.app/浏览器打开图片 URL 是显示还是下载.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fvercel-triangle-black.svg
      "/><meta property="article:published_time" content="2022-01-11T06:55:22Z"/><meta property="article:author" content="xiaotiandada"/><meta name="twitter:card" content="浏览器打开图片 URL 是显示还是下载"/><meta name="twitter:title" content="浏览器打开图片 URL 是显示还是下载"/><meta name="twitter:image" content="
        https://og-image.vercel.app/浏览器打开图片 URL 是显示还是下载.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fvercel-triangle-black.svg
      "/><meta name="next-head-count" content="4"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&amp;display=swap" rel="stylesheet"/><link rel="preload" href="/_next/static/css/b78bfc7021c6877d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b78bfc7021c6877d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-cb7634a8b6194820.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-2190439a97dca295.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2aac380799256b7f.js" defer=""></script><script src="/_next/static/chunks/pages/%5B...path%5D-e0b96643230aac68.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_buildManifest.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_ssgManifest.js" defer=""></script><script src="/_next/static/YPEk3V-eoVeml18YoUSCM/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div><div class="container mx-auto mt-24 max-w-2xl px-4 sm:px-0"><div><div class="flex my-8 font-bold"><a href="/">Blog(issues)</a></div></div><div class="mb-8"><div class="text-3xl font-medium">浏览器打开图片 URL 是显示还是下载</div><div class="flex mt-4 items-center gap-2"><img class="w-8 h-8 rounded-full" src="https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&amp;v=4"/><a target="_blank" href="https://github.com/xiaotiandada">xiaotiandada</a><a class="underline text-sm" target="_blank" href="https://github.com/xiaotiandada/blog/issues/91">View on GitHub</a></div><div class="my-8"><div class="flex gap-4 flex-wrap"></div></div></div><div class="post-body"><p><a href="https://help.aliyun.com/document_detail/39545.html">访问存储在OSS中的资源时资源被强制下载</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition">Content-Disposition</a></p>
<blockquote>
<h2 id="问题原因">问题原因</h2>
<p>访问存储在OSS的文件、图片等被强制下载的可能原因如下所示：</p>
<ul>
<li>使用OSS提供的默认域名，且没有经过其他配置。</li>
<li>对应资源的Content-Type设置错误。Content-Type如果设置为application/octet-stream也会导致强制下载，这个是二进制的下载流。</li>
<li>对应资源的Content-Disposition设置错误。Content-Disposition如果设置为attachment，就是会强制下载。</li>
<li>CDN缓存了错误的Content-Type或者Content-Disposition。</li>
<li>浏览器不支持该格式资源的展示。</li>
</ul>
</blockquote>
<p>条件问题只测试了没有域名，使用默认 OSS 提供的域名。</p>
<p>图片1</p>
<p><a href="https://storageapi.fleek.co/andoroyur-team-bucket/metanetwork/users/metaio-storage/24jokhpxex0vg9bkcvav9xrn1.jpeg">https://storageapi.fleek.co/andoroyur-team-bucket/metanetwork/users/metaio-storage/24jokhpxex0vg9bkcvav9xrn1.jpeg</a></p>
<p><img src="https://user-images.githubusercontent.com/24250627/148896308-ab2fa536-f9fb-47f8-98c9-8b6af744cca3.png" alt="image"></p>
<pre><code>content-type: application/octet-stream</code></pre><p>这张图片会默认下载</p>
<p>图片2</p>
<p><a href="https://smartsignature-img.oss-cn-hongkong.aliyuncs.com/banner/2020/02/04/a60cf0aa4ec50c39196dbf97ceddbbc8.jpg">https://smartsignature-img.oss-cn-hongkong.aliyuncs.com/banner/2020/02/04/a60cf0aa4ec50c39196dbf97ceddbbc8.jpg</a></p>
<p><img src="https://user-images.githubusercontent.com/24250627/148896449-a716187e-0c7c-4d1b-a23e-c85d6842f097.png" alt="image"></p>
<pre><code>Content-Type: image/jpeg</code></pre><p>图片会默认打开预览</p>
<p>如果 修改 HTTP 头</p>
<pre><code>Content-Disposition: attachment
Content-Type: image/jpeg</code></pre><p><img src="https://user-images.githubusercontent.com/24250627/148896709-481b30f6-d521-41be-bd03-8c5179b305c4.png" alt="image"></p>
<p>这种情况会下载图片</p>
<pre><code>content-type: application/octet-stream</code></pre><p>这种设置会下载图片</p>
<p>其他情况具体需要测试</p>
</div><hr class="my-12"/><div class="font-sans"><div class="mb-12"><a target="_blank" href="https://github.com/xiaotiandada/blog/issues/91" class="font-medium border border-gray-700 hover:bg-gray-700 hover:text-gray-100 transition-all text-gray-700 text-sm rounded px-4 py-2">Add comment</a></div></div><div class="my-12"><div class="text-sm">Powered by <a class="underline" target="_blank" href="https://github.com/djyde/sairin">Sairin</a></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"I_kwDOD_pKSM5Bfdow","url":"https://github.com/xiaotiandada/blog/issues/91","title":"浏览器打开图片 URL 是显示还是下载","updatedAt":"2022-01-11T07:13:24Z","createdAt":"2022-01-11T06:55:22Z","body":"[访问存储在OSS中的资源时资源被强制下载](https://help.aliyun.com/document_detail/39545.html)\r\n\r\n[Content-Disposition](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition)\r\n\r\n\u003e## 问题原因\r\n\u003e\r\n\u003e访问存储在OSS的文件、图片等被强制下载的可能原因如下所示：\r\n\u003e\r\n\u003e- 使用OSS提供的默认域名，且没有经过其他配置。\r\n\u003e- 对应资源的Content-Type设置错误。Content-Type如果设置为application/octet-stream也会导致强制下载，这个是二进制的下载流。\r\n\u003e- 对应资源的Content-Disposition设置错误。Content-Disposition如果设置为attachment，就是会强制下载。\r\n\u003e- CDN缓存了错误的Content-Type或者Content-Disposition。\r\n\u003e- 浏览器不支持该格式资源的展示。\r\n\r\n条件问题只测试了没有域名，使用默认 OSS 提供的域名。\r\n\r\n图片1\r\n\r\nhttps://storageapi.fleek.co/andoroyur-team-bucket/metanetwork/users/metaio-storage/24jokhpxex0vg9bkcvav9xrn1.jpeg\r\n\r\n![image](https://user-images.githubusercontent.com/24250627/148896308-ab2fa536-f9fb-47f8-98c9-8b6af744cca3.png)\r\n\r\n```\r\ncontent-type: application/octet-stream\r\n```\r\n\r\n这张图片会默认下载\r\n\r\n图片2\r\n\r\nhttps://smartsignature-img.oss-cn-hongkong.aliyuncs.com/banner/2020/02/04/a60cf0aa4ec50c39196dbf97ceddbbc8.jpg\r\n\r\n![image](https://user-images.githubusercontent.com/24250627/148896449-a716187e-0c7c-4d1b-a23e-c85d6842f097.png)\r\n\r\n```\r\nContent-Type: image/jpeg\r\n```\r\n\r\n图片会默认打开预览\r\n\r\n如果 修改 HTTP 头\r\n\r\n```\r\nContent-Disposition: attachment\r\nContent-Type: image/jpeg\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/24250627/148896709-481b30f6-d521-41be-bd03-8c5179b305c4.png)\r\n\r\n这种情况会下载图片\r\n\r\n```\r\ncontent-type: application/octet-stream\r\n```\r\n\r\n这种设置会下载图片\r\n\r\n\r\n\r\n其他情况具体需要测试","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d\u0026v=4"},"html":"\u003cp\u003e\u003ca href=\"https://help.aliyun.com/document_detail/39545.html\"\u003e访问存储在OSS中的资源时资源被强制下载\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition\"\u003eContent-Disposition\u003c/a\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003ch2 id=\"问题原因\"\u003e问题原因\u003c/h2\u003e\n\u003cp\u003e访问存储在OSS的文件、图片等被强制下载的可能原因如下所示：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e使用OSS提供的默认域名，且没有经过其他配置。\u003c/li\u003e\n\u003cli\u003e对应资源的Content-Type设置错误。Content-Type如果设置为application/octet-stream也会导致强制下载，这个是二进制的下载流。\u003c/li\u003e\n\u003cli\u003e对应资源的Content-Disposition设置错误。Content-Disposition如果设置为attachment，就是会强制下载。\u003c/li\u003e\n\u003cli\u003eCDN缓存了错误的Content-Type或者Content-Disposition。\u003c/li\u003e\n\u003cli\u003e浏览器不支持该格式资源的展示。\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e条件问题只测试了没有域名，使用默认 OSS 提供的域名。\u003c/p\u003e\n\u003cp\u003e图片1\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://storageapi.fleek.co/andoroyur-team-bucket/metanetwork/users/metaio-storage/24jokhpxex0vg9bkcvav9xrn1.jpeg\"\u003ehttps://storageapi.fleek.co/andoroyur-team-bucket/metanetwork/users/metaio-storage/24jokhpxex0vg9bkcvav9xrn1.jpeg\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://user-images.githubusercontent.com/24250627/148896308-ab2fa536-f9fb-47f8-98c9-8b6af744cca3.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003econtent-type: application/octet-stream\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e这张图片会默认下载\u003c/p\u003e\n\u003cp\u003e图片2\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://smartsignature-img.oss-cn-hongkong.aliyuncs.com/banner/2020/02/04/a60cf0aa4ec50c39196dbf97ceddbbc8.jpg\"\u003ehttps://smartsignature-img.oss-cn-hongkong.aliyuncs.com/banner/2020/02/04/a60cf0aa4ec50c39196dbf97ceddbbc8.jpg\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://user-images.githubusercontent.com/24250627/148896449-a716187e-0c7c-4d1b-a23e-c85d6842f097.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eContent-Type: image/jpeg\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e图片会默认打开预览\u003c/p\u003e\n\u003cp\u003e如果 修改 HTTP 头\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eContent-Disposition: attachment\nContent-Type: image/jpeg\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cimg src=\"https://user-images.githubusercontent.com/24250627/148896709-481b30f6-d521-41be-bd03-8c5179b305c4.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003e这种情况会下载图片\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003econtent-type: application/octet-stream\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e这种设置会下载图片\u003c/p\u003e\n\u003cp\u003e其他情况具体需要测试\u003c/p\u003e\n","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true},"page":"/[...path]","query":{"path":["I_kwDOD_pKSM5Bfdow"]},"buildId":"YPEk3V-eoVeml18YoUSCM","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>