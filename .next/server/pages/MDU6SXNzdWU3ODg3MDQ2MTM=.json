{"pageProps":{"post":{"id":"MDU6SXNzdWU3ODg3MDQ2MTM=","url":"https://github.com/xiaotiandada/blog/issues/1","title":"lolSix周年活动页面","updatedAt":"2021-01-19T04:52:11Z","createdAt":"2021-01-19T04:52:11Z","body":"# 前言\r\n\r\n2018-03-19 12:27:36\r\n\r\n在掘金看到了一个大佬发的 [LOL六周年里的按钮动画](https://juejin.im/entry/59ad11f3f265da247158203d) 的文章, 觉得很有意思\r\n\r\n于是进 [lolSix周年活动页面](http://lol.qq.com/act/a20170810sixyears/index.html?ADTAG=lolweb.index) 看看效果 只剩下哇塞!哇塞!哇塞!\r\n\r\n于是自己决定试试,参考首页写一部分效果\r\n\r\nps: [demo](https://xiaotiandada.github.io/lolSix/) [demo仓库](https://github.com/xiaotiandada/lolSix)\r\n\r\n两个动画都是通过改变class来完成的效果\r\n\r\n``` bash\r\n(function () {\r\n    // 定义所需要的变量\r\n    let navBtns = $('#nav-ul i')\r\n    let navBtnli = $('#nav-ul li')\r\n    let navhs = $('#nav li')\r\n    let navhem = $('#nav em')\r\n    // 两个改变class的计数变量\r\n    let numLi = {\r\n        numi: 1,\r\n        numh: 1\r\n    }\r\n    // 清楚定时器的变量\r\n    let time = null\r\n\r\n    // 鼠标经过和移除 触发run方法\r\n    navBtnli.on('mouseover', function () {\r\n        let navI = $(this).children('i')\r\n        run(navI, 'ans2_btn', numLi.numi)\r\n    })\r\n    navBtnli.on('mouseout', function () {\r\n        let target = $(this).children('i')\r\n        stop(target)\r\n    })\r\n\r\n    navhs.on('mouseover', function () {\r\n        $(this).removeClass('ligb')\r\n        let navh = $(this).children('em')\r\n        run(navh, 'ans_btn', numLi.numh)\r\n    })\r\n\r\n    navhs.on('mouseout', function () {\r\n        let target = $(this).children('em')\r\n        stop(target)\r\n        $(this).addClass('ligb')\r\n    })\r\n\r\n    // 接受三个参数, 需要改变的对象, 需要改变的名字, 需要改变的数\r\n    function run(obj, name, num) {\r\n        // js定时器setTimeout 无法调用局部变量的解决办法\r\n        function runs() {\r\n            if (num > 25) {\r\n                num = 1\r\n            }\r\n            obj.css('display', 'block')\r\n            obj.removeClass()\r\n            obj.addClass(nameNav + num)\r\n            num++\r\n            time = setTimeout(function () {\r\n                clearTimeout(time)\r\n                runs()\r\n            }, 30)\r\n        }\r\n        runs()\r\n    }\r\n    // 停止动画\r\n    function stop(target) {\r\n        clearTimeout(time)\r\n        target.css('display', 'none')\r\n    }\r\n\r\n})()\r\n```\r\n\r\nhtml结构请参考 官方页面或者我的仓库里面的html文件\r\n\r\n然后就是中间的 flash 动画,使用了html object标签,\r\n\r\n但是我在Ubuntu上面chrome测试的时候正常没有问题,(自己在Ubuntu开虚拟机上win测试,IE11,360有效果,chrome,firefox就没有了,懵逼 希望有大佬可以跟我提点一二)\r\n\r\n但是在Firefox测试的时候不会显示,\r\n\r\n于是用了兼容的处理方法,先贴一个通用的处理方法(自己也研究了一会儿,第一次接触2333~~),\r\n\r\n``` bash\r\n    // 这是活动页面的解决办法\r\n    // 大家也可以看看这个文档 https://github.com/swfobject/swfobject \r\n    // An open source Javascript framework for detecting the Adobe Flash Player plugin and embedding Flash (swf) files.\r\n    // 自己英文比较垃圾 chrome 翻译过来就是\r\n    // 用于检测Adobe Flash Player插件并嵌入Flash（swf）文件的开源Javascript框架。\r\n\r\n    // 这个文件可以引用腾讯的,也可以下载,也可以新建文件复制粘贴\r\n    <script src=\"./public/js/swfobject.js\"></script>\r\n    <script src=\"index.swf\"></script>\r\n    <script>\r\n        var params = {\r\n            scale: \"noscale\",\r\n            wmode: \"transparent\",\r\n            align: \"middle\",\r\n            allowFullscreen: \"true\",\r\n            allowScriptAccess: \"always\",\r\n            FlashVars: \"timer=1480586966506&endtimer=1481094000000\"\r\n        }\r\n        swfobject.embedSWF(\"index.swf\", \"mymovie\", \"100%\", \"670\", \"8.0.0\",\"expressInstall.swf\", null, params);\r\n    </script>\r\n```\r\n\r\n虽然解决了引入swf动画的兼容问题,但是在firefox上面根本不显示啊 23333~~~\r\n\r\n大佬的解决办法非常简单 请继续细心观看文章!\r\n\r\n``` bash\r\n// 提前在html结构上面写一个静态的替代图片,然后隐藏\r\n<div class=\"logob\">英雄联盟6周年盛典</div>\r\n\r\n// 这里是swf文件的位置\r\n<div id=\"mymovie\" class=\"mymovie\"></div>\r\n\r\n// 通过判断 来显示静态图片(虽然没有了swf动画,但是总不不显示比较好 赞 学习了~!)\r\n setTimeout(function () {\r\n    if ($(\".mymovie\").length > 0) {\r\n        $(\".logob\").css({\r\n            \"display\": \"block\"\r\n        });\r\n    }\r\n}, 1000)\r\n```","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&v=4"},"html":"<h1 id=\"前言\">前言</h1>\n<p>2018-03-19 12:27:36</p>\n<p>在掘金看到了一个大佬发的 <a href=\"https://juejin.im/entry/59ad11f3f265da247158203d\">LOL六周年里的按钮动画</a> 的文章, 觉得很有意思</p>\n<p>于是进 <a href=\"http://lol.qq.com/act/a20170810sixyears/index.html?ADTAG=lolweb.index\">lolSix周年活动页面</a> 看看效果 只剩下哇塞!哇塞!哇塞!</p>\n<p>于是自己决定试试,参考首页写一部分效果</p>\n<p>ps: <a href=\"https://xiaotiandada.github.io/lolSix/\">demo</a> <a href=\"https://github.com/xiaotiandada/lolSix\">demo仓库</a></p>\n<p>两个动画都是通过改变class来完成的效果</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">(function () {\n    // 定义所需要的变量\n    let navBtns = $('#nav-ul i')\n    let navBtnli = $('#nav-ul li')\n    let navhs = $('#nav li')\n    let navhem = $('#nav em')\n    // 两个改变class的计数变量\n    let numLi = {\n        numi: 1,\n        numh: 1\n    }\n    // 清楚定时器的变量\n    let time = null\n\n    // 鼠标经过和移除 触发run方法\n    navBtnli.on('mouseover', function () {\n        let navI = $(this).children('i')\n        run(navI, 'ans2_btn', numLi.numi)\n    })\n    navBtnli.on('mouseout', function () {\n        let target = $(this).children('i')\n        stop(target)\n    })\n\n    navhs.on('mouseover', function () {\n        $(this).removeClass('ligb')\n        let navh = $(this).children('em')\n        run(navh, 'ans_btn', numLi.numh)\n    })\n\n    navhs.on('mouseout', function () {\n        let target = $(this).children('em')\n        stop(target)\n        $(this).addClass('ligb')\n    })\n\n    // 接受三个参数, 需要改变的对象, 需要改变的名字, 需要改变的数\n    function run(obj, name, num) {\n        // js定时器setTimeout 无法调用局部变量的解决办法\n        function runs() {\n            if (num > 25) {\n                num = 1\n            }\n            obj.css('display', 'block')\n            obj.removeClass()\n            obj.addClass(nameNav + num)\n            num++\n            time = setTimeout(function () {\n                clearTimeout(time)\n                runs()\n            }, 30)\n        }\n        runs()\n    }\n    // 停止动画\n    function stop(target) {\n        clearTimeout(time)\n        target.css('display', 'none')\n    }\n\n})()</code></pre><p>html结构请参考 官方页面或者我的仓库里面的html文件</p>\n<p>然后就是中间的 flash 动画,使用了html object标签,</p>\n<p>但是我在Ubuntu上面chrome测试的时候正常没有问题,(自己在Ubuntu开虚拟机上win测试,IE11,360有效果,chrome,firefox就没有了,懵逼 希望有大佬可以跟我提点一二)</p>\n<p>但是在Firefox测试的时候不会显示,</p>\n<p>于是用了兼容的处理方法,先贴一个通用的处理方法(自己也研究了一会儿,第一次接触2333~~),</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">    // 这是活动页面的解决办法\n    // 大家也可以看看这个文档 https://github.com/swfobject/swfobject \n    // An open source Javascript framework for detecting the Adobe Flash Player plugin and embedding Flash (swf) files.\n    // 自己英文比较垃圾 chrome 翻译过来就是\n    // 用于检测Adobe Flash Player插件并嵌入Flash（swf）文件的开源Javascript框架。\n\n    // 这个文件可以引用腾讯的,也可以下载,也可以新建文件复制粘贴\n    <script src=\"./public/js/swfobject.js\"></script>\n    <script src=\"index.swf\"></script>\n    <script>\n        var params = {\n            scale: \"noscale\",\n            wmode: \"transparent\",\n            align: \"middle\",\n            allowFullscreen: \"true\",\n            allowScriptAccess: \"always\",\n            FlashVars: \"timer=1480586966506&endtimer=1481094000000\"\n        }\n        swfobject.embedSWF(\"index.swf\", \"mymovie\", \"100%\", \"670\", \"8.0.0\",\"expressInstall.swf\", null, params);\n    </script></code></pre><p>虽然解决了引入swf动画的兼容问题,但是在firefox上面根本不显示啊 23333~~~</p>\n<p>大佬的解决办法非常简单 请继续细心观看文章!</p>\n<pre class=\"language-bash\"><code class=\"language-bash\">// 提前在html结构上面写一个静态的替代图片,然后隐藏\n<div class=\"logob\">英雄联盟6周年盛典</div>\n\n// 这里是swf文件的位置\n<div id=\"mymovie\" class=\"mymovie\"></div>\n\n// 通过判断 来显示静态图片(虽然没有了swf动画,但是总不不显示比较好 赞 学习了~!)\n setTimeout(function () {\n    if ($(\".mymovie\").length > 0) {\n        $(\".logob\").css({\n            \"display\": \"block\"\n        });\n    }\n}, 1000)</code></pre>","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true}