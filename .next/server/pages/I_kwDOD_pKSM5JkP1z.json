{"pageProps":{"post":{"id":"I_kwDOD_pKSM5JkP1z","url":"https://github.com/xiaotiandada/blog/issues/107","title":"seo","updatedAt":"2022-05-20T03:33:29Z","createdAt":"2022-05-12T16:40:12Z","body":"- https://search.google.com/search-console/about\r\n- https://analytics.google.com/analytics/web/\r\n- https://ziyuan.baidu.com/linksubmit/url?sitename=\r\n- https://tongji.baidu.com/web/welcome/login\r\n- https://github.com/w3itch-crafter/w3itch-frontend/issues/129\r\n\r\n---\r\n\r\n- [google search console 终极教程](https://zhuanlan.zhihu.com/p/150718629)\r\n- [关于Robots.txt和SEO: 你所需要知道的一切](https://ahrefs.com/blog/zh/robots-txt/)\r\n- https://github.com/iamvishnusankar/next-sitemap#building-sitemaps\r\n\r\nNext 使用 next-sitemap\r\n\r\n### Server side index-sitemaps (getServerSideSitemapIndex)\r\n生成 sitemaps 索引，在大文件拆分应该可以用到\r\n\r\n- https://github.com/iamvishnusankar/next-sitemap#server-side-index-sitemaps-getserversidesitemapindex\r\n\r\n```tsx\r\n// pages/server-sitemap-index.xml/index.tsx\r\nimport { getServerSideSitemapIndex } from 'next-sitemap'\r\nimport { GetServerSideProps } from 'next'\r\n\r\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\r\n  // Method to source urls from cms\r\n  // const urls = await fetch('https//example.com/api')\r\n\r\n  return getServerSideSitemapIndex(ctx, [\r\n    'https://example.com/path-1.xml',\r\n    'https://example.com/path-2.xml',\r\n  ])\r\n}\r\n\r\n// Default export to prevent next.js errors\r\nexport default function SitemapIndex() {}\r\n```\r\n\r\n```xml\r\n<sitemapindex xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\r\n<sitemap>\r\n<loc>https://example.com/path-1.xml</loc>\r\n</sitemap>\r\n<sitemap>\r\n</sitemapindex>\r\n```\r\n\r\n### server side sitemap (getServerSideSitemap)\r\n生成 sitemaps\r\n\r\n- https://github.com/iamvishnusankar/next-sitemap#server-side-sitemap-getserversidesitemap\r\n\r\n```tsx\r\n// pages/server-sitemap.xml/index.tsx\r\n\r\nimport { getServerSideSitemap } from 'next-sitemap'\r\nimport { GetServerSideProps } from 'next'\r\n\r\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\r\n  // Method to source urls from cms\r\n  // const urls = await fetch('https//example.com/api')\r\n\r\n  const fields = [\r\n    {\r\n      loc: 'https://example.com', // Absolute url\r\n      lastmod: new Date().toISOString(),\r\n      // changefreq\r\n      // priority\r\n    },\r\n    {\r\n      loc: 'https://example.com/dynamic-path-2', // Absolute url\r\n      lastmod: new Date().toISOString(),\r\n      // changefreq\r\n      // priority\r\n    },\r\n  ]\r\n\r\n  return getServerSideSitemap(ctx, fields)\r\n}\r\n\r\n// Default export to prevent next.js errors\r\nexport default function Sitemap() {}\r\n```\r\n`fields` TS is `ISitemapField[]`\r\n\r\n```xml\r\n<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:mobile=\"http://www.google.com/schemas/sitemap-mobile/1.0\" xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\" xmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\">\r\n<url>\r\n<loc>https://demo.io/game/65</loc>\r\n<lastmod>2022-05-12T16:35:07.696Z</lastmod>\r\n<changefreq>daily</changefreq>\r\n<priority>0.7</priority>\r\n</url>\r\n</urlset>\r\n```\r\n\r\n### JSON-LD\r\n- https://github.com/garmeeh/next-seo#json-ld\r\n- https://search.google.com/test/rich-results\r\n- https://developers.google.com/search/docs/advanced/robots/robots_meta_tag?hl=zh-cn\r\n\r\n\r\n\r\n<img width=\"791\" alt=\"image\" src=\"https://user-images.githubusercontent.com/24250627/168475174-bc6729eb-1d65-4791-9f59-c16b5aba4c20.png\">\r\n","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&v=4"},"html":"<ul>\n<li><a href=\"https://search.google.com/search-console/about\">https://search.google.com/search-console/about</a></li>\n<li><a href=\"https://analytics.google.com/analytics/web/\">https://analytics.google.com/analytics/web/</a></li>\n<li><a href=\"https://ziyuan.baidu.com/linksubmit/url?sitename=\">https://ziyuan.baidu.com/linksubmit/url?sitename=</a></li>\n<li><a href=\"https://tongji.baidu.com/web/welcome/login\">https://tongji.baidu.com/web/welcome/login</a></li>\n<li><a href=\"https://github.com/w3itch-crafter/w3itch-frontend/issues/129\">https://github.com/w3itch-crafter/w3itch-frontend/issues/129</a></li>\n</ul>\n<hr>\n<ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/150718629\">google search console 终极教程</a></li>\n<li><a href=\"https://ahrefs.com/blog/zh/robots-txt/\">关于Robots.txt和SEO: 你所需要知道的一切</a></li>\n<li><a href=\"https://github.com/iamvishnusankar/next-sitemap#building-sitemaps\">https://github.com/iamvishnusankar/next-sitemap#building-sitemaps</a></li>\n</ul>\n<p>Next 使用 next-sitemap</p>\n<h3 id=\"server-side-index-sitemaps-getserversidesitemapindex\">Server side index-sitemaps (getServerSideSitemapIndex)</h3>\n<p>生成 sitemaps 索引，在大文件拆分应该可以用到</p>\n<ul>\n<li><a href=\"https://github.com/iamvishnusankar/next-sitemap#server-side-index-sitemaps-getserversidesitemapindex\">https://github.com/iamvishnusankar/next-sitemap#server-side-index-sitemaps-getserversidesitemapindex</a></li>\n</ul>\n<pre class=\"language-tsx\"><code class=\"language-tsx\">// pages/server-sitemap-index.xml/index.tsx\nimport { getServerSideSitemapIndex } from 'next-sitemap'\nimport { GetServerSideProps } from 'next'\n\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\n  // Method to source urls from cms\n  // const urls = await fetch('https//example.com/api')\n\n  return getServerSideSitemapIndex(ctx, [\n    'https://example.com/path-1.xml',\n    'https://example.com/path-2.xml',\n  ])\n}\n\n// Default export to prevent next.js errors\nexport default function SitemapIndex() {}</code></pre><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>sitemapindex</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.sitemaps.org/schemas/sitemap/0.9<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>sitemap</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>https://example.com/path-1.xml<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>sitemap</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>sitemap</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>sitemapindex</span><span class=\"token punctuation\">></span></span></code></pre><h3 id=\"server-side-sitemap-getserversidesitemap\">server side sitemap (getServerSideSitemap)</h3>\n<p>生成 sitemaps</p>\n<ul>\n<li><a href=\"https://github.com/iamvishnusankar/next-sitemap#server-side-sitemap-getserversidesitemap\">https://github.com/iamvishnusankar/next-sitemap#server-side-sitemap-getserversidesitemap</a></li>\n</ul>\n<pre class=\"language-tsx\"><code class=\"language-tsx\">// pages/server-sitemap.xml/index.tsx\n\nimport { getServerSideSitemap } from 'next-sitemap'\nimport { GetServerSideProps } from 'next'\n\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\n  // Method to source urls from cms\n  // const urls = await fetch('https//example.com/api')\n\n  const fields = [\n    {\n      loc: 'https://example.com', // Absolute url\n      lastmod: new Date().toISOString(),\n      // changefreq\n      // priority\n    },\n    {\n      loc: 'https://example.com/dynamic-path-2', // Absolute url\n      lastmod: new Date().toISOString(),\n      // changefreq\n      // priority\n    },\n  ]\n\n  return getServerSideSitemap(ctx, fields)\n}\n\n// Default export to prevent next.js errors\nexport default function Sitemap() {}</code></pre><p><code>fields</code> TS is <code>ISitemapField[]</code></p>\n<pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>urlset</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.sitemaps.org/schemas/sitemap/0.9<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>news</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-news/0.9<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xhtml</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/xhtml<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>mobile</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-mobile/1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>image</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-image/1.1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>video</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.google.com/schemas/sitemap-video/1.1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>loc</span><span class=\"token punctuation\">></span></span>https://demo.io/game/65<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>loc</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>lastmod</span><span class=\"token punctuation\">></span></span>2022-05-12T16:35:07.696Z<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>lastmod</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>changefreq</span><span class=\"token punctuation\">></span></span>daily<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>changefreq</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>priority</span><span class=\"token punctuation\">></span></span>0.7<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>priority</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>urlset</span><span class=\"token punctuation\">></span></span></code></pre><h3 id=\"json-ld\">JSON-LD</h3>\n<ul>\n<li><a href=\"https://github.com/garmeeh/next-seo#json-ld\">https://github.com/garmeeh/next-seo#json-ld</a></li>\n<li><a href=\"https://search.google.com/test/rich-results\">https://search.google.com/test/rich-results</a></li>\n<li><a href=\"https://developers.google.com/search/docs/advanced/robots/robots_meta_tag?hl=zh-cn\">https://developers.google.com/search/docs/advanced/robots/robots_meta_tag?hl=zh-cn</a></li>\n</ul>\n<img width=\"791\" alt=\"image\" src=\"https://user-images.githubusercontent.com/24250627/168475174-bc6729eb-1d65-4791-9f59-c16b5aba4c20.png\">\n","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true}