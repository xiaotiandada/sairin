{"pageProps":{"post":{"id":"MDU6SXNzdWU4NTI1MTM0NzA=","url":"https://github.com/xiaotiandada/blog/issues/77","title":"Snabbdom example","updatedAt":"2021-06-08T17:34:21Z","createdAt":"2021-04-07T15:12:19Z","body":"https://github.com/snabbdom/snabbdom\r\n\r\nhttps://github.com/snabbdom/snabbdom/tree/master/examples\r\n\r\n### Count\r\n\r\n通过 View 生成 dom，然后调用 render 渲染\r\n\r\n```javascript\r\nimport {\r\n  init,\r\n  classModule,\r\n  propsModule,\r\n  styleModule,\r\n  eventListenersModule,\r\n  h,\r\n} from \"snabbdom\";\r\n\r\nconst patch = init([\r\n  // Init patch function with chosen modules\r\n  classModule, // makes it easy to toggle classes\r\n  propsModule, // for setting properties on DOM elements\r\n  styleModule, // handles styling on elements with support for animations\r\n  eventListenersModule, // attaches event listeners\r\n]);\r\n\r\nlet vnode;\r\nlet count = 0\r\n\r\nconst increase = () => {\r\n  count++\r\n  console.log('count increase', count)\r\n  render();\r\n}\r\nconst decrease = () =>{\r\n  count--\r\n  console.log('count decrease', count)\r\n  render();\r\n}\r\n\r\nconst view = () => {\r\n  return h(\"div#container.two.classes\", [\r\n    h(\"span\", { style: { fontWeight: \"bold\" } }, \"Number\"),\r\n    h('span', ` Count: ${count} `),\r\n    h('button', { on: { click: increase } }, \"Increase\"),\r\n    h('button', { on: { click: decrease }}, \"Decrease\")\r\n  ]);\r\n}\r\n\r\nfunction render() {\r\n  vnode = patch(vnode, view());\r\n}\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  let container = document.getElementById(\"container\");\r\n  vnode = patch(container, view());\r\n  render();\r\n});\r\n```\r\n\r\n### Svg\r\n\r\n```javascript\r\nimport { init, attributesModule, h } from \"snabbdom\";\r\n\r\nconst patch = init([attributesModule]);\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  const container = document.getElementById(\"container2\");\r\n  const vnode = h(\"div\", [\r\n    h(\"svg\", { attrs: { width: 100, height: 100 } }, [\r\n      h(\"circle\", {\r\n        attrs: {\r\n          cx: 50,\r\n          cy: 50,\r\n          r: 40,\r\n          stroke: \"green\",\r\n          \"stroke-width\": 4,\r\n          fill: \"yellow\",\r\n        },\r\n      }),\r\n    ]),\r\n  ]);\r\n  patch(container, vnode);\r\n});\r\n```\r\n\r\n### Carousel svg\r\n\r\n```javascript\r\nimport {\r\n  init,\r\n  attributesModule,\r\n  styleModule,\r\n  eventListenersModule,\r\n  h,\r\n} from \"snabbdom\";\r\n\r\nconst patch = init([attributesModule, styleModule, eventListenersModule]);\r\n\r\nlet vnode;\r\n\r\nlet data = {\r\n  degRotation: 0,\r\n};\r\n\r\nfunction gRotation() {\r\n  // console.log(\"gRotation: %s\", data.degRotation);\r\n  return \"rotate(\" + data.degRotation + \"deg)\";\r\n}\r\n\r\nfunction triangleClick(id) {\r\n  console.log(\"triangleClick: %s\", id);\r\n  render();\r\n}\r\n\r\nfunction handleRotate(degs) {\r\n  data.degRotation += degs;\r\n  console.log(\"handleRotate: %s, %s\", degs, data.degRotation);\r\n  render();\r\n}\r\n\r\nfunction handleReset(degs) {\r\n  data.degRotation = degs;\r\n  console.log(\"handleReset: %s\", degs);\r\n  render();\r\n}\r\n\r\nfunction render() {\r\n  vnode = patch(vnode, view(data));\r\n}\r\n\r\nconst hTriangle = (id, degRotation) =>\r\n  h(\"polygon#\" + id, {\r\n    attrs: {\r\n      points: \"-50,-88 0,-175 50,-88\",\r\n      transform: \"rotate(\" + degRotation + \")\",\r\n      \"stroke-width\": 3,\r\n    },\r\n    on: {\r\n      click: () => {\r\n        triangleClick(id);\r\n      },\r\n    },\r\n  });\r\n\r\nconst view = () =>\r\n  h(\"div.view\", [\r\n    h(\"h1\", \"Snabbdom SVG Carousel\"),\r\n    h(\r\n      \"svg\",\r\n      { attrs: { width: 380, height: 380, viewBox: [-190, -190, 380, 380] } },\r\n      [\r\n        h(\r\n          \"g#carousel\",\r\n          {\r\n            style: { \"-webkit-transform\": gRotation(), transform: gRotation(), transition: 'all .3s' },\r\n          },\r\n          [\r\n            hTriangle(\"yellow\", 0),\r\n            hTriangle(\"green\", 60),\r\n            hTriangle(\"magenta\", 120),\r\n            hTriangle(\"red\", 180),\r\n            hTriangle(\"cyan\", 240),\r\n            hTriangle(\"blue\", 300),\r\n          ]\r\n        ),\r\n      ]\r\n    ),\r\n    h(\r\n      \"button\",\r\n      {\r\n        on: {\r\n          click: () => {\r\n            handleRotate(60);\r\n          },\r\n        },\r\n      },\r\n      \"Rotate Clockwise\"\r\n    ),\r\n    h(\r\n      \"button\",\r\n      {\r\n        on: {\r\n          click: () => {\r\n            handleRotate(-60);\r\n          },\r\n        },\r\n      },\r\n      \"Rotate Anticlockwise\"\r\n    ),\r\n    h(\r\n      \"button\",\r\n      {\r\n        on: {\r\n          click: () => {\r\n            handleReset(0);\r\n          },\r\n        },\r\n      },\r\n      \"Reset\"\r\n    ),\r\n  ]);\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  const container = document.getElementById(\"container1\");\r\n  vnode = patch(container, view(data));\r\n  render();\r\n});\r\n```\r\n\r\n### Carousel animation\r\n\r\n```javascript\r\nimport {\r\n  init,\r\n  classModule,\r\n  propsModule,\r\n  styleModule,\r\n  eventListenersModule,\r\n  h,\r\n} from \"snabbdom\";\r\n\r\nconst patch = init([\r\n  classModule,\r\n  propsModule,\r\n  styleModule,\r\n  eventListenersModule,\r\n]);\r\n\r\nlet vnode;\r\n\r\nlet nextKey = 11;\r\nconst margin = 8;\r\nlet sortBy = \"rank\";\r\nlet totalHeight = 0;\r\nconst originalData = [\r\n  {\r\n    rank: 1,\r\n    title: \"The Shawshank Redemption\",\r\n    desc:\r\n      \"Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.\",\r\n    elmHeight: 0,\r\n  },\r\n  {\r\n    rank: 2,\r\n    title: \"The Godfather\",\r\n    desc:\r\n      \"The aging patriarch of an organized crime dynasty transfers control of his clandestine empire to his reluctant son.\",\r\n    elmHeight: 0,\r\n  },\r\n  {\r\n    rank: 3,\r\n    title: \"The Godfather: Part II\",\r\n    desc:\r\n      \"The early life and career of Vito Corleone in 1920s New York is portrayed while his son, Michael, expands and tightens his grip on his crime syndicate stretching from Lake Tahoe, Nevada to pre-revolution 1958 Cuba.\",\r\n    elmHeight: 0,\r\n  },\r\n  {\r\n    rank: 4,\r\n    title: \"The Dark Knight\",\r\n    desc:\r\n      \"When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, the caped crusader must come to terms with one of the greatest psychological tests of his ability to fight injustice.\",\r\n    elmHeight: 0,\r\n  },\r\n  {\r\n    rank: 5,\r\n    title: \"Pulp Fiction\",\r\n    desc:\r\n      \"The lives of two mob hit men, a boxer, a gangster's wife, and a pair of diner bandits intertwine in four tales of violence and redemption.\",\r\n    elmHeight: 0,\r\n  },\r\n  {\r\n    rank: 6,\r\n    title: \"Schindler's List\",\r\n    desc:\r\n      \"In Poland during World War II, Oskar Schindler gradually becomes concerned for his Jewish workforce after witnessing their persecution by the Nazis.\",\r\n    elmHeight: 0,\r\n  },\r\n  {\r\n    rank: 7,\r\n    title: \"12 Angry Men\",\r\n    desc:\r\n      \"A dissenting juror in a murder trial slowly manages to convince the others that the case is not as obviously clear as it seemed in court.\",\r\n    elmHeight: 0,\r\n  },\r\n  {\r\n    rank: 8,\r\n    title: \"The Good, the Bad and the Ugly\",\r\n    desc:\r\n      \"A bounty hunting scam joins two men in an uneasy alliance against a third in a race to find a fortune in gold buried in a remote cemetery.\",\r\n    elmHeight: 0,\r\n  },\r\n  {\r\n    rank: 9,\r\n    title: \"The Lord of the Rings: The Return of the King\",\r\n    desc:\r\n      \"Gandalf and Aragorn lead the World of Men against Sauron's army to draw his gaze from Frodo and Sam as they approach Mount Doom with the One Ring.\",\r\n    elmHeight: 0,\r\n  },\r\n  {\r\n    rank: 10,\r\n    title: \"Fight Club\",\r\n    desc:\r\n      \"An insomniac office worker looking for a way to change his life crosses paths with a devil-may-care soap maker and they form an underground fight club that evolves into something much, much more...\",\r\n    elmHeight: 0,\r\n  },\r\n];\r\nlet data = [\r\n  originalData[0],\r\n  originalData[1],\r\n  originalData[2],\r\n  originalData[3],\r\n  originalData[4],\r\n  originalData[5],\r\n  originalData[6],\r\n  originalData[7],\r\n  originalData[8],\r\n  originalData[9],\r\n];\r\n\r\nfunction changeSort(prop) {\r\n  sortBy = prop;\r\n  data.sort((a, b) => {\r\n    if (a[prop] > b[prop]) {\r\n      return 1;\r\n    }\r\n    if (a[prop] < b[prop]) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  });\r\n  render();\r\n}\r\n\r\nfunction add() {\r\n  const n = originalData[Math.floor(Math.random() * 10)];\r\n  data = [\r\n    { rank: nextKey++, title: n.title, desc: n.desc, elmHeight: 0 },\r\n  ].concat(data);\r\n  render();\r\n  render();\r\n}\r\n\r\nfunction remove(movie) {\r\n  data = data.filter((m) => {\r\n    return m !== movie;\r\n  });\r\n  render();\r\n}\r\n\r\nfunction movieView(movie) {\r\n  return h(\r\n    \"div.row\",\r\n    {\r\n      key: movie.rank,\r\n      style: {\r\n        opacity: \"0\",\r\n        transform: \"translate(-200px)\",\r\n        delayed: { transform: `translateY(${movie.offset}px)`, opacity: \"1\" },\r\n        remove: {\r\n          opacity: \"0\",\r\n          transform: `translateY(${movie.offset}px) translateX(200px)`,\r\n        },\r\n      },\r\n      hook: {\r\n        insert: (vnode) => {\r\n          movie.elmHeight = vnode.elm.offsetHeight;\r\n        },\r\n      },\r\n    },\r\n    [\r\n      h(\"div\", { style: { fontWeight: \"bold\" } }, movie.rank),\r\n      h(\"div\", movie.title),\r\n      h(\"div\", movie.desc),\r\n      h(\r\n        \"div.btn.rm-btn\",\r\n        {\r\n          on: {\r\n            click: () => {\r\n              remove(movie);\r\n            },\r\n          },\r\n        },\r\n        \"x\"\r\n      ),\r\n    ]\r\n  );\r\n}\r\n\r\nfunction render() {\r\n  data = data.reduce((acc, m) => {\r\n    console.log('acc', acc)\r\n    console.log('m', m)\r\n    const last = acc[acc.length - 1];\r\n    m.offset = last ? last.offset + last.elmHeight + margin : margin;\r\n    return acc.concat(m);\r\n  }, []);\r\n  totalHeight =\r\n    data.length === 0\r\n      ? 0\r\n      : data[data.length - 1].offset + data[data.length - 1].elmHeight;\r\n  vnode = patch(vnode, view(data));\r\n}\r\n\r\nfunction view(data) {\r\n  return h(\"div\", [\r\n    h(\"h1\", \"Top 10 movies\"),\r\n    h(\"div\", [\r\n      h(\"a.btn.add\", { on: { click: add } }, \"Add\"),\r\n      \"Sort by: \",\r\n      h(\"span.btn-group\", [\r\n        h(\r\n          \"a.btn.rank\",\r\n          {\r\n            class: { active: sortBy === \"rank\" },\r\n            on: {\r\n              click: () => {\r\n                changeSort(\"rank\");\r\n              },\r\n            },\r\n          },\r\n          \"Rank\"\r\n        ),\r\n        h(\r\n          \"a.btn.title\",\r\n          {\r\n            class: { active: sortBy === \"title\" },\r\n            on: {\r\n              click: () => {\r\n                changeSort(\"title\");\r\n              },\r\n            },\r\n          },\r\n          \"Title\"\r\n        ),\r\n        h(\r\n          \"a.btn.desc\",\r\n          {\r\n            class: { active: sortBy === \"desc\" },\r\n            on: {\r\n              click: () => {\r\n                changeSort(\"desc\");\r\n              },\r\n            },\r\n          },\r\n          \"Description\"\r\n        ),\r\n      ]),\r\n    ]),\r\n    h(\r\n      \"div.list\",\r\n      { style: { height: totalHeight + \"px\" } },\r\n      data.map(movieView)\r\n    ),\r\n  ]);\r\n}\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  const container = document.getElementById(\"container3\");\r\n  vnode = patch(container, view(data));\r\n  render();\r\n});\r\n```\r\n\r\n### Hero\r\n\r\n...","comments":{"nodes":[]},"reactionGroups":[{"content":"THUMBS_UP","reactors":{"totalCount":0}},{"content":"THUMBS_DOWN","reactors":{"totalCount":0}},{"content":"LAUGH","reactors":{"totalCount":0}},{"content":"HOORAY","reactors":{"totalCount":0}},{"content":"CONFUSED","reactors":{"totalCount":0}},{"content":"HEART","reactors":{"totalCount":0}},{"content":"ROCKET","reactors":{"totalCount":0}},{"content":"EYES","reactors":{"totalCount":0}}],"author":{"login":"xiaotiandada","url":"https://github.com/xiaotiandada","avatarUrl":"https://avatars.githubusercontent.com/u/24250627?u=51a93e07957381123eb9fbdd6407de36033b578d&v=4"},"html":"<p><a href=\"https://github.com/snabbdom/snabbdom\">https://github.com/snabbdom/snabbdom</a></p>\n<p><a href=\"https://github.com/snabbdom/snabbdom/tree/master/examples\">https://github.com/snabbdom/snabbdom/tree/master/examples</a></p>\n<h3 id=\"count\">Count</h3>\n<p>通过 View 生成 dom，然后调用 render 渲染</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  init<span class=\"token punctuation\">,</span>\n  classModule<span class=\"token punctuation\">,</span>\n  propsModule<span class=\"token punctuation\">,</span>\n  styleModule<span class=\"token punctuation\">,</span>\n  eventListenersModule<span class=\"token punctuation\">,</span>\n  h<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"snabbdom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> patch <span class=\"token operator\">=</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">// Init patch function with chosen modules</span>\n  classModule<span class=\"token punctuation\">,</span> <span class=\"token comment\">// makes it easy to toggle classes</span>\n  propsModule<span class=\"token punctuation\">,</span> <span class=\"token comment\">// for setting properties on DOM elements</span>\n  styleModule<span class=\"token punctuation\">,</span> <span class=\"token comment\">// handles styling on elements with support for animations</span>\n  eventListenersModule<span class=\"token punctuation\">,</span> <span class=\"token comment\">// attaches event listeners</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> vnode<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increase</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  count<span class=\"token operator\">++</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count increase'</span><span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">decrease</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n  count<span class=\"token operator\">--</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count decrease'</span><span class=\"token punctuation\">,</span> count<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">view</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div#container.two.classes\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"span\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bold\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Number\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> Count: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">click</span><span class=\"token operator\">:</span> increase <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Increase\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">click</span><span class=\"token operator\">:</span> decrease <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Decrease\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  vnode <span class=\"token operator\">=</span> <span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>vnode<span class=\"token punctuation\">,</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DOMContentLoaded\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"container\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  vnode <span class=\"token operator\">=</span> <span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">,</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"svg\">Svg</h3>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> init<span class=\"token punctuation\">,</span> attributesModule<span class=\"token punctuation\">,</span> h <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"snabbdom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> patch <span class=\"token operator\">=</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>attributesModule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DOMContentLoaded\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"container2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> vnode <span class=\"token operator\">=</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"svg\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">attrs</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"circle\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">attrs</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">cx</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">cy</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">r</span><span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">stroke</span><span class=\"token operator\">:</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string-property property\">\"stroke-width\"</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">fill</span><span class=\"token operator\">:</span> <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">,</span> vnode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"carousel-svg\">Carousel svg</h3>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  init<span class=\"token punctuation\">,</span>\n  attributesModule<span class=\"token punctuation\">,</span>\n  styleModule<span class=\"token punctuation\">,</span>\n  eventListenersModule<span class=\"token punctuation\">,</span>\n  h<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"snabbdom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> patch <span class=\"token operator\">=</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>attributesModule<span class=\"token punctuation\">,</span> styleModule<span class=\"token punctuation\">,</span> eventListenersModule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> vnode<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">degRotation</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">gRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// console.log(\"gRotation: %s\", data.degRotation);</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">\"rotate(\"</span> <span class=\"token operator\">+</span> data<span class=\"token punctuation\">.</span>degRotation <span class=\"token operator\">+</span> <span class=\"token string\">\"deg)\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">triangleClick</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"triangleClick: %s\"</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleRotate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">degs</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  data<span class=\"token punctuation\">.</span>degRotation <span class=\"token operator\">+=</span> degs<span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"handleRotate: %s, %s\"</span><span class=\"token punctuation\">,</span> degs<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">.</span>degRotation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleReset</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">degs</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  data<span class=\"token punctuation\">.</span>degRotation <span class=\"token operator\">=</span> degs<span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"handleReset: %s\"</span><span class=\"token punctuation\">,</span> degs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  vnode <span class=\"token operator\">=</span> <span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>vnode<span class=\"token punctuation\">,</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">hTriangle</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> degRotation</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"polygon#\"</span> <span class=\"token operator\">+</span> id<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">attrs</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">points</span><span class=\"token operator\">:</span> <span class=\"token string\">\"-50,-88 0,-175 50,-88\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">\"rotate(\"</span> <span class=\"token operator\">+</span> degRotation <span class=\"token operator\">+</span> <span class=\"token string\">\")\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string-property property\">\"stroke-width\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">click</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">triangleClick</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">view</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div.view\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"h1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Snabbdom SVG Carousel\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"svg\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">attrs</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token number\">380</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token number\">380</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">viewBox</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">190</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">190</span><span class=\"token punctuation\">,</span> <span class=\"token number\">380</span><span class=\"token punctuation\">,</span> <span class=\"token number\">380</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">[</span>\n        <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n          <span class=\"token string\">\"g#carousel\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token string-property property\">\"-webkit-transform\"</span><span class=\"token operator\">:</span> <span class=\"token function\">gRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token function\">gRotation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">transition</span><span class=\"token operator\">:</span> <span class=\"token string\">'all .3s'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">[</span>\n            <span class=\"token function\">hTriangle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">hTriangle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">hTriangle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"magenta\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">hTriangle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">180</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">hTriangle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cyan\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">240</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">hTriangle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"button\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function-variable function\">click</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">handleRotate</span><span class=\"token punctuation\">(</span><span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Rotate Clockwise\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"button\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function-variable function\">click</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">handleRotate</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Rotate Anticlockwise\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"button\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function-variable function\">click</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">handleReset</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Reset\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DOMContentLoaded\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"container1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  vnode <span class=\"token operator\">=</span> <span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">,</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"carousel-animation\">Carousel animation</h3>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  init<span class=\"token punctuation\">,</span>\n  classModule<span class=\"token punctuation\">,</span>\n  propsModule<span class=\"token punctuation\">,</span>\n  styleModule<span class=\"token punctuation\">,</span>\n  eventListenersModule<span class=\"token punctuation\">,</span>\n  h<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"snabbdom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> patch <span class=\"token operator\">=</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  classModule<span class=\"token punctuation\">,</span>\n  propsModule<span class=\"token punctuation\">,</span>\n  styleModule<span class=\"token punctuation\">,</span>\n  eventListenersModule<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> vnode<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> nextKey <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> margin <span class=\"token operator\">=</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> sortBy <span class=\"token operator\">=</span> <span class=\"token string\">\"rank\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> totalHeight <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> originalData <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"The Shawshank Redemption\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"The Godfather\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"The aging patriarch of an organized crime dynasty transfers control of his clandestine empire to his reluctant son.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"The Godfather: Part II\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"The early life and career of Vito Corleone in 1920s New York is portrayed while his son, Michael, expands and tightens his grip on his crime syndicate stretching from Lake Tahoe, Nevada to pre-revolution 1958 Cuba.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"The Dark Knight\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, the caped crusader must come to terms with one of the greatest psychological tests of his ability to fight injustice.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Pulp Fiction\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"The lives of two mob hit men, a boxer, a gangster's wife, and a pair of diner bandits intertwine in four tales of violence and redemption.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Schindler's List\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"In Poland during World War II, Oskar Schindler gradually becomes concerned for his Jewish workforce after witnessing their persecution by the Nazis.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"12 Angry Men\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"A dissenting juror in a murder trial slowly manages to convince the others that the case is not as obviously clear as it seemed in court.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"The Good, the Bad and the Ugly\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"A bounty hunting scam joins two men in an uneasy alliance against a third in a race to find a fortune in gold buried in a remote cemetery.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"The Lord of the Rings: The Return of the King\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"Gandalf and Aragorn lead the World of Men against Sauron's army to draw his gaze from Frodo and Sam as they approach Mount Doom with the One Ring.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Fight Club\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span>\n      <span class=\"token string\">\"An insomniac office worker looking for a way to change his life crosses paths with a devil-may-care soap maker and they form an underground fight club that evolves into something much, much more...\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  originalData<span class=\"token punctuation\">[</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">changeSort</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prop</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  sortBy <span class=\"token operator\">=</span> prop<span class=\"token punctuation\">;</span>\n  data<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> b<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;</span> b<span class=\"token punctuation\">[</span>prop<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> n <span class=\"token operator\">=</span> originalData<span class=\"token punctuation\">[</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">rank</span><span class=\"token operator\">:</span> nextKey<span class=\"token operator\">++</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> n<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">desc</span><span class=\"token operator\">:</span> n<span class=\"token punctuation\">.</span>desc<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">elmHeight</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">movie</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">m</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> m <span class=\"token operator\">!==</span> movie<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">movieView</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">movie</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">\"div.row\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">key</span><span class=\"token operator\">:</span> movie<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">opacity</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">\"translate(-200px)\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">delayed</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateY(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>movie<span class=\"token punctuation\">.</span>offset<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">opacity</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">remove</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">opacity</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translateY(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>movie<span class=\"token punctuation\">.</span>offset<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px) translateX(200px)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">hook</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function-variable function\">insert</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">vnode</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          movie<span class=\"token punctuation\">.</span>elmHeight <span class=\"token operator\">=</span> vnode<span class=\"token punctuation\">.</span>elm<span class=\"token punctuation\">.</span>offsetHeight<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>\n      <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">fontWeight</span><span class=\"token operator\">:</span> <span class=\"token string\">\"bold\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> movie<span class=\"token punctuation\">.</span>rank<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span> movie<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span> movie<span class=\"token punctuation\">.</span>desc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"div.btn.rm-btn\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function-variable function\">click</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span>movie<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"x\"</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">acc<span class=\"token punctuation\">,</span> m</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'acc'</span><span class=\"token punctuation\">,</span> acc<span class=\"token punctuation\">)</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'m'</span><span class=\"token punctuation\">,</span> m<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> last <span class=\"token operator\">=</span> acc<span class=\"token punctuation\">[</span>acc<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    m<span class=\"token punctuation\">.</span>offset <span class=\"token operator\">=</span> last <span class=\"token operator\">?</span> last<span class=\"token punctuation\">.</span>offset <span class=\"token operator\">+</span> last<span class=\"token punctuation\">.</span>elmHeight <span class=\"token operator\">+</span> margin <span class=\"token operator\">:</span> margin<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> acc<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  totalHeight <span class=\"token operator\">=</span>\n    data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">===</span> <span class=\"token number\">0</span>\n      <span class=\"token operator\">?</span> <span class=\"token number\">0</span>\n      <span class=\"token operator\">:</span> data<span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>offset <span class=\"token operator\">+</span> data<span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>elmHeight<span class=\"token punctuation\">;</span>\n  vnode <span class=\"token operator\">=</span> <span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>vnode<span class=\"token punctuation\">,</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"h1\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Top 10 movies\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a.btn.add\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">click</span><span class=\"token operator\">:</span> add <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Add\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Sort by: \"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">h</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"span.btn-group\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n          <span class=\"token string\">\"a.btn.rank\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">class</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">active</span><span class=\"token operator\">:</span> sortBy <span class=\"token operator\">===</span> <span class=\"token string\">\"rank\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function-variable function\">click</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">changeSort</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rank\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"Rank\"</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n          <span class=\"token string\">\"a.btn.title\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">class</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">active</span><span class=\"token operator\">:</span> sortBy <span class=\"token operator\">===</span> <span class=\"token string\">\"title\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function-variable function\">click</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">changeSort</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"title\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"Title\"</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n          <span class=\"token string\">\"a.btn.desc\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">class</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">active</span><span class=\"token operator\">:</span> sortBy <span class=\"token operator\">===</span> <span class=\"token string\">\"desc\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">on</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function-variable function\">click</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">changeSort</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"desc\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">\"Description\"</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"div.list\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">style</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> totalHeight <span class=\"token operator\">+</span> <span class=\"token string\">\"px\"</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>movieView<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DOMContentLoaded\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> container <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"container3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  vnode <span class=\"token operator\">=</span> <span class=\"token function\">patch</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">,</span> <span class=\"token function\">view</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre><h3 id=\"hero\">Hero</h3>\n<p>...</p>\n","attributes":{}},"themeConfig":{"title":"Blog(issues)","links":[{"title":"GitHub","url":"https://github.com/xiaotiandada/blog"},{"title":"Twitter","url":"https://twitter.com/XiaoTianIsMe"}]}},"__N_SSG":true}